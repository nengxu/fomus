<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>FOMUS Documentation</title><link rel="stylesheet" href="fomus.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.68.1" /></head><body><div class="book" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="id190866"></a>FOMUS Documentation</h1></div><div><div class="author"><h3 class="author"><span class="firstname">David</span> <span class="surname">Psenicka</span></h3><code class="email">&lt;<a href="mailto:dpsenick(at)uiuc(dot)edu">dpsenick(at)uiuc(dot)edu</a>&gt;</code></div></div><div><p class="releaseinfo">Version 0.2.6</p></div><div><div class="legalnotice"><a id="id267142"></a><p>Copyright © 2005, 2006 David Psenicka, All Rights Reserved</p><p>See file "COPYING" for terms of use and distribution.</p></div></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#intro">1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#id231809"></a></span></dt></dl></dd><dt><span class="chapter"><a href="#install">2. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#id273797">Downloading</a></span></dt><dt><span class="section"><a href="#id274177">Compiling/Loading</a></span></dt><dt><span class="section"><a href="#install.cmd">Installing as an Executable</a></span></dt><dt><span class="section"><a href="#id274370">Customizing the Installation</a></span></dt></dl></dd><dt><span class="chapter"><a href="#usage">3. Usage</a></span></dt><dd><dl><dt><span class="section"><a href="#id274505"></a></span></dt><dt><span class="section"><a href="#id274840">Interface 1</a></span></dt><dt><span class="section"><a href="#interface2">Interface 2</a></span></dt><dt><span class="section"><a href="#interface.text">Text File Interface</a></span></dt><dt><span class="section"><a href="#id276021">Common Music Interface</a></span></dt><dt><span class="section"><a href="#interface.cmd">Command Line Interface</a></span></dt><dt><span class="section"><a href="#id276194">Other Interface Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#id276200"></a></span></dt><dt><span class="section"><a href="#id276225"></a></span></dt><dt><span class="section"><a href="#id276265"></a></span></dt><dt><span class="section"><a href="#id276290"></a></span></dt><dt><span class="section"><a href="#id276325"></a></span></dt><dt><span class="section"><a href="#id276350"></a></span></dt><dt><span class="section"><a href="#id276459"></a></span></dt><dt><span class="section"><a href="#id276484"></a></span></dt><dt><span class="section"><a href="#id276528"></a></span></dt><dt><span class="section"><a href="#id276572"></a></span></dt><dt><span class="section"><a href="#id276597"></a></span></dt><dt><span class="section"><a href="#id276662"></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#objects">4. Objects</a></span></dt><dd><dl><dt><span class="section"><a href="#id278857"></a></span></dt><dt><span class="section"><a href="#id279207">Class PART</a></span></dt><dt><span class="section"><a href="#id279785">Class TIMESIG</a></span></dt><dt><span class="section"><a href="#id280711">Class TIMESIG-REPL</a></span></dt><dt><span class="section"><a href="#id280947">Class KEYSIG</a></span></dt><dt><span class="section"><a href="#id280961">Class NOTE</a></span></dt><dt><span class="section"><a href="#id281978">Class REST</a></span></dt><dt><span class="section"><a href="#id282448">Class MARK</a></span></dt><dt><span class="section"><a href="#id283255">Structure INSTR</a></span></dt><dt><span class="section"><a href="#id284198">Structure PERC</a></span></dt></dl></dd><dt><span class="chapter"><a href="#settings">5. Settings</a></span></dt><dd><dl><dt><span class="section"><a href="#id289376"></a></span></dt><dt><span class="section"><a href="#id289738">Most Useful <span class="application">FOMUS</span> Settings</a></span></dt><dt><span class="section"><a href="#id289911">Complete <span class="application">FOMUS</span> Settings</a></span></dt><dd><dl><dt><span class="section"><a href="#id289922">Program Settings</a></span></dt><dt><span class="section"><a href="#id290008">Executables</a></span></dt><dt><span class="section"><a href="#id290101">Global</a></span></dt><dt><span class="section"><a href="#id290165">Objects</a></span></dt><dt><span class="section"><a href="#id290205">Parts</a></span></dt><dt><span class="section"><a href="#id290290">Time Signatures</a></span></dt><dt><span class="section"><a href="#id290332">Modules</a></span></dt><dt><span class="section"><a href="#id290446">Modules On/Off</a></span></dt><dt><span class="section"><a href="#id290586">Quantizing</a></span></dt><dt><span class="section"><a href="#id290645">Staves</a></span></dt><dt><span class="section"><a href="#id290690">Ottavas</a></span></dt><dt><span class="section"><a href="#id290715">Accidentals</a></span></dt><dt><span class="section"><a href="#id290756">Cautionary Accidentals</a></span></dt><dt><span class="section"><a href="#id290812">Grace Notes</a></span></dt><dt><span class="section"><a href="#id290855">Measure/Tuplet Divisions</a></span></dt><dt><span class="section"><a href="#id290898">Note Splitting/Tying</a></span></dt><dt><span class="section"><a href="#id290973">Beams</a></span></dt></dl></dd><dt><span class="section"><a href="#id291018">Alphabetical Listing of Settings</a></span></dt></dl></dd><dt><span class="chapter"><a href="#marks">6. Marks</a></span></dt><dd><dl><dt><span class="section"><a href="#id300431"></a></span></dt><dt><span class="section"><a href="#id300963">FOMUS Marks</a></span></dt><dd><dl><dt><span class="section"><a href="#id300969"></a></span></dt><dt><span class="section"><a href="#id301244">Articulations</a></span></dt><dt><span class="section"><a href="#id301505">Dynamics</a></span></dt><dt><span class="section"><a href="#id301854">Tempo/Duration</a></span></dt><dt><span class="section"><a href="#id301978">Ornamentations</a></span></dt><dt><span class="section"><a href="#id302331">Effects</a></span></dt><dt><span class="section"><a href="#id302684">Text</a></span></dt><dt><span class="section"><a href="#id302962">Notation</a></span></dt></dl></dd><dt><span class="section"><a href="#id303298">TIMESIG Properties</a></span></dt><dt><span class="section"><a href="#id303408">PART Properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#backends">7. Backends</a></span></dt><dd><dl><dt><span class="section"><a href="#id305955"></a></span></dt><dt><span class="section"><a href="#id306378">Data</a></span></dt><dt><span class="section"><a href="#id306449">LilyPond</a></span></dt><dd><dl><dt><span class="section"><a href="#id306560">LilyPond Options</a></span></dt><dt><span class="section"><a href="#id306741">Alphabetical Listing of Options</a></span></dt></dl></dd><dt><span class="section"><a href="#id307394">MusicXML</a></span></dt><dd><dl><dt><span class="section"><a href="#id307510">MusicXML Options</a></span></dt><dt><span class="section"><a href="#id307573">Alphabetical Listing of Options</a></span></dt></dl></dd><dt><span class="section"><a href="#id307770">MusicXML for Sibelius</a></span></dt><dt><span class="section"><a href="#id307803">MusicXML for Finale</a></span></dt><dt><span class="section"><a href="#id307834">Common Music Notation</a></span></dt><dd><dl><dt><span class="section"><a href="#id307902">CMN Options</a></span></dt><dt><span class="section"><a href="#id307985">Alphabetical Listing of Options</a></span></dt></dl></dd><dt><span class="section"><a href="#id308245">MIDI</a></span></dt><dd><dl><dt><span class="section"><a href="#id308376">MIDI Options</a></span></dt><dt><span class="section"><a href="#id308627">Alphabetical Listing of Options</a></span></dt></dl></dd><dt><span class="section"><a href="#id310136">Raw</a></span></dt></dl></dd><dt><span class="chapter"><a href="#init">8. Initialization File</a></span></dt><dd><dl><dt><span class="section"><a href="#id313744"></a></span></dt></dl></dd><dt><span class="chapter"><a href="#examples">9. Examples</a></span></dt><dd><dl><dt><span class="section"><a href="#id313775"></a></span></dt><dt><span class="section"><a href="#id313951">Lisp Examples</a></span></dt><dt><span class="section"><a href="#id314225">Common Music Examples</a></span></dt></dl></dd></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>2.1. <a href="#id274121">Unzipping the Tarball</a></dt><dt>2.2. <a href="#id274145">Downloading from Subversion Repository</a></dt><dt>2.3. <a href="#id274191">Compiling and Loading</a></dt><dt>2.4. <a href="#id274323">Running the Installation Script 1</a></dt><dt>2.5. <a href="#id274338">Running the Installation Script 2</a></dt><dt>3.1. <a href="#id274986">FOMUS Usage 1</a></dt><dt>3.2. <a href="#id275025">FOMUS Usage 2</a></dt><dt>3.3. <a href="#id275063">FOMUS Usage 3</a></dt><dt>3.4. <a href="#id275127">FOMUS Usage 4</a></dt><dt>3.5. <a href="#id275765">FOMUS Usage 5</a></dt><dt>3.6. <a href="#id275779">FOMUS Usage 6</a></dt><dt>3.7. <a href="#id275818">FOMUS Text Input File</a></dt><dt>3.8. <a href="#id275889">FOMUS Usage 7</a></dt><dt>3.9. <a href="#id275903">FOMUS Usage 8</a></dt><dt>3.10. <a href="#id276002">FOMUS Usage 9</a></dt><dt>3.11. <a href="#id276111">FOMUS Usage 10</a></dt><dt>3.12. <a href="#id276125">FOMUS Usage 11</a></dt><dt>3.13. <a href="#id276180">FOMUS Usage 12</a></dt><dt>4.1. <a href="#id279638">PART-INSTR Slot Setting</a></dt><dt>4.2. <a href="#id280457">TIMESIG-DIV Slot Setting</a></dt><dt>4.3. <a href="#id279157">EVENT-NOTE Slot Setting 1</a></dt><dt>4.4. <a href="#id279170">EVENT-NOTE Slot Setting 2</a></dt><dt>4.5. <a href="#id281831">EVENT-NOTE Slot Setting 3</a></dt><dt>4.6. <a href="#id281845">EVENT-NOTE Slot Setting 4</a></dt><dt>4.7. <a href="#id282892">EVENT-VOICE Slot Setting</a></dt><dt>4.8. <a href="#id283075">EVENT-MARKS Slot Setting 1</a></dt><dt>4.9. <a href="#id283182">EVENT-MARKS Slot Setting 2</a></dt><dt>4.10. <a href="#id283876">INSTR-CLEFLEGLS Slot Setting</a></dt><dt>4.11. <a href="#id284043">INSTR-PERCS Slot Setting</a></dt><dt>5.1. <a href="#id292710">DEFAULT-MEAS-DIVS Setting</a></dt><dt>5.2. <a href="#id292815">DEFAULT-TUPLET-DIVS Setting</a></dt><dt>5.3. <a href="#id292918">DEFAULT-TUPLETS Setting</a></dt><dt>5.4. <a href="#id293151">ENSEMBLE-TYPE Setting 1</a></dt><dt>5.5. <a href="#id293164">ENSEMBLE-TYPE Setting 2</a></dt><dt>5.6. <a href="#id293350">FILENAME Setting</a></dt><dt>5.7. <a href="#id293632">INSTR-GROUPS Setting</a></dt><dt>5.8. <a href="#id293736">INSTRUMENT Setting</a></dt><dt>5.9. <a href="#id294496">OUTPUT Setting 1</a></dt><dt>5.10. <a href="#id294510">OUTPUT Setting 2</a></dt><dt>5.11. <a href="#id294523">OUTPUT Setting 3</a></dt><dt>5.12. <a href="#id294629">PERCUSSION Setting</a></dt><dt>8.1. <a href="#id314091">Initialization File Contents</a></dt><dt>9.1. <a href="#id313957">Simple Example</a></dt><dt>9.2. <a href="#id314262">Staccato and Accent Marks</a></dt><dt>9.3. <a href="#id314301">Quartertones</a></dt><dt>9.4. <a href="#id314339">Polyphony with Slurs</a></dt><dt>9.5. <a href="#id314378">Piano Chords</a></dt><dt>9.6. <a href="#id314416">Quantizing/Chords</a></dt><dt>9.7. <a href="#id314454">Mark Objects</a></dt><dt>9.8. <a href="#id314496">Percussion 1</a></dt><dt>9.9. <a href="#id314536">Percussion 2</a></dt><dt>9.10. <a href="#id314575">Percussion with Automatic Durations</a></dt><dt>9.11. <a href="#id314614">Semi-Orchestra Score</a></dt><dt>9.12. <a href="#id314230">2 Part Polyphony</a></dt><dt>9.13. <a href="#id314781">2 Part Polyphony (FOMUS Chooses the Voice)</a></dt><dt>9.14. <a href="#id314821">3 Part Polyphony</a></dt><dt>9.15. <a href="#id314861">6 Part Polyphony</a></dt></dl></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="intro"></a>Chapter 1. Introduction</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id231809"></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p>
    <span class="application">FOMUS</span> (FOrmat MUSic) is a music notation tool for computer music composers.
    It is written in the Lisp programming language, and has been tested in the following interpreters:
    <span class="application"><a href="http://www.cons.org/cmucl/" target="_top">CMUCL</a></span> (version 19),
    <span class="application"><a href="http://www.sbcl.org/" target="_top">SBCL</a></span> (version 0.9.4),
    <span class="application"><a href="http://openmcl.clozure.com/" target="_top">OpenMCL</a></span> (version 1),
    <span class="application"><a href="http://clisp.sourceforge.net/" target="_top">CLISP</a></span> (version 2, debugging nearly finished, still testing),
    <span class="application"><a href="http://www.franz.com/" target="_top">Allegro</a></span> (version 7) and
    <span class="application"><a href="http://www.lispworks.com/" target="_top">LispWorks</a></span> (version 4).
    As the program becomes more stable, it will also be tested in other lisp implementations.  Supported operating systems are
    Linux, Max OS X and Windows.
    
    The purpose of it is to facilitate the conversion of "raw" algorithmic output data into readable music notation, a process that can be
    frustrating and time consuming since it often requires dumping data into some intermediary format (such as MIDI) and importing
    it into a notation program that only does a mediocre job of conversion.  
    <span class="application">FOMUS</span> attempts to remove this frustration by making a reasonably intelligent attempt at
    spelling notes, quantizing offsets and durations into readable rhythms, 
    laying out the information into voices and staves, and other tasks (such as where to include clef changes or ottava markings).
    The user may also specify extra information such as articulations, text markings, time signature changes, 
    notational details of musical instruments, etc..  
    When the program is run, it outputs a file suitable for importing straight into a notation program, 
    after which a small amount of editing and layout work should be required to create a finished musical score.
  </p><p>
    Following is a list of some of the tasks <span class="application">FOMUS</span> is designed to automate:
    </p><div class="itemizedlist"><ul type="disc"><li>Part grouping and ordering</li><li>Transposition and checking of instrument ranges</li><li>Note spelling (semitones and quartertones are currently supported) and cautionary accidentals</li><li>Rhythmic quantizing (with tuplet choices that minimize the amount of error between input offsets and notational offsets)</li><li>Distribution of notes into voices and staves</li><li>Note splitting and tying, taking into account metrical divisions, dotted rhythms, and other special cases</li><li>Decisions regarding placement of clef changes and ottava brackets</li><li>Layout of articulations, slurs, beams, dynamic and text markings, and other notational elements</li></ul></div><p>
  </p><p>
    The following output formats are supported:
    </p><div class="itemizedlist"><ul type="disc"><li><span class="application"><a href="http://www.musicxml.org/" target="_top">MusicXML</a></span></li><li><span class="application"><a href="http://ccrma.stanford.edu/software/cmn/" target="_top">Common Music Notation</a></span> (almost implemented)</li><li><span class="application"><a href="http://lilypond.org/web/" target="_top">LilyPond</a></span></li><li>MIDI File/Playback through <span class="application"><a href="http://commonmusic.sf.net" target="_top">Common Music</a></span></li></ul></div><p>
    <span class="application">MusicXML</span> files will import (more or less) into popular notation programs like
    <span class="application"><a href="http://www.finalemusic.com/" target="_top">Finale</a></span>
    and <span class="application"><a href="http://www.sibelius.com/" target="_top">Sibelius</a></span>.
  </p><p>
    <span class="application">FOMUS</span> integrates with <span class="application"><a href="http://commonmusic.sf.net" target="_top">Common Music</a></span>,
    using some of its functionality if present and also functioning as a backend.
    <span class="application">FOMUS</span> has also been designed to allow selection of modules that use different algorithms to perform the same task.
    As new functions are added, users can select the ones that give them the best results.
    These will be added to the program over time.
  </p><p>
    <span class="application">FOMUS</span> is still in its initial (alpha) development stage, so please expect many bugs.
    If you wish to report one, please look at the <code class="varname"><a href="#setting.debug.filename">DEBUG-FILENAME</a></code>
    setting to see how to create a debug file and e-mail it to <code class="email">&lt;<a href="mailto:dpsenick(at)uiuc(dot)edu">dpsenick(at)uiuc(dot)edu</a>&gt;</code>.
    Please send me suggestions and comments if you have any.
  </p><p>
  Thanks to Rick Taube, Kilian Sprotte and Mika Kuuskankare for their help and suggestions.
  Also thanks to Kilian Sprotte for developing code for the test suite, available in the CVS repository under module <code class="literal">fomustest</code> or
  <code class="literal">testfomus</code>.
  </p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="install"></a>Chapter 2. Installation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id273797">Downloading</a></span></dt><dt><span class="section"><a href="#id274177">Compiling/Loading</a></span></dt><dt><span class="section"><a href="#install.cmd">Installing as an Executable</a></span></dt><dt><span class="section"><a href="#id274370">Customizing the Installation</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id273797"></a>Downloading</h2></div></div></div><p>
      <span class="application">FOMUS</span> is available in tarball form <a href="http://common-lisp.net/project/fomus/download" target="_top">here</a>.
      Download the latest version and type something similar to the following at a UNIX prompt:
    </p><div class="example"><a id="id274121"></a><p class="title"><b>Example 2.1. Unzipping the Tarball</b></p><pre class="programlisting">

cd path_to_install_directory
tar -zxf path_to_tarball/fomus-0.2.0.tgz
      </pre></div><p>
    </p><p>
      The development/unstable version is available via Subversion, hosted at <a href="http://common-lisp.net/" target="_top">Common-Lisp.net</a>.
      Type the following command at a UNIX prompt to download the latest version (you must have Subversion installed on your machine):
    </p><div class="example"><a id="id274145"></a><p class="title"><b>Example 2.2. Downloading from Subversion Repository</b></p><pre class="programlisting">

mkdir fomus
svn checkout svn://common-lisp.net/project/fomus/svn/fomus/trunk fomus
      </pre></div><p>
    </p><p>
      Future updates will then only require typing <code class="literal">svn update</code> in the <span class="application">FOMUS</span> directory.
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id274177"></a>Compiling/Loading</h2></div></div></div><p>
    The program may be compiled and loaded by loading the file <code class="filename">load.lisp</code>.
    </p><div class="example"><a id="id274191"></a><p class="title"><b>Example 2.3. Compiling and Loading</b></p><pre class="programlisting">

CL-USER&gt; (load "path_to_fomus_directory/load.lisp")
      </pre><p>...</p><pre class="programlisting">

CL-USER&gt; (use-package :fm)
      </pre></div><p>
    The package name is <code class="function">FOMUS</code>, and can also be referred to with the abbreviations <code class="function">FMS</code> and <code class="function">FM</code>.
  </p><p>
    A system definition file <code class="filename">fomus.asd</code> is also provided for use with <span class="application"><a href="http://www.cliki.net/asdf" target="_top">ASDF</a></span>.
    To use it, make sure <span class="application">ASDF</span>'s central registry parameter contains the necessary path information and
    load it using the <code class="function">OPERATE</code> function (see the <span class="application">ASDF</span> documentation for more information).
  </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="install.cmd"></a>Installing as an Executable</h2></div></div></div><p>
      The script file <code class="filename">install.sh</code> can be run at a UNIX command prompt to install <span class="application">FOMUS</span> as a command-line
      executable program.  At this point, this can only be done with <span class="application">SBCL</span>, <span class="application">CMUCL</span> and 
      <span class="application">OpenMCL</span> in a UNIX environment (it's been tested in OS X and Linux), though a look at the script should show how
      to install it with other Lisps in any other environment. 
      </p><p>
       Type the following to get a list of installation options:
      </p><div class="example"><a id="id274323"></a><p class="title"><b>Example 2.4. Running the Installation Script 1</b></p>

cd path_to_install_directory
./install.sh --help
      </div><p>
      By default, the script tries to install the program into the subdirectories in <code class="literal">/usr/local</code>.  The commands for a default installation using SBCL 
      would look like this:
      </p><div class="example"><a id="id274338"></a><p class="title"><b>Example 2.5. Running the Installation Script 2</b></p>

su -
cd path_to_install_directory
./install.sh --sbcl
      </div><p>
      There is also an option for uninstalling.  To see how to use as an executable, see <a href="#interface.cmd" title="Command Line Interface">Command Line Interface</a> and
      <a href="#interface.text" title="Text File Interface">Text File Interface</a>.
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id274370"></a>Customizing the Installation</h2></div></div></div><p>
      By default, <span class="application">FOMUS</span> compiles and loads all of the backends listed in this documentation.  You
      can leave any one of these out by adding noe the following keywords to the <code class="literal">*FEATURES*</code> list (using <code class="literal">PUSH</code>
      or <code class="literal">PUSHNEW</code>):
      </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">:FOMUS-NOCMN</code></td></tr><tr><td><code class="literal">:FOMUS-NOLILYPOND</code></td></tr><tr><td><code class="literal">:FOMUS-NOMUSICXML</code></td></tr><tr><td><code class="literal">:FOMUS-NOMIDI</code></td></tr></table><p>
      These must be added before loading or compiling.
      If you are recompiling with different keywords, be sure to delete all <code class="filename">.fasl</code> files first to insure 
      that all parts of the program are consistent.
    </p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="usage"></a>Chapter 3. Usage</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id274505"></a></span></dt><dt><span class="section"><a href="#id274840">Interface 1</a></span></dt><dt><span class="section"><a href="#interface2">Interface 2</a></span></dt><dt><span class="section"><a href="#interface.text">Text File Interface</a></span></dt><dt><span class="section"><a href="#id276021">Common Music Interface</a></span></dt><dt><span class="section"><a href="#interface.cmd">Command Line Interface</a></span></dt><dt><span class="section"><a href="#id276194">Other Interface Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#id276200"></a></span></dt><dt><span class="section"><a href="#id276225"></a></span></dt><dt><span class="section"><a href="#id276265"></a></span></dt><dt><span class="section"><a href="#id276290"></a></span></dt><dt><span class="section"><a href="#id276325"></a></span></dt><dt><span class="section"><a href="#id276350"></a></span></dt><dt><span class="section"><a href="#id276459"></a></span></dt><dt><span class="section"><a href="#id276484"></a></span></dt><dt><span class="section"><a href="#id276528"></a></span></dt><dt><span class="section"><a href="#id276572"></a></span></dt><dt><span class="section"><a href="#id276597"></a></span></dt><dt><span class="section"><a href="#id276662"></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p>
    Using <span class="application">FOMUS</span> requires defining at least one part, filling these parts with events, then calling
    <span class="application">FOMUS</span>'s main function to process everything and output a score file for importing.
    There are several ways of doing this.
    The following sections explain these different approaches: 
  </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id274840"></a>Interface 1</h2></div></div></div><p>
      The first approach involves creating all the necessary objects and assembling lists, then calling <span class="application">FOMUS</span>'s
      main function to process everything.
      The main function is <code class="function">FOMUS</code> and has the following format:
    </p><p><code class="function">(<a id="function.fomus"></a>FOMUS &amp;key <strong class="userinput"><code>setting</code></strong> <strong class="userinput"><code>value</code></strong> ...)</code></p><p>
      <strong class="userinput"><code>setting</code></strong> above is one of the setting keywords listed in chapter <a href="#settings" title="Chapter&#xA0;5.&#xA0;Settings">Settings</a>, and
      <strong class="userinput"><code>value</code></strong> is its value.
      Every piece of information <span class="application">FOMUS</span> needs can be included in this function call.
      The most important settings are <code class="varname"><a href="#setting.global">GLOBAL</a></code>, <code class="varname"><a href="#setting.parts">PARTS</a></code>
      and <code class="varname"><a href="#setting.events">EVENTS</a></code>, which contain all of the <code class="classname"><a href="#class.part">PART</a></code>,
      <code class="classname"><a href="#class.timesig">TIMESIG</a></code>, <code class="classname"><a href="#class.note">NOTE</a></code>,
      <code class="classname"><a href="#class.rest">REST</a></code> and other objects that directly affect what appears on the score.
      See the individual documentation for these for an explanation of how to use them.
      A few examples are given below (illustrations are "raw" output processed with <span class="application">LilyPond</span> version 2.4.2):
      </p><div class="example"><a id="id274986"></a><p class="title"><b>Example 3.1. FOMUS Usage 1</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :ensemble-type :orchestra
 :parts
 (list
  (make-part
   :name "Piano"
   :instr :piano
   :events
   (loop
    for off from 0 to 10 by 1/2
    collect (make-note :off off
		       :dur (if (&lt; off 10) 1/2 1)
		       :note (+ 48 (random 25))
		       :marks (when (&lt;= (random 3) 0)
				'(:staccato)))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="usage_ex1.jpg" /><div class="caption">Output</div></div></blockquote></div></div><p>
      </p><div class="example"><a id="id275025"></a><p class="title"><b>Example 3.2. FOMUS Usage 2</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :ensemble-type :orchestra
 :default-beat 1/4
 :global (list (make-timesig :off 0 :time '(3 4))
	       (make-timesig :off 7 :time '(5 8)))
 :parts
 (list (make-part
	:name "Piano"
	:instr :piano
	:events
	(loop
	 for basenote in '(54 42)
	 nconc (loop for off = 0 then (+ off dur)
		     and dur = (/ (1+ (random 4)) 2)
		     while (&lt; (+ off dur) 12)
		     collect (make-note :voice '(1 2)
					:off off
					:dur dur
					:note (+ basenote (random 25))))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="usage_ex2.jpg" /><div class="caption">Output</div></div></blockquote></div></div><p>
      </p><div class="example"><a id="id275063"></a><p class="title"><b>Example 3.3. FOMUS Usage 3</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :ensemble-type :orchestra
 :beat-division 4
 :quartertones t
 :parts (list
	 (make-part
	  :partid 'flute
	  :name "Flute"
	  :instr :flute)
	 (make-part
	  :partid 'tuba
	  :name "Tuba"
	  :instr :tuba))
 :events (loop repeat 5
	       for off = (random 1.0) then (+ off (1+ (random 1.0)))
	       and dur = (random 1.0)
	       and inst = (if (eq inst 'flute) 'tuba 'flute)
	       collect (make-note :partid inst
				  :off off
				  :dur dur
				  :note (+ (case inst
					     (flute 72)
					     (tuba 36))
					   (/ (random 25) 2))
				  :marks (case (random 3)
					   (0 '(:accent))
					   (1 '(:staccato))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="usage_ex3.jpg" /><div class="caption">Output</div></div></blockquote></div></div><p>
    </p><p>
      All of these settings are also present as special variables (see chapter <a href="#settings" title="Chapter&#xA0;5.&#xA0;Settings">Settings</a>).
      The following example accomplishes exactly the same thing as example <a href="#example.fomus.usage1">FOMUS Usage 1</a> above:
      </p><div class="example"><a id="id275127"></a><p class="title"><b>Example 3.4. FOMUS Usage 4</b></p><pre class="programlisting">

(setf *output* '(:lilypond :view t))
(fomus
 :ensemble-type :orchestra
 :parts
 (list
  (make-part
   :name "Piano"
   :instr :piano
   :events
   (loop
    for off from 0 to 10 by 1/2
    collect (make-note :off off
		       :dur (if (&lt; off 10) 1/2 1)
		       :note (+ 48 (random 25))
		       :marks (when (&lt;= (random 3) 0)
				'(:staccato)))))))
	</pre></div><p>
      Specifying keywords in the <code class="function"><a href="#function.fomus">FOMUS</a></code> function always overrides what is contained in the special variables.
      Also, <code class="function"><a href="#function.fomus">FOMUS</a></code> accepts one additional key, <code class="literal">:ALLOW-OTHER-KEYS</code>.
      Passing a value of <code class="literal">T</code> to this argument allows other keys that <span class="application">FOMUS</span> doesn't recognize
      to be present in the call.
      By default, <code class="function"><a href="#function.fomus">FOMUS</a></code> accepts only keywords listed in <a href="#settings" title="Chapter&#xA0;5.&#xA0;Settings">Settings</a>.
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="interface2"></a>Interface 2</h2></div></div></div><p>
      <span class="application">FOMUS</span> also provides several functions that are wrappers to the first method described above.
      They create and store the objects internally so the user doesn't have to maintain lists of objects and data.
      The functions are:
    </p><p><code class="function">(<a id="function.fomus.init"></a>FOMUS-INIT
      &amp;key <strong class="userinput"><code>setting</code></strong> <strong class="userinput"><code>value</code></strong> ...)</code></p><p><code class="function">(<a id="function.fomus.newpart"></a>FOMUS-NEWPART
      <strong class="userinput"><code>partid</code></strong> &amp;key <strong class="userinput"><code>slot</code></strong> <strong class="userinput"><code>value</code></strong> ...)</code></p><p><code class="function">(<a id="function.fomus.newtimesig"></a>FOMUS-NEWTIMESIG
      <strong class="userinput"><code>partids</code></strong> &amp;key <strong class="userinput"><code>slot</code></strong> <strong class="userinput"><code>value</code></strong> ...)</code></p><p><code class="function">(<a id="function.fomus.newnote"></a>FOMUS-NEWNOTE
      <strong class="userinput"><code>partid</code></strong> &amp;key <strong class="userinput"><code>slot</code></strong> <strong class="userinput"><code>value</code></strong> ...)</code></p><p><code class="function">(<a id="function.fomus.newrest"></a>FOMUS-NEWREST
      <strong class="userinput"><code>partid</code></strong> &amp;key <strong class="userinput"><code>slot</code></strong> <strong class="userinput"><code>value</code></strong> ...)</code></p><p><code class="function">(<a id="function.fomus.newmark"></a>FOMUS-NEWMARK
      <strong class="userinput"><code>partid</code></strong> &amp;key <strong class="userinput"><code>slot</code></strong> <strong class="userinput"><code>value</code></strong> ...)</code></p><p><code class="function">(<a id="function.fomus.exec"></a>FOMUS-EXEC
      &amp;key <strong class="userinput"><code>setting</code></strong> <strong class="userinput"><code>value</code></strong> ...)</code></p><p>
      The user first calls <code class="function">FOMUS-INIT</code>, which initializes settings and insures that <span class="application">FOMUS</span> is ready to
      accept new data.
      Setting values may be passed to this function in exactly the same way as the <code class="function"><a href="#function.fomus">FOMUS</a></code>
      function above, though it isn't necessary in this case to include <code class="varname"><a href="#setting.global">GLOBAL</a></code>,
      <code class="varname"><a href="#setting.parts">PARTS</a></code>
      or <code class="varname"><a href="#setting.events">EVENTS</a></code>.
      The functions <code class="function"><a href="#function.fomus.newpart">FOMUS-NEWPART</a></code>,
      <code class="function"><a href="#function.fomus.newtimesig">FOMUS-NEWTIMESIG</a></code>,
      <code class="function"><a href="#function.fomus.newnote">FOMUS-NEWNOTE</a></code>,
      <code class="function"><a href="#function.fomus.newrest">FOMUS-NEWREST</a></code> and
      <code class="function"><a href="#function.fomus.newmark">FOMUS-NEWMARK</a></code> are then used to create and store all of the
      objects that are normally included in the <code class="varname"><a href="#setting.global">GLOBAL</a></code>,
      <code class="varname"><a href="#setting.parts">PARTS</a></code>
      and <code class="varname"><a href="#setting.events">EVENTS</a></code> settings.
      The required <strong class="userinput"><code>partid</code></strong> or <strong class="userinput"><code>partids</code></strong> arguments correspond directly to the
      slots of the corresponding objects (see the documentation for each of these in <a href="#objects" title="Chapter&#xA0;4.&#xA0;Objects">Objects</a> for more information).
      The <em class="structfield"><code>PARTID</code></em> argument to <code class="function"><a href="#function.fomus.newpart">FOMUS-NEWPART</a></code>
      must be unique or objects that use them to refer to parts will refer to more than one.
      The <strong class="userinput"><code>slot</code></strong> keywords can be any of the constructor slot keywords in the corresponding object, and the <strong class="userinput"><code>value</code></strong>
      argument is the appropriate value for that slot.
      Internally, <span class="application">FOMUS</span> stores all <code class="classname"><a href="#class.timesig">TIMESIG</a></code> objects
      in the <code class="varname"><a href="#setting.global">GLOBAL</a></code> setting list, all
      <code class="classname"><a href="#class.part">PART</a></code> objects in the <code class="varname"><a href="#setting.parts">PARTS</a></code>
      list and all other objects (<code class="classname"><a href="#class.note">NOTE</a></code>,
      <code class="classname"><a href="#class.rest">REST</a></code> and <code class="classname"><a href="#class.mark">MARK</a></code>)
      in the <code class="varname"><a href="#setting.events">EVENTS</a></code> list.
      This means that the user may specify <code class="literal">NIL</code> or a list of part IDs in the <em class="structfield"><code>PARTID</code></em>/<em class="structfield"><code>PARTIDS</code></em>
      slots of <code class="classname"><a href="#class.mark">TIMESIG</a></code> and <code class="classname"><a href="#class.mark">MARK</a></code> objects.
      When the user is finished calling the <code class="function">FOMUS-NEW</code> functions, the last thing to do is call
      <code class="function"><a href="#function.fomus.exec">FOMUS-EXEC</a></code>.
      This again accepts setting keywords and values (overriding any previous setting values) and passes all information to the
      <code class="function"><a href="#function.fomus">FOMUS</a></code> function which does the rest of the processing.
      After <code class="function"><a href="#function.fomus.exec">FOMUS-EXEC</a></code> is called, all internal data is reinitialized as if
      <code class="function"><a href="#function.fomus.init">FOMUS-INIT</a></code> were called with no arguments.
    </p><p>
      Following are the interface 2 equivalents to some of the examples above:
      </p><div class="example"><a id="id275765"></a><p class="title"><b>Example 3.5. FOMUS Usage 5</b></p><pre class="programlisting">

(To be completed.)
	</pre></div><p>
      </p><div class="example"><a id="id275779"></a><p class="title"><b>Example 3.6. FOMUS Usage 6</b></p><pre class="programlisting">

(To be completed.)
	</pre></div><p>
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="interface.text"></a>Text File Interface</h2></div></div></div><p>You may also create a text file where each line of the file executes one of the commands listed in 
    <a href="#interface2" title="Interface 2">Interface 2</a>.  An example file is given below:
      </p><div class="example"><a id="id275818"></a><p class="title"><b>Example 3.7. FOMUS Text Input File</b></p><pre class="programlisting">

init :output (:lilypond :view t)
;; remark
part 1 :name "Piano" :instr :piano
note 1 :off 0 :dur 1 :note 60
note 1 :off 1 :dur 1 :note 62
	</pre></div><p>
      Each element is read using the Lisp <code class="function">READ</code> command (nothing is evaluated).
      <code class="literal">INIT</code> lines specify values for <span class="application">FOMUS</span> settings and can contain multiple keyword/arguments on a line.
      As many <code class="literal">INIT</code> lines as needed may appear.
      To process this file, use the <code class="function">FOMUS</code> command as follows:
      </p><p><code class="function">(<a id="function.fomus2"></a>FOMUS <strong class="userinput"><code>filename</code></strong> &amp;key <strong class="userinput"><code>value</code></strong> ...)</code></p><p>
      </p><div class="example"><a id="id275889"></a><p class="title"><b>Example 3.8. FOMUS Usage 7</b></p><pre class="programlisting">

(fomus "/directory/file.txt")
	</pre></div><p>
      </p><div class="example"><a id="id275903"></a><p class="title"><b>Example 3.9. FOMUS Usage 8</b></p><pre class="programlisting">

(fomus "/directory/file.txt" :output :cmn)
	</pre></div><p>
      Keyword/argument pairs passed to this function override the settings stored in the input file.
    </p><p> 
      The <code class="function">FOMUS-FILE</code> function may be used to parse an input file and return the objects without processing them:
      </p><p><code class="function">(FOMUS-FILE <strong class="userinput"><code>filename</code></strong> &amp;key <strong class="userinput"><code>value</code></strong> ...)</code></p><p>
      Four return values are returned: a list of <code class="classname"><a href="#class.part">PART</a></code> objects, a sorted list of 
      <code class="classname"><a href="#class.note">NOTE</a></code>, <code class="classname"><a href="#class.rest">REST</a></code> and
      <code class="classname"><a href="#class.mark">MARK</a></code> objects, a list of <code class="classname"><a href="#class.timesig">TIMESIG</a></code>
      objects (and <code class="classname"><a href="#class.keysig">KEYSIG</a></code> objects when implemented), 
      and a list of keyword/argument pairs representing the keywords and values found in the <code class="literal">INIT</code> lines.
      The following example show how you can edit and resave data using these files:
      </p><div class="example"><a id="id276002"></a><p class="title"><b>Example 3.10. FOMUS Usage 9</b></p><pre class="programlisting">

(multiple-value-bind (parts events globals args)
    (fomus-file "/directory/myfomusfile.fms")
  ;; user processing...
  (apply #'fomus "/directory/myfomusfile.fms"
	 :global globals :parts parts :events events
	 args))
	</pre></div><p>
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id276021"></a>Common Music Interface</h2></div></div></div><p>
      <span class="application">FOMUS</span> may be executed as a backend to <span class="application">Common Music</span> using
      <span class="application">CM</span>'s <code class="function">EVENTS</code> function.
      Appending a <code class="literal">".ly"</code> or <code class="literal">".xml"</code> extension to the filename routes the processing to
      <span class="application">FOMUS</span>.  Parts and time signatures may also defined in <span class="application">CM</span> 
      with the <code class="literal">NEW</code> macro and passed with all of <span class="application">FOMUS</span>'s settings to <code class="function">EVENTS</code>.
      A description of this interface is given
      <span class="application"><a href="http://commonmusic.sf.net/doc/dict/fomus-file-cls.html" target="_top">here</a></span> in
      <span class="application">Common Music</span>'s online documentation.  Several examples are given below:
    </p><div class="example"><a id="id276111"></a><p class="title"><b>Example 3.11. FOMUS Usage 10</b></p><pre class="programlisting">

(To be completed.)
	</pre></div><div class="example"><a id="id276125"></a><p class="title"><b>Example 3.12. FOMUS Usage 11</b></p><pre class="programlisting">

(To be completed.)
	</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="interface.cmd"></a>Command Line Interface</h2></div></div></div><p>
      If installed as a command-line executable program (see <a href="#install.cmd" title="Installing as an Executable">Installing as an Executable</a>), 
      <span class="application">FOMUS</span> can be invoked from a UNIX shell prompt to process a text file
      in the format described above in <a href="#interface.text" title="Text File Interface">Text File Interface</a>. This is intended for users who
      don't want to use or learn Lisp and can generate the data some other way.
    </p><div class="example"><a id="id276180"></a><p class="title"><b>Example 3.13. FOMUS Usage 12</b></p><pre class="programlisting">

fomus my_data_file
	</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id276194"></a>Other Interface Functions</h2></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.list.fomus.settings"></a>LIST-FOMUS-SETTINGS)</code></p><p>
        Lists all <span class="application">FOMUS</span> settings, their expected types and their default values. 
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.list.fomus.instruments"></a>LIST-FOMUS-INSTRUMENTS)</code></p><p>
        Lists all <span class="application">FOMUS</span> instruments, merging/replacing <span class="application">FOMUS</span>'s own default instruments
	with the user-specified contents of the <code class="varname"><a href="#setting.instruments">INSTRUMENTS</a></code> setting.
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.get.instr.syms"></a>GET-INSTR-SYMS)</code></p><p>
        Returns a list of available <span class="application">FOMUS</span> instrument ID symbols.
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.list.fomus.percussion"></a>LIST-FOMUS-PERCUSSION)</code></p><p>
        Lists all <span class="application">FOMUS</span> percussion instruments (the contents of the <code class="varname"><a href="#setting.percussion">PERCUSSION</a></code>
	setting).
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.get.perc.syms"></a>GET-PERC-SYMS)</code></p><p>
        Returns a list of available <span class="application">FOMUS</span> percussion ID symbols.
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.list.fomus.instrgroups"></a>LIST-FOMUS-INSTRGROUPS &amp;key :FORMAT <strong class="userinput"><code>format</code></strong>)</code></p><p>
        Lists <span class="application">FOMUS</span> instrument ordering/grouping data, merging/replacing <span class="application">FOMUS</span>'s own defaults
	with the contents of the <code class="varname"><a href="#setting.instr.groups">INSTR-GROUPS</a></code> setting.
	If the <code class="literal">FORMAT</code> argument is <code class="literal">T</code> (the default), <span class="application">FOMUS</span> formats the results
	by listing the instruments for each grouping in a vertical score-order arrangement surrounded by <code class="literal">[]</code>, <code class="literal">{}</code>
	and <code class="literal">||</code> brackets, denoting whether instruments are grouped by brackets, curly braces or barlines only.
	If <code class="literal">FORMAT</code> is <code class="literal">NIL</code>, <span class="application">FOMUS</span> outputs the data as nested lists of symbols
	(see the <code class="varname"><a href="#setting.instr.groups">INSTR-GROUPS</a></code> setting for details).
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.list.fomus.clefs"></a>LIST-FOMUS-CLEFS)</code></p><p>
        Prints a list of <span class="application">FOMUS</span> clef symbols.
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.list.fomus.meas.divs"></a>LIST-FOMUS-MEAS-DIVS)</code></p><p>
        Lists all default measure divisions , merging/replacing <span class="application">FOMUS</span>'s own defaults
	with the contents of the <code class="varname"><a href="#setting.default.meas.divs">DEFAULT-MEAS-DIVS</a></code> setting.
	(See <code class="varname"><a href="#setting.default.meas.divs">DEFAULT-MEAS-DIVS</a></code> for more information.)
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.list.fomus.tuplet.divs"></a>LIST-FOMUS-TUPLET-DIVS)</code></p><p>
        Lists all default tuplet divisions , merging/replacing <span class="application">FOMUS</span>'s own defaults
	with the contents of the <code class="varname"><a href="#setting.default.tuplet.divs">DEFAULT-TUPLET-DIVS</a></code> setting.
	(See <code class="varname"><a href="#setting.default.tuplet.divs">DEFAULT-TUPLET-DIVS</a></code> for more information.)
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.load.init.file"></a>LOAD-INIT-FILE)</code></p><p>
        Reloads the <code class="filename">.fomus</code> initialization file in the user's home directory.
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.get.midi.instr"></a>GET-MIDI-INSTR <strong class="userinput"><code>program-change</code></strong> &amp;key 
        :DEFAULT <strong class="userinput"><code>default-instr</code></strong>)</code></p><p>
        Returns an instrument to match the given MIDI program change value.
	The first <code class="classname"><a href="#struct.instr">INSTR</a></code> structure 
	with this number in its <em class="structfield"><code><a href="#instr.midiprgch.im">MIDIPRGCH-IM</a></code></em>
	slot is returned.
	If no appropriate instrument is found, the value of either the <code class="varname"><a href="#setting.default.instr">DEFAULT-INSTR</a></code> 
	setting or (if set) the <code class="literal">DEFAULT</code> argument is returned.
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p><code class="function">(<a id="function.addmark"></a>ADDMARK <strong class="userinput"><code>event</code></strong> <strong class="userinput"><code>mark</code></strong>)</code></p><p><code class="function">(<a id="function.getmark"></a>GETMARK <strong class="userinput"><code>event</code></strong> <strong class="userinput"><code>markid</code></strong>)</code></p><p><code class="function">(<a id="function.getmarks"></a>GETMARKS <strong class="userinput"><code>event</code></strong> <strong class="userinput"><code>markid</code></strong>)</code></p><p><code class="function">(<a id="function.rmmark"></a>RMMARK <strong class="userinput"><code>event</code></strong> <strong class="userinput"><code>markid</code></strong>)</code></p><p><code class="function">(<a id="function.combmarks"></a>COMBMARKS <strong class="userinput"><code>event-list</code></strong>)</code></p><p><code class="function">(<a id="function.addprop"></a>ADDPROP <strong class="userinput"><code>object</code></strong> <strong class="userinput"><code>prop</code></strong>)</code></p><p><code class="function">(<a id="function.getprop"></a>GETPROP <strong class="userinput"><code>object</code></strong> <strong class="userinput"><code>propid</code></strong>)</code></p><p><code class="function">(<a id="function.getprops"></a>GETPROPS <strong class="userinput"><code>object</code></strong> <strong class="userinput"><code>propid</code></strong>)</code></p><p><code class="function">(<a id="function.rmprop"></a>RMPROP <strong class="userinput"><code>object</code></strong> <strong class="userinput"><code>propid</code></strong>)</code></p><p><code class="function">(<a id="function.combprops"></a>COMBPROPS <strong class="userinput"><code>object-list</code></strong>)</code></p><p>
        These are utility functions for adding, removing and combining marks and properties in <em class="structfield"><code><a href="#mark.marks">MARKS</a></code></em>
	and <em class="structfield"><code><a href="#timesig.props">PROPS</a></code></em> slots.
	<code class="function"><a href="#function.addmark">ADDMARK</a></code> and <code class="function"><a href="#function.addprop">ADDPROP</a></code>
	insert a mark or property (a symbol or list of symbols and arguments values) in the appropriate slot of the object.
	<code class="function"><a href="#function.getmark">GETMARK</a></code> and <code class="function"><a href="#function.getprop">GETPROP</a></code>
	find a mark or property given an identifier.
	The identifier is a symbol or list specifying the mark/property symbol and any number of the arguments following it.
	The function returns the first mark that matches the specified symbols/values up to the number of symbols/values given.
	(For example, <code class="literal">'(:STARTSLUR- 2)</code> will return the starting mark for a "level 2" slur.)
	<code class="function"><a href="#function.getmarks">GETMARKS</a></code> and <code class="function"><a href="#function.getprops">GETPROPS</a></code>
	return all matching marks/properties.
	<code class="function"><a href="#function.rmmark">RMMARK</a></code> and <code class="function"><a href="#function.rmprop">RMPROP</a></code>
	remove (as a side-effect) all matching marks/properties from the objects.
	<code class="function"><a href="#function.combmarks">COMBMARKS</a></code> and <code class="function"><a href="#function.combprops">COMBPROPS</a></code>
	returns a new mark/property list that is a combination of all marks/properties objects in the supplied list (with duplicates removed).
      </p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="objects"></a>Chapter 4. Objects</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id278857"></a></span></dt><dt><span class="section"><a href="#id279207">Class PART</a></span></dt><dt><span class="section"><a href="#id279785">Class TIMESIG</a></span></dt><dt><span class="section"><a href="#id280711">Class TIMESIG-REPL</a></span></dt><dt><span class="section"><a href="#id280947">Class KEYSIG</a></span></dt><dt><span class="section"><a href="#id280961">Class NOTE</a></span></dt><dt><span class="section"><a href="#id281978">Class REST</a></span></dt><dt><span class="section"><a href="#id282448">Class MARK</a></span></dt><dt><span class="section"><a href="#id283255">Structure INSTR</a></span></dt><dt><span class="section"><a href="#id284198">Structure PERC</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p>
      This chapter describes several important classes and structures that provide the main way of specifying all of the
      part, instrument, and notational information that is passed to <span class="application">FOMUS</span> for processing.
      Each section gives a description of a class or structure, its constructor, and a list of its accessor functions.
      How these are actually used depends on the interface that the user chooses to use (See
      <a href="#usage" title="Chapter&#xA0;3.&#xA0;Usage">Usage</a> for more information).
    </p><p>
      All constructor functions have a corresponding copy function that take exactly the same
      keyword arguments plus one extra argument (the object to be copied).
      Any keyword/argument pairs supplied when a copy function is called indicate new replacement values.
      Objects may therefore be used as templates for creating new objects that differ only in one or two
      slot values.
    </p><p>    
      The actual class hierarchy isn't given here since it shouldn't be of any concern for most users.
      It is reflected somewhat in the prefixes that appear in the accessor function names.
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id279207"></a>Class PART</h2></div></div></div><p>
      A <code class="classname"><a href="#class.part">PART</a></code> object represents a written part in the score.
      They are analogous to tracks in a MIDI sequencer or staves in any notation program,
      though a part may actually represent more than one staff for instruments that require it.
      <code class="classname"><a href="#class.part">PART</a></code> objects are containers for <code class="classname"><a href="#class.note">NOTE</a></code>,
      <code class="classname"><a href="#class.rest">REST</a></code> and <code class="classname"><a href="#class.mark">MARK</a></code> objects
      (and optionally <code class="classname"><a href="#class.timesig">TIMESIG</a></code> and
      <code class="classname"><a href="#class.keysig">KEYSIG</a></code> object if they only apply to that particular part).
      Each <code class="classname"><a href="#class.part">PART</a></code> object also specifies an <code class="classname"><a href="#struct.instr">INSTR</a></code>
      object which contains specific information on how
      to notate a particular instrument.
    </p><p>
      <code class="classname"><a href="#class.part">PART</a></code> objects are passed to <span class="application">FOMUS</span> by including them in the
      <code class="varname"><a href="#setting.parts">PARTS</a></code> list.
    </p><p>Constructor: 
      <code class="function">(MAKE-PART &amp;key
        :ID <strong class="userinput"><code>id</code></strong>
	:PARTID <strong class="userinput"><code>partid</code></strong>
        :NAME <strong class="userinput"><code>name</code></strong>
	:ABBREV <strong class="userinput"><code>abbrev</code></strong>
	:INSTR <strong class="userinput"><code>instr</code></strong>
	:EVENTS <strong class="userinput"><code>events</code></strong>
	:OPTS <strong class="userinput"><code>opts</code></strong>)</code>
    </p><p>Copy Function: 
      <code class="function">(COPY-PART <strong class="userinput"><code>part</code></strong> &amp;key
        :ID <strong class="userinput"><code>id</code></strong>
	:PARTID <strong class="userinput"><code>partid</code></strong>
        :NAME <strong class="userinput"><code>name</code></strong>
	:ABBREV <strong class="userinput"><code>abbrev</code></strong>
	:INSTR <strong class="userinput"><code>instr</code></strong>
	:EVENTS <strong class="userinput"><code>events</code></strong>
	:OPTS <strong class="userinput"><code>opts</code></strong>)</code>
    </p><p>Predicate Function: <code class="function">(PARTP <strong class="userinput"><code>obj</code></strong>)</code></p><p>Accessors:
      </p><div class="variablelist"><dl><dt><span class="term"><code class="function"><a id="part.id"></a>OBJ-ID</code></span></dt><dd><p>
	      This slot isn't used by FOMUS.
	      The user may use it to store an ID value or some miscellaneous data.
            </p></dd><dt><span class="term"><code class="function"><a id="part.partid"></a>PART-PARTID</code></span></dt><dd><p>
	      This is a symbol or number used as an index or reference to identify the part.
	      It doesn't need to be unique--parts that share the same ID symbol are treated as a group.
	      When they appear in <em class="structfield"><code><a href="#note.partid">PARTID</a></code></em> or
	      <em class="structfield"><code><a href="#timesig.partids">PARTIDS</a></code></em> slots in classes
	      other than the <code class="classname"><a href="#class.part">PART</a></code> class they are treated as references to a particular part or group
	      of parts.
	    </p></dd><dt><span class="term"><code class="function"><a id="part.name"></a>PART-NAME</code></span></dt><dd><p>
	      This is a string value representing the part name that is to appear on the score.
	    </p></dd><dt><span class="term"><code class="function"><a id="part.abbrev"></a>PART-ABBREV</code></span></dt><dd><p>
	      This is a string value representing the abbreviated part name that is to appear on the score.
	    </p></dd><dt><span class="term"><code class="function"><a id="part.instr"></a>PART-INSTR</code></span></dt><dd><p>
  	      This slot specifies an instrument for the part.
	      All part must be associated with an instrument--if no instrument is given a generic default instrument will be chosen.
              Instruments provide important data for many of <span class="application">FOMUS</span>'s algorithms and determine at least several
	      major aspects of score layout, including the number of staves a part has and whether or not pitches are to be
	      transposed.
	    </p><p>
	      Instruments may be specified in one of several ways.
	      If a symbol is provided, it is used to lookup an instrument in a user-defined list
	      or <span class="application">FOMUS</span>'s own predefined list of instruments (see the <code class="varname"><a href="#setting.instr.groups">INSTR-GROUPS</a></code>
	      setting in the <a href="#settings" title="Chapter&#xA0;5.&#xA0;Settings">Settings</a> chapter).
	      The slot may also contain an instance of an instrument object.
	      If a list is given, <span class="application">FOMUS</span> expects the first element to be a lookup symbol for an instrument
	      and the rest of the list to be keyword/argument pairs specifying slots that are to be modified in the original instrument
	      (as if included in a call to <code class="function"><a href="#function.copy.instr">COPY-INSTR</a></code>.
	    </p><div class="example"><a id="id279638"></a><p class="title"><b>Example 4.1. PART-INSTR Slot Setting</b></p><pre class="programlisting">

'(:piano :staves 3 :simultlim 6)
                </pre></div><p>
	      If an integer from <code class="literal">0</code> to <code class="literal">127</code> is provided instead of an identifying symbol, <span class="application">FOMUS</span>
	      interprets this as a MIDI program change number and will use the first instrument it finds that has this number in its 
	      <code class="classname"><a href="#instr.midiprgch.im">MIDIPRGCH-IM</a></code> slot.
	    </p></dd><dt><span class="term"><code class="function"><a id="part.events"></a>PART-EVENTS</code></span></dt><dd><p>
	      This is a list of <code class="classname"><a href="#class.note">NOTE</a></code>,
	      <code class="classname"><a href="#class.rest">REST</a></code> or
	      <code class="classname"><a href="#class.mark">MARK</a></code> objects.
	      <code class="classname"><a href="#class.timesig">TIMESIG</a></code> and
	      <code class="classname"><a href="#class.keysig">KEYSIG</a></code> objects may also be included in this list.
	    </p></dd><dt><span class="term"><code class="function"><a id="part.opts"></a>PART-OPTS</code></span></dt><dd><p>
	      This is a keyword/argument pair list specifying options to be passed directly to the backend algorithms.
	      Each backend has its own set of options, which may coexist in this list with any other backend options.
	      See the <a href="#backends" title="Chapter&#xA0;7.&#xA0;Backends">Backends</a> for more information.
	    </p></dd></dl></div><p>
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id279785"></a>Class TIMESIG</h2></div></div></div><p>
      A <code class="classname"><a href="#class.timesig">TIMESIG</a></code> object indicates a time signature change in the score.
      They may also be used to indicate special barlines and a few other changes.
      <span class="application">FOMUS</span> uses <code class="classname"><a href="#class.timesig">TIMESIG</a></code> objects to determine where to place measures and
      how to format the events that appear in them.
      If new time signatures appear in the middle of a measure, <span class="application">FOMUS</span> either splits the measure
      or expands it to a larger size depending on the values of <code class="varname"><a href="#setting.auto.override.timesigs">AUTO-OVERRIDE-TIMESIGS</a></code>
      and <code class="varname"><a href="#setting.min.auto.timesig.dur">MIN-AUTO-TIMESIG-DUR</a></code>.
    </p><p>
      Each time signature either specifies or implies a value that specifies what notational value is equivalent to 1 "beat" duration.
      <span class="application">FOMUS</span> uses this value to determine how all durational events are notated and where they appear in the score.
      Unless otherwise indicated, all offsets and durations are expressed in beat units.
      See the <em class="structfield"><code><a href="#timesig.beat">BEAT</a></code></em> slot for information on how to specify it.
    </p><p>
      Time signatures are passed to <span class="application">FOMUS</span> by including them either
      in the <code class="varname"><a href="#setting.global">GLOBAL</a></code> list or the <em class="structfield"><code><a href="#part.events">EVENTS</a></code></em>
      slot list of a <code class="classname"><a href="#class.part">PART</a></code> object.
      <code class="classname"><a href="#class.timesig">TIMESIG</a></code> objects listed inside a part apply only to that part
      (unless the <em class="structfield"><code><a href="#timesig.partids">PARTIDS</a></code></em> slot
      indicates otherwise).
      This method most likely won't be used.
      <code class="classname"><a href="#class.timesig">TIMESIG</a></code> objects in the <code class="varname"><a href="#setting.global">GLOBAL</a></code>
      list affect parts according to the contents of their <em class="structfield"><code><a href="#timesig.partids">PARTIDS</a></code></em> slot values.
      A symbol or list of symbols in the <em class="structfield"><code><a href="#timesig.partids">PARTIDS</a></code></em> slot applies the time signature to the parts
      that match those symbols.
      A default <em class="structfield"><code><a href="#timesig.partids">PARTIDS</a></code></em> slot value of <code class="literal">NIL</code> indicates that the time signature be
      applied to all parts that don't have any other time signature specified at that exact offset.
      This way you can specify that a certain <code class="classname"><a href="#class.timesig">TIMESIG</a></code> object be applied to only several
      <code class="classname"><a href="#class.part">PART</a></code> objects while another <code class="classname"><a href="#class.timesig">TIMESIG</a></code>
      object by applied to all of the remaining parts.
    </p><p>Constructor: 
      <code class="function">(MAKE-TIMESIG &amp;key
        :ID <strong class="userinput"><code>id</code></strong>
	:PARTIDS <strong class="userinput"><code>partids</code></strong>
        :OFF <strong class="userinput"><code>off</code></strong>
	:TIME <strong class="userinput"><code>time</code></strong>
	:COMP <strong class="userinput"><code>comp</code></strong>
	:BEAT <strong class="userinput"><code>beat</code></strong>
	:DIV <strong class="userinput"><code>div</code></strong>
	:REPL <strong class="userinput"><code>repl</code></strong>
	:PROPS <strong class="userinput"><code>props</code></strong>)</code>
    </p><p>Copy Function: 
      <code class="function">(COPY-TIMESIG <strong class="userinput"><code>timesig</code></strong> &amp;key
        :ID <strong class="userinput"><code>id</code></strong>
	:PARTIDS <strong class="userinput"><code>partids</code></strong>
        :OFF <strong class="userinput"><code>off</code></strong>
	:TIME <strong class="userinput"><code>time</code></strong>
	:COMP <strong class="userinput"><code>comp</code></strong>
	:BEAT <strong class="userinput"><code>beat</code></strong>
	:DIV <strong class="userinput"><code>div</code></strong>
	:REPL <strong class="userinput"><code>repl</code></strong>
	:PROPS <strong class="userinput"><code>props</code></strong>)</code>
    </p><p>Predicate Function: <code class="function">(TIMESIGP <strong class="userinput"><code>obj</code></strong>)</code></p><p>Accessors:
      </p><div class="variablelist"><dl><dt><span class="term"><code class="function"><a id="timesig.id"></a>OBJ-ID</code></span></dt><dd><p>
	      This slot isn't used by FOMUS. 
            </p></dd><dt><span class="term"><code class="function"><a id="timesig.partids"></a>TIMESIG-PARTIDS</code></span></dt><dd><p>
	      This is a reference to a particular part or group of parts.
	      If the value of this slot is <code class="literal">NIL</code>, the time signature is applied to
	      all parts that don't have some another <code class="classname"><a href="#class.timesig">TIMESIG</a></code> object
	      defined for them if this <code class="classname"><a href="#class.timesig">TIMESIG</a></code> object is included in the
	      <code class="varname"><a href="#setting.global">GLOBAL</a></code> list.
	      If the <code class="classname"><a href="#class.timesig">TIMESIG</a></code> object is in a
	      <code class="classname"><a href="#class.part">PART</a></code> object's <em class="structfield"><code><a href="#part.events">EVENTS</a></code></em> slot,
	      the time signature is applied to the part.
   	      If the value is a symbol, number, or list of symbols or numbers, these values are used to lookup which part or parts the event belongs to.
	    </p></dd><dt><span class="term"><code class="function"><a id="timesig.off"></a>TIMESIG-OFF</code></span></dt><dd><p>
	      This is a number (real, ratio or integer) specifying the absolute position for the onset for this note.
	      The offset is measured in "beats," which may indicate different notational positions depending on 
	      previous time signatures and what values are present in their <em class="structfield"><code><a href="#timesig.beat">BEAT</a></code></em> slots.
	      The number must be precise and "notatable" (floating point numbers are not recommended and values like 10/3 that don't
	      occur on regular beat divisions are currently impossible for <span class="application">FOMUS</span> to notate).
	    </p></dd><dt><span class="term"><code class="function"><a id="timesig.time"></a>TIMESIG-TIME</code></span></dt><dd><p>
	      This is a required list of two integers, specifying the numerator and denominator of the printed time signature.
	    </p></dd><dt><span class="term"><code class="function"><a id="timesig.comp"></a>TIMESIG-COMP</code></span></dt><dd><p>
	      If this slot is set to <code class="literal">T</code>, indicates that the measure is a compound meter.
	      The denominator of the time signature then determines the beat value.
	    </p></dd><dt><span class="term"><code class="function"><a id="timesig.beat"></a>TIMESIG-BEAT</code></span></dt><dd><p>
	      The <em class="structfield"><code><a href="#timesig.beat">BEAT</a></code></em> slot value determines how events are mapped from beat units to notational durations.
	      It is a ratio that specifies what notational duration is equivalent to 1 beat.
	      This duration is expressed as a fraction of a whole note (1/4, for example, specifies a quarter note, 1/2 specifies
	      a half note, and 3/8 specifies three eight notes).
	      If the time signature is a compound time signature, the value of this slot is ignored and the
	      beat value is calculated from the denominator (for example, the beat value of a 12/8 signature is 3/8).
	      If the slot contains the default value of <code class="literal">NIL</code>, the beat value is either the
	      value of <code class="varname"><a href="#setting.default.beat">DEFAULT-BEAT</a></code> or it is calculated from the
	      denominator (a non-compound 4/8 or 7/8 time signature would have a beat value of 1/8).
	      Different beat values have an effect on how measures are divided and laid out, so they should be
	      chosen to influence these things.
	    </p></dd><dt><span class="term"><code class="function"><a id="timesig.div"></a>TIMESIG-DIV</code></span></dt><dd><p>
	      This is a single list or list of lists containing ratios or integers that add up to the total number of beats
	      in a measure (as specified by either the <em class="structfield"><code><a href="#timesig.time">TIME</a></code></em> or
	      <em class="structfield"><code><a href="#timesig.beat">BEAT</a></code></em> slots).
	      It represents all of the choices available for dividing up measures following this time signature.
	      If the slot contains the default value of <code class="literal">NIL</code>, <span class="application">FOMUS</span> looks up
	      divisions first in a user-supplied table if one exists (see the <code class="varname"><a href="#setting.default.meas.divs">DEFAULT-MEAS-DIVS</a></code>
	      setting) then in <span class="application">FOMUS</span>'s default table.
	      A value usually only needs to be specified here if the user wants to force <span class="application">FOMUS</span>
	      to divide measures in a specific way rather than choosing between several choices.
	      The following example shows what might be specified for a 7/8 meter:
       	    </p><div class="example"><a id="id280457"></a><p class="title"><b>Example 4.2. TIMESIG-DIV Slot Setting</b></p><pre class="programlisting">

'((4 3) (3 4))
                </pre></div><p>
	      As another example, setting the <em class="structfield"><code><a href="#timesig.div">TIMESIG-DIV</a></code></em> slot to <code class="literal">'(1 1 1)</code> in a 3/4
	      time signature forces <span class="application">FOMUS</span> to beam measures in groups of 3 (the default is equivalent to
	      a <em class="structfield"><code><a href="#timesig.div">TIMESIG-DIV</a></code></em> setting of <code class="literal">'((2 1) (1 2))</code>)/
	    </p></dd><dt><span class="term"><code class="function"><a id="timesig.repl"></a>TIMESIG-REPL</code></span></dt><dd><p>
	      This is a list of <code class="classname"><a href="#class.timesig">TIMESIG</a></code> or
	      <code class="classname"><a href="#class.timesig.repl">TIMESIG-REPL</a></code> objects
	      that are chosen to replace this <code class="classname"><a href="#class.timesig">TIMESIG</a></code> object when <span class="application">FOMUS</span>
	      needs to change the length of a measure.
	      This gives the user some control over how <span class="application">FOMUS</span> fudges measures to make them fit.
	      When <span class="application">FOMUS</span> changes the length of a measure, it will look here first and then in
	      the (not implemented yet) setting for a replacement that fits (has the correct number of beats).
	      If none is found, <span class="application">FOMUS</span> will create a new <code class="classname"><a href="#class.timesig">TIMESIG</a></code> object
	      from the current one, modifying the <em class="structfield"><code><a href="#timesig.div">DIV</a></code></em> slot by adding on extra beats if necessary.
	    </p><p>
	      <code class="classname"><a href="#class.timesig.repl">TIMESIG-REPL</a></code> objects are simply
	      <code class="classname"><a href="#class.timesig">TIMESIG</a></code> objects with missing
	      <em class="structfield"><code><a href="#timesig.off">OFF</a></code></em>,
	      <em class="structfield"><code><a href="#timesig.partids">PARTIDS</a></code></em> and
	      <em class="structfield"><code><a href="#timesig.repl">REPL</a></code></em> slots, all
	      of them unnecessary in this context.
	      The use of these is optional.
	      If <code class="classname"><a href="#class.timesig">TIMESIG</a></code> objects are given, these slots are just ignored.
	    </p></dd><dt><span class="term"><code class="function"><a id="timesig.props"></a>TIMESIG-PROPS</code></span></dt><dd><p>
	      This slot behaves like the <em class="structfield"><code><a href="#note.marks">MARKS</a></code></em> slot in
	      <code class="classname"><a href="#class.note">NOTE</a></code> or
	      <code class="classname"><a href="#class.rest">REST</a></code> objects.
	      Extra time signature or measure properties may be specified here.
	      See FIXME for more details and the <code class="classname"><a href="#class.mark">MARK</a></code> class for an example of how to specify properties.
	    </p></dd></dl></div><p>
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id280711"></a>Class TIMESIG-REPL</h2></div></div></div><p>
      A <code class="classname"><a href="#class.timesig.repl">TIMESIG-REPL</a></code> object is a "replacement"
      <code class="classname"><a href="#class.timesig">TIMESIG</a></code> object.
      They are used in the <em class="structfield"><code><a href="#timesig.repl">REPL</a></code></em> slot of
      <code class="classname"><a href="#class.timesig">TIMESIG</a></code> objects and in
      the FIXME setting, and are simply <code class="classname"><a href="#class.timesig">TIMESIG</a></code> objects with missing
      <em class="structfield"><code><a href="#timesig.off">OFF</a></code></em>,
      <em class="structfield"><code><a href="#timesig.partids">PARTIDS</a></code></em> and
      <em class="structfield"><code><a href="#timesig.repl">REPL</a></code></em> slots.
      The use of these is optional.
      They are included for the sake of conciseness and to (hopefully) eliminate confusion.
    </p><p>
      Since this class is nearly equivalent to the <code class="classname"><a href="#class.timesig">TIMESIG</a></code> class, no slot descriptions are given here.
      See the <code class="classname"><a href="#class.timesig">TIMESIG</a></code> class for an explanation of all the slots.
      The predicate function <code class="function">TIMESIGP</code> returns <code class="literal">T</code> for both
      <code class="classname"><a href="#class.timesig">TIMESIG</a></code> and <code class="classname"><a href="#class.timesig.repl">TIMESIG-REPL</a></code> classes.
    </p><p>Constructor: 
      <code class="function">(MAKE-TIMESIG-REPL &amp;key
        :ID <strong class="userinput"><code>id</code></strong>
	:TIME <strong class="userinput"><code>time</code></strong>
	:COMP <strong class="userinput"><code>comp</code></strong>
	:BEAT <strong class="userinput"><code>beat</code></strong>
	:DIV <strong class="userinput"><code>div</code></strong>
	:PROPS <strong class="userinput"><code>props</code></strong>)</code>
    </p><p>Copy Function: 
      <code class="function">(COPY-TIMESIG-REPL <strong class="userinput"><code>timesig-repl</code></strong> &amp;key
        :ID <strong class="userinput"><code>id</code></strong>
	:TIME <strong class="userinput"><code>time</code></strong>
	:COMP <strong class="userinput"><code>comp</code></strong>
	:BEAT <strong class="userinput"><code>beat</code></strong>
	:DIV <strong class="userinput"><code>div</code></strong>
	:PROPS <strong class="userinput"><code>props</code></strong>)</code>
    </p><p>Predicate Function: <code class="function">(TIMESIGP <strong class="userinput"><code>obj</code></strong>)</code></p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id280947"></a>Class KEYSIG</h2></div></div></div><p>
      (This class is not implemented yet.)
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id280961"></a>Class NOTE</h2></div></div></div><p>
      The <code class="classname"><a href="#class.note">NOTE</a></code> object will usually be the only object required to describe
      musical events that occur in the score.
      It allows the user to specify pitch, offset and duration as well as which voice the event belongs to.
      A special slot, <em class="structfield"><code><a href="#note.marks">MARKS</a></code></em>, allows for a wide variety of other information including
      articulations, clef and staff change overrides, "spanners" like slurs or dashed lines with text, etc..
      <code class="classname"><a href="#class.note">NOTE</a></code>, <code class="classname"><a href="#class.rest">REST</a></code>
      and <code class="classname"><a href="#class.mark">MARK</a></code> objects are all
      considered "events," and so all of their important accessors begin with an <code class="function">EVENT-</code> prefix.
    </p><p>
      <code class="classname"><a href="#class.note">NOTE</a></code> objects are passed to <span class="application">FOMUS</span> by including them either
      in the <em class="structfield"><code><a href="#part.events">EVENTS</a></code></em> slot list of a <code class="classname"><a href="#class.part">PART</a></code> object or in
      the global <code class="varname"><a href="#setting.events">EVENTS</a></code> list.
      <code class="classname"><a href="#class.note">NOTE</a></code> objects listed inside a part apply only to that part (unless the
      <em class="structfield"><code><a href="#note.partid">PARTID</a></code></em> slot indicates otherwise).
      <code class="classname"><a href="#class.note">NOTE</a></code> objects in the <code class="varname"><a href="#setting.events">EVENTS</a></code>
      list are distributed to parts according to the contents their
      <em class="structfield"><code><a href="#note.partid">PARTID</a></code></em> slot values.
    </p><p>Constructor: 
      <code class="function">(MAKE-NOTE &amp;key 
        :ID <strong class="userinput"><code>id</code></strong>
	:PARTID <strong class="userinput"><code>partid</code></strong>
        :VOICE <strong class="userinput"><code>voice</code></strong>
	:OFF <strong class="userinput"><code>off</code></strong>
	:DUR <strong class="userinput"><code>dur</code></strong>
	:NOTE <strong class="userinput"><code>note</code></strong>
	:MARKS <strong class="userinput"><code>marks</code></strong>)</code>
    </p><p>Copy Function: 
      <code class="function">(COPY-NOTE <strong class="userinput"><code>note</code></strong> &amp;key
        :ID <strong class="userinput"><code>id</code></strong>
	:PARTID <strong class="userinput"><code>partid</code></strong>
        :VOICE <strong class="userinput"><code>voice</code></strong>
	:OFF <strong class="userinput"><code>off</code></strong>
	:DUR <strong class="userinput"><code>dur</code></strong>
	:NOTE <strong class="userinput"><code>note</code></strong>
	:MARKS <strong class="userinput"><code>marks</code></strong>)</code>
    </p><p>Predicate Function: <code class="function">(NOTEP <strong class="userinput"><code>obj</code></strong>)</code></p><p>Accessors:
      </p><div class="variablelist"><dl><dt><span class="term"><code class="function"><a id="note.id"></a>OBJ-ID</code></span></dt><dd><p>
	      This slot isn't used by FOMUS.
	    </p></dd><dt><span class="term"><code class="function"><a id="note.partid"></a>EVENT-PARTID</code></span></dt><dd><p>
	      This is a reference to a particular part or group of parts.
	      If the value of this slot is <code class="literal">NIL</code>, the event is included in whatever part contains it in its
	      <em class="structfield"><code><a href="#part.events">EVENTS</a></code></em> slot list, or to all parts if it is included in the global
	      <code class="varname"><a href="#setting.events">EVENTS</a></code> list.
   	      If the value is a symbol, number, or list of symbols or numbers, these values are used to lookup which part or parts the event belongs to.
	      Events belonging to multiple parts are effectively copied into these parts.
	    </p></dd><dt><span class="term"><code class="function"><a id="note.voice"></a>EVENT-VOICE</code></span></dt><dd><p>
	      This is an integer or a list of integers specifying a voice or selection of voices that this note
	      should belong to.
	      Voice numbers are limited to the integers 1 through 4.
	      The default value <code class="literal">NIL</code> specifies voice 1.
	      If a list of choices is given, <span class="application">FOMUS</span>'s voice distribution algorithm will try to make
	      an intelligent decision based on voice leading, pitch, balance and other factors.
	      Note that <code class="classname"><a href="#class.rest">REST</a></code> and <code class="classname"><a href="#class.mark">MARK</a></code>
	      objects are treated slightly differently.
	      Settings with the <code class="varname">VOICE-</code> prefix can be adjusted to influence <span class="application">FOMUS</span>'s
	      voicing decisions.
	      See <a href="#settings" title="Chapter&#xA0;5.&#xA0;Settings">Settings</a> for more information.
	    </p></dd><dt><span class="term"><code class="function"><a id="note.off"></a>EVENT-OFF</code></span></dt><dd><p>
	      This is a number (real, ratio or integer) specifying the absolute position for the onset for this note.
	      The offset is measured in "beats," which may indicate different notational values depending on what the
	      current time signature is and what value is present in its <em class="structfield"><code><a href="#timesig.beat">BEAT</a></code></em> slot.
	      <span class="application">FOMUS</span>'s quantizing algorithm tries to fit all offsets and durations into values
	      that make the best use of tuplets within given constraints while minimizing the amount of error.
	      If this quantizing algorithm is switched off, then the user must insure that all offset and duration values
	      are precise and "notatable" (floating point numbers are not recommended in this case).
	    </p></dd><dt><span class="term"><code class="function"><a id="note.dur"></a>EVENT-DUR</code></span></dt><dd><p>
	      This is set to either a number to specify a regular duration or a list to specify a grace note.
  	      If it's a number (real, ratio or integer) it indicates the note's duration in beats (see <code class="function">EVENT-OFF</code> above).
	      The comments in <code class="function">EVENT-OFF</code> on quantization also apply here.
	      If <span class="application">Common Music</span> is present and <code class="varname"><a href="#setting.use.cm">USE-CM</a></code> is set to <code class="literal">T</code>,
	      the value of this slot may also be a symbol, which is parsed by <span class="application">CM</span> using its <code class="function">RHYTHM</code>
	      function.
	      Symbols in this case designate notational values and not beats, although
	      numbers are still interpreted with respect to beats and not filtered through <span class="application">CM</span>'s
	      <code class="function">RHYTHM</code> function.
	    </p><p>
	      If a grace note is desired then a list of two elements must be specified, the first element being the duration value described above
	      and the second element being an integer value describing the "position" that the grace note occupies.
	      Grace notes with the same offset are organized with respect to this position number.
	      Lower position grace notes occur earlier in the score than higher position notes.
	      Also, grace notes with the same position form chords, and notes with negative positions are notated with a slash.
	      The duration value at the front of the list is still interpreted in terms of beats and notated as such even though
	      the note does not take up time in the measure.
	      Specifying a duration of <code class="literal">'(1/4 -1)</code>, for example, specifies a grace sixteenth note with a slash
	      if the current beat is 1/4 (a quarter note).
	    </p></dd><dt><span class="term"><code class="function"><a id="note.note"></a>EVENT-NOTE</code></span></dt><dd><p>
	      This slot either designates a pitch (with an optional choice of spellings) or a percussion instrument if the part is a
	      percussion part.
	      If specifying a pitch, the value may be either a symbol or a number (real, ratio or integer).
	      If a number is used, 60 represents middle C, as in a MIDI file.
	      Numbers are rounded depending on the whether semitones or quartertones are specified (see the
	      <code class="varname"><a href="#setting.quartertones">QUARTERTONES</a></code> setting).
	      Symbols are assembled by concatenating a note letter name (<code class="literal">A</code> through <code class="literal">G</code>),
	      a <code class="literal">+</code> or <code class="literal">S</code> for sharp or a <code class="literal">-</code> or <code class="literal">F</code> for flat, and an
	      integer designating the register (<code class="literal">4</code> is the octave above middle C).
	      A few examples are given here:
       	    </p><div class="example"><a id="id279157"></a><p class="title"><b>Example 4.3. EVENT-NOTE Slot Setting 1</b></p><pre class="programlisting">

'c+4
                </pre></div><p>	      
       	    </p><div class="example"><a id="id279170"></a><p class="title"><b>Example 4.4. EVENT-NOTE Slot Setting 2</b></p><pre class="programlisting">

'ef5
                </pre></div><p>	      
	      Quartertones must be specified using numbers.
	      If <span class="application">Common Music</span> is present and <code class="varname"><a href="#setting.use.cm">USE-CM</a></code> is set to <code class="literal">T</code>,
	      symbols are filtered through <span class="application">CM</span>'s <code class="function">KEYNUM</code> function.
	      In this case, the value of <code class="varname"><a href="#setting.cm.scale">CM-SCALE</a></code> will also be passed to the function if it is set to anything other
	      than <code class="literal">NIL</code>.
	    </p><p>
	      If a list of spelling choices is supplied, <span class="application">FOMUS</span> will try to use the note spellings in this list.
	      To specify one, the value of the <em class="structfield"><code><a href="#note.note">NOTE</a></code></em>
	      slot must be a list, the first element of which is the note number
	      or symbol described above and the rest of which is the list of spelling choices.
	      A spelling choice is represented either by a number or symbol.
	      <code class="literal">1</code>, <code class="literal">+</code> or <code class="literal">S</code> designates using a sharp while
	      <code class="literal">-1</code>, <code class="literal">-</code> or <code class="literal">F</code> designates a flat.
	      <code class="literal">0</code>, <code class="literal">N</code> designates a natural while repeating one of the above symbols (for example,
	      <code class="literal">++</code> or <code class="literal">SS</code>) designates a double sharp or flat.
	      <code class="literal">2</code> or <code class="literal">-2</code> also designates a double sharp or flat.
	      Quartertones spellings are specified using a list of two elements, the first element specifying the semitone
	      alteration and the second element specifying the quartertone alteration (one of the numbers
	      <code class="literal">-1/2</code>, <code class="literal">0</code> or <code class="literal">1/2</code>).
	      A few examples are given here:
       	    </p><div class="example"><a id="id281831"></a><p class="title"><b>Example 4.5. EVENT-NOTE Slot Setting 3</b></p><pre class="programlisting">

'(f4 + --)
                </pre></div><p>	      
       	    </p><div class="example"><a id="id281845"></a><p class="title"><b>Example 4.6. EVENT-NOTE Slot Setting 4</b></p><pre class="programlisting">

'(61.5 (n -1/2))
                </pre></div><p>	      
	      If <span class="application">FOMUS</span>'s note spelling algorithm is switched off then all note spellings must be supplied by the user
	      (so each <em class="structfield"><code><a href="#note.note">NOTE</a></code></em> slot must contain a list of two elements
	      specifying the pitch and its spelling, unless it is spelled with a natural).
	    </p></dd><dt><span class="term"><code class="function"><a id="note.marks"></a>EVENT-MARKS</code></span></dt><dd><p>
	      This slot is nearly equivalent to the <em class="structfield"><code><a href="#mark.marks">MARKS</a></code></em>
	      slot in the <code class="classname"><a href="#class.mark">MARK</a></code>
	      class described below.
	      The contents of the <em class="structfield"><code><a href="#mark.marks">MARKS</a></code></em> slots of
	      <code class="classname"><a href="#class.mark">MARK</a></code> objects are actually dumped
	      into the <em class="structfield"><code><a href="#note.marks">MARKS</a></code></em> slots of <code class="classname"><a href="#class.note">NOTE</a></code> and
	      <code class="classname"><a href="#class.rest">REST</a></code> objects
	      once voices and staves have been decided.
	      See the <code class="classname"><a href="#class.mark">MARK</a></code> class for more information and
	      <a href="#marks" title="Chapter&#xA0;6.&#xA0;Marks">Marks</a> for a more detailed explanation of marks and their usage.
	    </p></dd></dl></div><p>
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id281978"></a>Class REST</h2></div></div></div><p>
      The <code class="classname"><a href="#class.rest">REST</a></code> objects should rarely be used.
      <span class="application">FOMUS</span> handles rests automatically and only needs user-defined rests in special
      cases (such as when a fermata needs to appear in all parts).
      <code class="classname"><a href="#class.rest">REST</a></code> objects require nearly the same information as
      <code class="classname"><a href="#class.note">NOTE</a></code> objects,
      except that there is no <em class="structfield"><code><a href="#note.note">NOTE</a></code></em> slot, the marks that can be assigned to it are limited,
      and voice information is treated differently
    </p><p>
      <code class="classname"><a href="#class.rest">REST</a></code> objects are passed to <span class="application">FOMUS</span> by including them either
      in the <em class="structfield"><code><a href="#part.events">EVENTS</a></code></em> slot list of a <code class="classname"><a href="#class.part">PART</a></code> object or in
      the global <code class="varname"><a href="#setting.events">EVENTS</a></code> list.
      The behavior in either case is exactly the same as with a <code class="classname"><a href="#class.note">NOTE</a></code> object.
    </p><p>Constructor: 
      <code class="function">(MAKE-REST &amp;key 
        :ID <strong class="userinput"><code>id</code></strong>
	:PARTID <strong class="userinput"><code>partid</code></strong>
        :VOICE <strong class="userinput"><code>voice</code></strong>
	:OFF <strong class="userinput"><code>off</code></strong>
	:DUR <strong class="userinput"><code>dur</code></strong>
	:MARKS <strong class="userinput"><code>marks</code></strong>)</code>
    </p><p>Copy Function: 
      <code class="function">(COPY-REST <strong class="userinput"><code>rest</code></strong> &amp;key
        :ID <strong class="userinput"><code>id</code></strong>
	:PARTID <strong class="userinput"><code>partid</code></strong>
        :VOICE <strong class="userinput"><code>voice</code></strong>
	:OFF <strong class="userinput"><code>off</code></strong>
	:DUR <strong class="userinput"><code>dur</code></strong>
	:MARKS <strong class="userinput"><code>marks</code></strong>)</code>
    </p><p>Predicate Function: <code class="function">(RESTP <strong class="userinput"><code>obj</code></strong>)</code></p><p>Accessors:
      </p><div class="variablelist"><dl><dt><span class="term"><code class="function"><a id="rest.id"></a>OBJ-ID</code></span></dt><dd><p>
	      This slot isn't used by FOMUS.
	    </p></dd><dt><span class="term"><code class="function"><a id="rest.partid"></a>EVENT-PARTID</code></span></dt><dd><p>
	      This slot is equivalent to the <em class="structfield"><code><a href="#note.partid">PARTID</a></code></em>
	      slot in the <code class="classname"><a href="#class.note">NOTE</a></code> class.
	    </p></dd><dt><span class="term"><code class="function"><a id="rest.voice"></a>EVENT-VOICE</code></span></dt><dd><p>
    	      This slot is analogous to but different than the <em class="structfield"><code><a href="#note.voice">VOICE</a></code></em> slot in the
	      <code class="classname"><a href="#class.note">NOTE</a></code> class.
	      The difference is that when set to a list of voices, the <code class="classname"><a href="#class.rest">REST</a></code> object is distributed to all
	      the specified voices instead of one that is chosen by <span class="application">FOMUS</span>.
	    </p></dd><dt><span class="term"><code class="function"><a id="rest.off"></a>EVENT-OFF</code></span></dt><dd><p>
    	      This slot is equivalent to the <em class="structfield"><code><a href="#note.off">OFF</a></code></em>
	      slot in the <code class="classname"><a href="#class.note">NOTE</a></code> class.
	    </p></dd><dt><span class="term"><code class="function"><a id="rest.dur"></a>EVENT-DUR</code></span></dt><dd><p>
    	      This slot is equivalent to the <em class="structfield"><code><a href="#note.dur">DUR</a></code></em>
	      slot in the <code class="classname"><a href="#class.note">NOTE</a></code> class with the
	      exception that rests cannot be grace notes.
	    </p></dd><dt><span class="term"><code class="function"><a id="rest.marks"></a>EVENT-MARKS</code></span></dt><dd><p>
    	      This slot is equivalent to the <em class="structfield"><code><a href="#note.marks">MARKS</a></code></em>
	      slot in the <code class="classname"><a href="#class.note">NOTE</a></code> class.
	      However, the number of marks that can be used in the <code class="classname"><a href="#class.rest">REST</a></code> class is limited. 
	      See the <code class="classname"><a href="#class.mark">MARK</a></code> class for more information and
	      <a href="#marks" title="Chapter&#xA0;6.&#xA0;Marks">Marks</a> for a more detailed explanation of marks and their usage.
	    </p></dd></dl></div><p>
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id282448"></a>Class MARK</h2></div></div></div><p>
      The <code class="classname"><a href="#class.mark">MARK</a></code> objects allow the user to specify marks outside of a
      <code class="classname"><a href="#class.note">NOTE</a></code>
      or <code class="classname"><a href="#class.rest">REST</a></code> class.
      Marks designate extra information that to be applied to a <code class="classname"><a href="#class.note">NOTE</a></code> or
      <code class="classname"><a href="#class.rest">REST</a></code> object
      such as articulations, modifications like tremolos or harmonics, printed text, etc..
      After voices and staff assignments have been established, information in the <code class="classname"><a href="#class.mark">MARK</a></code> objects is dumped into the
      <em class="structfield"><code><a href="#note.marks">MARKS</a></code></em> slots of <code class="classname"><a href="#class.note">NOTE</a></code> and
      <code class="classname"><a href="#class.rest">REST</a></code> objects
      according to the values in the <em class="structfield"><code><a href="#mark.off">OFF</a></code></em> and
      <em class="structfield"><code><a href="#mark.partid">PARTID</a></code></em> slots.
    </p><p>
      There are several advantages to using <code class="classname"><a href="#class.mark">MARK</a></code> objects as opposed to specifying marks
      in <code class="classname"><a href="#class.note">NOTE</a></code> or <code class="classname"><a href="#class.rest">REST</a></code> objects.
      One is that many markings (dynamics, for example) might only need to be attached to notes that are in one voice, such as the bottom voice of
      a particular staff.
      Since voice assignments for notes might not be known until <span class="application">FOMUS</span> decides them,
      <code class="classname"><a href="#class.mark">MARK</a></code> objects are the only way of insuring that the marks occur in the right place.
      <code class="classname"><a href="#class.mark">MARK</a></code> objects are also a convenient way of specifying marks for a range of parts,
      and make it easier to apply spanners such as slurs without having to juggle <code class="classname"><a href="#class.note">NOTE</a></code>
      objects around.
    </p><p>
      <code class="classname"><a href="#class.mark">MARK</a></code> objects are passed to <span class="application">FOMUS</span> by including them either
      in the <em class="structfield"><code><a href="#part.events">EVENTS</a></code></em> slot list of a <code class="classname"><a href="#class.part">PART</a></code> object or in
      the global <code class="varname"><a href="#setting.events">EVENTS</a></code> list.
      The behavior in either case is exactly the same as with <code class="classname"><a href="#class.note">NOTE</a></code> or
      <code class="classname"><a href="#class.rest">REST</a></code> objects.
    </p><p>Constructor: 
      <code class="function">(MAKE-MARK &amp;key 
        :ID <strong class="userinput"><code>id</code></strong>
	:PARTID <strong class="userinput"><code>partid</code></strong>
        :VOICE <strong class="userinput"><code>voice</code></strong>
	:OFF <strong class="userinput"><code>off</code></strong>
	:MARKS <strong class="userinput"><code>marks</code></strong>)</code>
    </p><p>Copy Function: 
      <code class="function">(COPY-MARK <strong class="userinput"><code>mark</code></strong> &amp;key
        :ID <strong class="userinput"><code>id</code></strong>
	:PARTID <strong class="userinput"><code>partid</code></strong>
        :VOICE <strong class="userinput"><code>voice</code></strong>
	:OFF <strong class="userinput"><code>off</code></strong>
	:MARKS <strong class="userinput"><code>marks</code></strong>)</code>
    </p><p>Predicate Function: <code class="function">(MARKP <strong class="userinput"><code>obj</code></strong>)</code></p><p>Accessors:
      </p><div class="variablelist"><dl><dt><span class="term"><code class="function"><a id="mark.id"></a>OBJ-ID</code></span></dt><dd><p>
	      This slot isn't used by FOMUS.
	    </p></dd><dt><span class="term"><code class="function"><a id="mark.partid"></a>EVENT-PARTID</code></span></dt><dd><p>
	      This slot is equivalent to the <em class="structfield"><code><a href="#note.partid">PARTID</a></code></em> slot in the
	      <code class="classname"><a href="#class.note">NOTE</a></code> or <code class="classname"><a href="#class.rest">REST</a></code> class.
	    </p></dd><dt><span class="term"><code class="function"><a id="mark.voice"></a>EVENT-VOICE</code></span></dt><dd><p>
    	      This slot is equivalent to the <em class="structfield"><code><a href="#rest.voice">VOICE</a></code></em>
	      slot in the <code class="classname"><a href="#class.rest">REST</a></code> class, with the
	      exception that a staff or list of staves can be specified instead of voices.
	      Staves are indicated with a list beginning with the symbol <code class="literal">:STAFF</code> followed by
	      one or more integer values.
	      The integers represent staff choices and can either be negative or positive, negative indicating that
	      the mark be placed in the uppermost voice of the staff (the staff number is the absolute value of the number given in this case)
	      and positive indicating that the mark be placed in the lowermost voice of the staff.
	      <span class="application">FOMUS</span> chooses the option from the list that places the mark the closest to the
	      specified offset.
	      Following is an example of how to specify staves:
       	    </p><div class="example"><a id="id282892"></a><p class="title"><b>Example 4.7. EVENT-VOICE Slot Setting</b></p><pre class="programlisting">

'(:staff 1 -2)
                </pre></div><p> 
	      Specifying a choice of staves like this allows the user to place marks like dynamics that apply to all voices but
	      only need to appear in one place.
	      In the case of the example above, a mark with this value in its <em class="structfield"><code><a href="#mark.voice">VOICE</a></code></em>
	      slot that is applied to a grand staff is attached to a note in a voice on the inside of the staff.
	    </p><p>
	      As in the case of the <code class="classname"><a href="#class.rest">REST</a></code> class, when set to a list of voices, the
	      <code class="classname"><a href="#class.mark">MARK</a></code> object is distributed to all
	      of them.
	    </p></dd><dt><span class="term"><code class="function"><a id="mark.off"></a>EVENT-OFF</code></span></dt><dd><p>
    	      This slot is equivalent to the <em class="structfield"><code><a href="#note.off">OFF</a></code></em>
	      slot in the <code class="classname"><a href="#class.note">NOTE</a></code> or
	      <code class="classname"><a href="#class.rest">REST</a></code> class,
	      with the exception that offsets may also be wrapped inside a list and given
	      a positive or negative value (for example, <code class="literal">'(3)</code>, <code class="literal">'(11.5)</code> or <code class="literal">'(-11.5)</code>).
	      When this list is used, it indicates that the marks in the <em class="structfield"><code><a href="#mark.marks">MARKS</a></code></em> slot are applied to events
	      just before or after the given offset depending on its sign.
	      Positive offset values indicate the mark is to applied to the event just following the offset and negative values indicate the mark is
	      to be applied just before it (the absolute value of it).
	      This makes it easier in some cases to place marks that indicate ends of spanners such as slurs, since marks that indicate the
	      end of the spanner can actually be given the offset where the next spanner begins.
	      <span class="application">FOMUS</span> will place the end mark in the proper place (the event that
	      immediately precedes the one at the indicated offset).
	    </p></dd><dt><span class="term"><code class="function"><a id="mark.marks"></a>EVENT-MARKS</code></span></dt><dd><p>
	      <em class="structfield"><code><a href="#mark.marks">MARKS</a></code></em> slots contain lists of marks.
	      (In a <code class="classname"><a href="#class.note">NOTE</a></code> or <code class="classname"><a href="#class.rest">REST</a></code>
	      object, these marks are "attached" to that event.)
	      Marks are specified as either symbols or lists of symbols and numbers.
	      If it is a list, then the first element is the mark symbol followed by one or more arguments.
	      Following is an example of what may appear in the <em class="structfield"><code><a href="#mark.marks">MARKS</a></code></em> slot:
       	    </p><div class="example"><a id="id283075"></a><p class="title"><b>Example 4.8. EVENT-MARKS Slot Setting 1</b></p><pre class="programlisting">

'(:accent :startslur- (:startslur- 2 :dotted) (:texttempo "accelerando"))
                </pre></div><p>	      
	    </p><p>
	      The <code class="classname"><a href="#class.mark">MARK</a></code> class can contain one extra mark that
	      <code class="classname"><a href="#class.note">NOTE</a></code> or <code class="classname"><a href="#class.rest">REST</a></code>
	      objects can't contain.
	      The symbol itself is <code class="literal">:MARK</code> and actually specifies another mark that is to be placed in the same voice
	      at a different offset.
	      It has the following format: <code class="literal">'(:MARK <strong class="userinput"><code>off</code></strong> <strong class="userinput"><code>mark</code></strong>
	      <strong class="userinput"><code>...</code></strong>)</code>, specifying that another mark is to be placed in the same voice at the offset given.
	      This special mark is necessary if the user specifies a staff instead of a voice and the mark is a symbol indicating the start of a spanner.
	      It can also be used as a convenience, since only one <code class="classname"><a href="#class.mark">MARK</a></code> object needs to be instantiated
	      to specify several marks that belong together.
	      By specifying the end symbol here as part of a <code class="literal">MARK</code> mark, <span class="application">FOMUS</span> recognizes the start
	      and end marks as belonging to each other and will place them in the same voice.
	      (Starting and ending marks that aren't paired in the same voice cause errors.)
	      The offset argument that is the second element in this list uses the same extended syntax as the <em class="structfield"><code><a href="#mark.off">OFF</a></code></em>
	      slot in this class.
	      The rest of the list after the second element is the mark symbol and the arguments that apply to that symbol.
	      Following is an example:
       	    </p><div class="example"><a id="id283182"></a><p class="title"><b>Example 4.9. EVENT-MARKS Slot Setting 2</b></p><pre class="programlisting">

'(:accent (:startslur- 2) (:mark (-101) :endslur- 2))
                </pre></div><p>	      
	    </p><p>
	      The contents of the <em class="structfield"><code><a href="#mark.marks">MARKS</a></code></em> slots of
	      <code class="classname"><a href="#class.mark">MARK</a></code> objects are dumped
	      into the <em class="structfield"><code><a href="#note.marks">MARKS</a></code></em> slots of <code class="classname"><a href="#class.note">NOTE</a></code> and
	      <code class="classname"><a href="#class.rest">REST</a></code> objects
	      once voices and staves have been decided.
	      See <a href="#marks" title="Chapter&#xA0;6.&#xA0;Marks">Marks</a> for a more detailed explanation of marks and their usage.
	    </p></dd></dl></div><p>
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id283255"></a>Structure INSTR</h2></div></div></div><p>
      An <code class="classname"><a href="#struct.instr">INSTR</a></code> structure contain instrument-specific data that's used to inform <span class="application">FOMUS</span>
      on various aspects of notation.
      Instruments are specified in the <em class="structfield"><code><a href="#part.instr">INSTR</a></code></em>
      slot of <code class="classname"><a href="#class.part">PART</a></code> objects and can be easily
      modified.
      Users can also build their own "database" of instruments by creating a <span class="application">FOMUS</span> initialization file (see
      <a href="#init" title="Chapter&#xA0;8.&#xA0;Initialization File">Initialization File</a>).
    </p><p>Constructor: 
      <code class="function">(<a id="function.make.instr"></a>MAKE-INSTR &amp;key 
        :SYM <strong class="userinput"><code>sym</code></strong>
	:CLEFS <strong class="userinput"><code>clefs</code></strong>
        :STAVES <strong class="userinput"><code>staves</code></strong>
	:MINP <strong class="userinput"><code>minp</code></strong>
	:MAXP <strong class="userinput"><code>maxp</code></strong> 
	:SIMULTLIM <strong class="userinput"><code>simultlim</code></strong>
	:TPOSE <strong class="userinput"><code>tpose</code></strong>
	:CLEFLEGLS <strong class="userinput"><code>cleflegls</code></strong>
	:8UPLEGLS <strong class="userinput"><code>8uplegls</code></strong>
	:8DNLEGLS <strong class="userinput"><code>8dnlegls</code></strong>
	:PERCS <strong class="userinput"><code>percs</code></strong>
	:MIDIPRGCH-IM <strong class="userinput"><code>midiprgch-im</code></strong>
	:MIDIPRGCH-EX <strong class="userinput"><code>midiprgch-ex</code></strong>)</code>
    </p><p>Copy Function: 
      <code class="function">(<a id="function.copy.instr"></a>COPY-INSTR <strong class="userinput"><code>instr</code></strong> &amp;key
        :SYM <strong class="userinput"><code>sym</code></strong>
	:CLEFS <strong class="userinput"><code>clefs</code></strong>
        :STAVES <strong class="userinput"><code>staves</code></strong>
	:MINP <strong class="userinput"><code>minp</code></strong>
	:MAXP <strong class="userinput"><code>maxp</code></strong> 
	:SIMULTLIM <strong class="userinput"><code>simultlim</code></strong>
	:TPOSE <strong class="userinput"><code>tpose</code></strong>
	:CLEFLEGLS <strong class="userinput"><code>cleflegls</code></strong>
	:8UPLEGLS <strong class="userinput"><code>8uplegls</code></strong>
	:8DNLEGLS <strong class="userinput"><code>8dnlegls</code></strong>
	:PERCS <strong class="userinput"><code>percs</code></strong>
	:MIDIPRGCH-IM <strong class="userinput"><code>midiprgch-im</code></strong>
	:MIDIPRGCH-EX <strong class="userinput"><code>midiprgch-ex</code></strong>)</code>
    </p><p>Predicate Function: <code class="function">(INSTRP <strong class="userinput"><code>obj</code></strong>)</code></p><p>Accessors:
      </p><div class="variablelist"><dl><dt><span class="term"><code class="function"><a id="instr.sym"></a>INSTR-SYM</code></span></dt><dd><p>
	      This is a unique symbol identifying the instrument.
	      It is used as a lookup value so that it may easily be specified in <code class="classname"><a href="#class.part">PART</a></code> objects.
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.clefs"></a>INSTR-CLEFS</code></span></dt><dd><p>
	      This is either a symbol or list of symbols, specifying valid clefs for the instrument in order of preference.
	      The following clefs are supported:
	      <code class="literal">:bass</code>, <code class="literal">:c-baritone</code>, <code class="literal">:f-baritone</code>, <code class="literal">:tenor</code>, <code class="literal">:alto</code>,
	      <code class="literal">:mezzosoprano</code>, <code class="literal">:soprano</code>, <code class="literal">:treble</code>
	      and <code class="literal">:percussion</code>.
	      The user may also add an <code class="literal">-8UP</code> or <code class="literal">-8DN</code> suffix to the symbol to specify an octave transposition.
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.staves"></a>INSTR-STAVES</code></span></dt><dd><p>
	      This is an integer specifying the number of staves to use.
	      The default is 1.
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.minp"></a>INSTR-MINP</code></span></dt><dd><p>
	      This is an integer specifying the lowest pitch in the instrument's range.
	      It may also be set to <code class="literal">NIL</code>, in which case the lower range is considered to be unlimited.
	      This is only useful if the <code class="varname"><a href="#setting.check.ranges">CHECK-RANGES</a></code> setting is set to <code class="literal">T</code>.
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.maxp"></a>INSTR-MAXP</code></span></dt><dd><p>
	      This is an integer specifying the highest pitch in the instrument's range.
	      It may also be set to <code class="literal">NIL</code>, in which case the upper range is considered to be unlimited.
	      This is only useful if the <code class="varname"><a href="#setting.check.ranges">CHECK-RANGES</a></code> setting is set to <code class="literal">T</code>.
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.simultlim"></a>INSTR-SIMULTLIM</code></span></dt><dd><p>
	      This is an integer of <code class="literal">1</code> or greater specifying the maximum number of simultaneous pitches allowed in a single voice.
	      It may also be set to <code class="literal">NIL</code>, indicating that there is no limit.
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.tpose"></a>INSTR-TPOSE</code></span></dt><dd><p>
	      This is set to the value <code class="literal">NIL</code> or an integer indicating the number of semitones to transpose
	      the instrument before notating it.
	      This number only has an effect if the <code class="varname"><a href="#setting.transpose">TRANSPOSE</a></code> setting is set to <code class="literal">T</code>.
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.cleflegls"></a>INSTR-CLEFLEGLS</code></span></dt><dd><p>
	      The value of this slot influences how <span class="application">FOMUS</span> decides when to change clefs.
	      A clef change isn't considered necessary until the number of ledger lines required exceeds a threshold value.
	      Other factors determine if there is actually a clef change or not.
	      If the value is an integer, it designates the threshold number of ledger lines in all cases.
	      If it's a list, the first element of the list must be an integer specifying a default threshold.
	      This is followed by one or more exceptions, each in the form of a list.
	      This exception list contains a clef symbol (see the <em class="structfield"><code><a href="#instr.clefs">CLEFS</a></code></em> slot above)
	      followed by one of the two symbols <code class="literal">:UP</code> or <code class="literal">:DN</code>
	      and ended by an integer specifying the number of ledger lines.
	      An example illustrates this data structure.
       	    </p><div class="example"><a id="id283876"></a><p class="title"><b>Example 4.10. INSTR-CLEFLEGLS Slot Setting</b></p><pre class="programlisting">

'(2 (:bass :up 3) (:tenor :down 3))
                </pre></div><p>	      
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.8uplegls"></a>INSTR-8UPLEGLS</code></span></dt><dd><p>
	      This value influences how <span class="application">FOMUS</span> chooses where to place ottava brackets above the staff.
	      An ottava bracket isn't considered necessary until the number of ledger lines required exceeds a threshold value.
	      An integer in this slot indicates the threshold value, while
	      a list of two elements specifies the threshold for the ottava bracket to begin and the threshold below which the number of ledger lines must
	      drop for it to end.
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.8dnlegls"></a>INSTR-8DNLEGLS</code></span></dt><dd><p>
	      This is the same as <code class="function">INSTR-8UPLEGLS</code> above, only for ottava brackets placed below the staff
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.percs"></a>INSTR-PERCS</code></span></dt><dd><p>
	      This is a list of symbols, <code class="classname"><a href="#struct.perc">PERC</a></code> objects, numbers or lists
	      indicating all of the percussion instruments that are to be notated together as a group.
	      <code class="classname"><a href="#struct.perc">PERC</a></code> objects provide necessary extra information for notating percussion.
	      All of these value types function to lookup percussion instruments in the same way as the <em class="structfield"><code><a href="#part.instr">PART-INSTR</a></code></em>
	      slot of the <code class="classname"><a href="#class.part">PART</a></code> class.
	      Symbols are used as lookup values into a user-defined percussion instrument table (see the
	      <code class="varname"><a href="#setting.percussion">PERCUSSION</a></code> setting) or <span class="application">FOMUS</span>'s own predefined table.
	      Lists contain a symbol lookup value followed by keyword-argument pairs signifying values to replace in the predefined percussion table--it will
	      usually be necessary to use a list instead of a symbol since the <em class="structfield"><code><a href="#perc.note">NOTE</a></code></em> and
	      <em class="structfield"><code><a href="#perc.voice">VOICE</a></code></em> slots are empty in <span class="application">FOMUS</span>'s table.
       	    </p><div class="example"><a id="id284043"></a><p class="title"><b>Example 4.11. INSTR-PERCS Slot Setting</b></p><pre class="programlisting">

(list '(:low-tom :note 0 :voice 1) '(:high-tom :note 4 :voice 1)
      (make-perc :anvil :note -3 :voice 2 :midinote-ex 79))
                </pre></div><p>	      
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.midiprgch.im"></a>MIDIPRGCH-IM</code></span></dt><dd><p>
	      This is a number from <code class="literal">0</code> to <code class="literal">127</code> or a list of such numbers specifying which MIDI program change values can
	      translate to this instrument.
	      This is used when specifying an instrument as a program change number (see the <em class="structfield"><code><a href="#part.instr">INSTR</a></code></em> slot in the
	      <code class="classname"><a href="#class.part">PART</a></code> class) or calling the 
	      <code class="function"><a href="#function.get.midi.instr">GET-MIDI-INSTR</a></code> function.
	      When given a program change number, <span class="application">FOMUS</span> finds the first instrument that matches in its list.
	    </p></dd><dt><span class="term"><code class="function"><a id="instr.midiprgch.ex"></a>MIDIPRGCH-EX</code></span></dt><dd><p>
	      This is usually a number from <code class="literal">0</code> to <code class="literal">127</code> specifying which program change value is to be used when exporting
	      MIDI data.
	      It can also be set to a list, the first element of which is the number mentioned above followed by keyword/value pairs indicating alternate program
	      change values for different playing modes.
	      (For example, the list <code class="literal">'(40 :pizz 45)</code> is a valid value for a violin instrument.)
	      The keywords currently allowed are <code class="literal">:PIZZ</code>, <code class="literal">:STOPPED</code>, <code class="literal">:OPEN</code> and <code class="literal">:HARMONIC</code>.
	      (More will be added in future releases.)
	    </p></dd></dl></div><p>
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id284198"></a>Structure PERC</h2></div></div></div><p>
    </p><p>Constructor: 
      <code class="function">(<a id="function.make.perc"></a>MAKE-PERC &amp;key 
        :SYM <strong class="userinput"><code>sym</code></strong>
	:STAFF <strong class="userinput"><code>staff</code></strong>
        :VOICE <strong class="userinput"><code>voice</code></strong>
	:NOTE <strong class="userinput"><code>note</code></strong>
	:AUTODUR <strong class="userinput"><code>autodur</code></strong>
	:MIDINOTE-IM <strong class="userinput"><code>midinote-im</code></strong>
	:MIDINOTE-EX <strong class="userinput"><code>midinote-ex</code></strong>)</code>
    </p><p>Copy Function: 
      <code class="function">(COPY-PERC <strong class="userinput"><code>perc</code></strong> &amp;key
        :SYM <strong class="userinput"><code>sym</code></strong>
	:STAFF <strong class="userinput"><code>staff</code></strong>
        :VOICE <strong class="userinput"><code>voice</code></strong>
	:NOTE <strong class="userinput"><code>note</code></strong>
	:AUTODUR <strong class="userinput"><code>autodur</code></strong>
	:MIDINOTE-IM <strong class="userinput"><code>midinote-im</code></strong>
	:MIDINOTE-EX <strong class="userinput"><code>midinote-ex</code></strong>)</code>
    </p><p>Accessors:
      </p><div class="variablelist"><dl><dt><span class="term"><code class="function"><a id="perc.sym"></a>PERC-SYM</code></span></dt><dd><p>
	      This is a unique symbol identifying the percussion instrument.
	      It is used as a lookup value so that it may easily be specified in <code class="classname"><a href="#struct.instr">INSTR</a></code> structures.
	    </p></dd><dt><span class="term"><code class="function"><a id="perc.staff"></a>PERC-STAFF</code></span></dt><dd><p>
	      This is an integer of <code class="literal">1</code> or greater specifying on which staff the
	      instrument appears on.
	    </p></dd><dt><span class="term"><code class="function"><a id="perc.voice"></a>PERC-VOICE</code></span></dt><dd><p>
	      This is an integer of <code class="literal">1</code> or greater specifying a voice that this
	      instrument belongs to.
	      Specifying different voices prevents notes belonging to different instruments from being beamed together.
	    </p></dd><dt><span class="term"><code class="function"><a id="perc.note"></a>PERC-NOTE</code></span></dt><dd><p>
	      This is an integer or symbol designating where the instrument's notes are to appear on the staff.
	      The value is interpreted with middle C in the center as if notated with an alto clef signature.
	      See <code class="function">EVENT-NOTE</code> in the <code class="classname"><a href="#class.note">NOTE</a></code> class for information on
	      specifying notes with symbols.
	      Percussion notes should not require flats or sharps.
	    </p></dd><dt><span class="term"><code class="function"><a id="perc.autodur"></a>PERC-AUTODUR</code></span></dt><dd><p>
	      If set to <code class="literal">T</code>, indicates that <span class="application">FOMUS</span> should determine
	      durations for this instrument.
	      This is appropriate for percussion instruments that don't have long sustain times
	      and can therefore be notated with durations that are simpler to read.
	      Notes containing certain marks such as trills and tremolos are left unchanged.
	      This slot is <code class="literal">T</code> by default.
	    </p></dd><dt><span class="term"><code class="function"><a id="perc.midinote.im"></a>PERC-MIDINOTE-IM</code></span></dt><dd><p>
	      Represents the MIDI note or notes used to import MIDI data.
	      This can either be an integer from <code class="literal">0</code> to <code class="literal">127</code> or a list of such integers.
	    </p></dd><dt><span class="term"><code class="function"><a id="perc.midinote.ex"></a>PERC-MIDINOTE-EX</code></span></dt><dd><p>
	      An integer value from <code class="literal">0</code> to <code class="literal">127</code> representing the MIDI note used when exporting MIDI data.
	    </p></dd></dl></div><p>
    </p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="settings"></a>Chapter 5. Settings</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id289376"></a></span></dt><dt><span class="section"><a href="#id289738">Most Useful <span class="application">FOMUS</span> Settings</a></span></dt><dt><span class="section"><a href="#id289911">Complete <span class="application">FOMUS</span> Settings</a></span></dt><dd><dl><dt><span class="section"><a href="#id289922">Program Settings</a></span></dt><dt><span class="section"><a href="#id290008">Executables</a></span></dt><dt><span class="section"><a href="#id290101">Global</a></span></dt><dt><span class="section"><a href="#id290165">Objects</a></span></dt><dt><span class="section"><a href="#id290205">Parts</a></span></dt><dt><span class="section"><a href="#id290290">Time Signatures</a></span></dt><dt><span class="section"><a href="#id290332">Modules</a></span></dt><dt><span class="section"><a href="#id290446">Modules On/Off</a></span></dt><dt><span class="section"><a href="#id290586">Quantizing</a></span></dt><dt><span class="section"><a href="#id290645">Staves</a></span></dt><dt><span class="section"><a href="#id290690">Ottavas</a></span></dt><dt><span class="section"><a href="#id290715">Accidentals</a></span></dt><dt><span class="section"><a href="#id290756">Cautionary Accidentals</a></span></dt><dt><span class="section"><a href="#id290812">Grace Notes</a></span></dt><dt><span class="section"><a href="#id290855">Measure/Tuplet Divisions</a></span></dt><dt><span class="section"><a href="#id290898">Note Splitting/Tying</a></span></dt><dt><span class="section"><a href="#id290973">Beams</a></span></dt></dl></dd><dt><span class="section"><a href="#id291018">Alphabetical Listing of Settings</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p>
    Settings are arguments or parameters used to pass data to <span class="application">FOMUS</span> for processing.
    There are a lot of them, but only a few of them are essential or even important for most users.
    The most useful ones are listed below--many of the ones that aren't on this list are there
    to provide some way of tweaking <span class="application">FOMUS</span>'s decisions or turning various
    decision-making algorithms on and off.
    Setting values can be passed to the <code class="function">FOMUS</code> function as keyword/argument pairs or 
    bound as special variables, the names of which are derived by surrounding the symbol names with asterisks.
    All of the variables are exported symbols in the <code class="literal">FOMUS</code> package.
  </p><p>  
    See <a href="#init" title="Chapter&#xA0;8.&#xA0;Initialization File">Initialization File</a> for an explanation of how to modify default values for any of these settings.
  </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id289738"></a>Most Useful <span class="application">FOMUS</span> Settings</h2></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.verbose">:VERBOSE</a></code></td><td><code class="varname"><a href="#setting.events">:EVENTS</a></code></td><td><code class="varname"><a href="#setting.acc.throughout.meas">:ACC-THROUGHOUT-MEAS</a></code></td></tr><tr><td><code class="varname"><a href="#setting.output">:OUTPUT</a></code></td><td><code class="varname"><a href="#setting.input.beat.value">:INPUT-BEAT-VALUE</a></code></td><td><code class="varname"><a href="#setting.auto.cautionary.accs">:AUTO-CAUTIONARY-ACCS</a></code></td></tr><tr><td><code class="varname"><a href="#setting.filename">:FILENAME</a></code></td><td><code class="varname"><a href="#setting.beat.division">:BEAT-DIVISION</a></code></td><td><code class="varname"><a href="#setting.auto.percussion.durs">:AUTO-PERCUSSION-DURS</a></code></td></tr><tr><td><code class="varname"><a href="#setting.quality">:QUALITY</a></code></td><td><code class="varname"><a href="#setting.max.tuplet">:MAX-TUPLET</a></code></td><td><code class="varname"><a href="#setting.default.grace.dur">:DEFAULT-GRACE-DUR</a></code></td></tr><tr><td><code class="varname"><a href="#setting.global">:GLOBAL</a></code></td><td><code class="varname"><a href="#setting.min.tuplet.dur">:MIN-TUPLET-DUR</a></code></td><td> </td></tr><tr><td><code class="varname"><a href="#setting.parts">:PARTS</a></code></td><td><code class="varname"><a href="#setting.quartertones">:QUARTERTONES</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id289911"></a>Complete <span class="application">FOMUS</span> Settings</h2></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id289922"></a>Program Settings</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.verbose">:VERBOSE</a></code></td><td><code class="varname"><a href="#setting.cm.scale">:CM-SCALE</a></code></td><td><code class="varname"><a href="#setting.filename">:FILENAME</a></code></td></tr><tr><td><code class="varname"><a href="#setting.debug.filename">:DEBUG-FILENAME</a></code></td><td><code class="varname"><a href="#setting.backend">:BACKEND</a></code></td><td><code class="varname"><a href="#setting.quality">:QUALITY</a></code></td></tr><tr><td><code class="varname"><a href="#setting.use.cm">:USE-CM</a></code></td><td><code class="varname"><a href="#setting.output">:OUTPUT</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290008"></a>Executables</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.lilypond.exe">:LILYPOND-EXE</a></code></td><td><code class="varname"><a href="#setting.lilypond.view.exe">:LILYPOND-VIEW-EXE</a></code></td><td><code class="varname"><a href="#setting.cmn.view.exe">:CMN-VIEW-EXE</a></code></td></tr><tr><td><code class="varname"><a href="#setting.lilypond.opts">:LILYPOND-OPTS</a></code></td><td><code class="varname"><a href="#setting.lilypond.view.opts">:LILYPOND-VIEW-OPTS</a></code></td><td><code class="varname"><a href="#setting.cmn.view.opts">:CMN-VIEW-OPTS</a></code></td></tr><tr><td><code class="varname"><a href="#setting.lilypond.out.ext">:LILYPOND-OUT-EXT</a></code></td><td><code class="varname"><a href="#setting.lilypond.version">:LILYPOND-VERSION</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290101"></a>Global</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.title">:TITLE</a></code></td><td><code class="varname"><a href="#setting.composer">:COMPOSER</a></code></td><td><code class="varname"><a href="#setting.tuplet.style">:TUPLET-STYLE</a></code></td></tr><tr><td><code class="varname"><a href="#setting.subtitle">:SUBTITLE</a></code></td><td><code class="varname"><a href="#setting.timesig.style">:TIMESIG-STYLE</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290165"></a>Objects</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.global">:GLOBAL</a></code></td><td><code class="varname"><a href="#setting.parts">:PARTS</a></code></td><td><code class="varname"><a href="#setting.events">:EVENTS</a></code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290205"></a>Parts</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.check.ranges">:CHECK-RANGES</a></code></td><td><code class="varname"><a href="#setting.percussion">:PERCUSSION</a></code></td><td><code class="varname"><a href="#setting.instr.groups">:INSTR-GROUPS</a></code></td></tr><tr><td><code class="varname"><a href="#setting.transpose">:TRANSPOSE</a></code></td><td><code class="varname"><a href="#setting.default.instr">:DEFAULT-INSTR</a></code></td><td><code class="varname"><a href="#setting.ensemble.type">:ENSEMBLE-TYPE</a></code></td></tr><tr><td><code class="varname"><a href="#setting.instruments">:INSTRUMENTS</a></code></td><td><code class="varname"><a href="#setting.percussion">:PERCUSSION</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290290"></a>Time Signatures</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.default.timesig">:DEFAULT-TIMESIG</a></code></td><td><code class="varname"><a href="#setting.default.beat">:DEFAULT-BEAT</a></code></td><td><code class="varname"><a href="#setting.min.auto.timesig.dur">:MIN-AUTO-TIMESIG-DUR</a></code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290332"></a>Modules</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.auto.accs.mod">:AUTO-ACCS-MOD</a></code></td><td><code class="varname"><a href="#setting.auto.ottavas.mod">:AUTO-OTTAVAS-MOD</a></code></td><td><code class="varname"><a href="#setting.split.mod">:SPLIT-MOD</a></code></td></tr><tr><td><code class="varname"><a href="#setting.auto.beam.mod">:AUTO-BEAM-MOD</a></code></td><td><code class="varname"><a href="#setting.auto.quantize.mod">:AUTO-QUANTIZE-MOD</a></code></td><td><code class="varname"><a href="#setting.tuplet.mod">:TUPLET-MOD</a></code></td></tr><tr><td><code class="varname"><a href="#setting.auto.multivoice.comb.mod">:AUTO-MULTIVOICE-COMB-MOD</a></code></td><td><code class="varname"><a href="#setting.auto.staff/clefs.mod">:AUTO-STAFF/CLEFS-MOD</a></code></td><td> </td></tr><tr><td><code class="varname"><a href="#setting.auto.distr.rests.mod">:AUTO-DISTR-RESTS-MOD</a></code></td><td><code class="varname"><a href="#setting.auto.voices.mod">:AUTO-VOICES-MOD</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290446"></a>Modules On/Off</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.auto.accidentals">:AUTO-ACCIDENTALS</a></code></td><td><code class="varname"><a href="#setting.auto.grace.slurs">:AUTO-GRACE-SLURS</a></code></td><td><code class="varname"><a href="#setting.auto.voicing">:AUTO-VOICING</a></code></td></tr><tr><td><code class="varname"><a href="#setting.auto.cautionary.accs">:AUTO-CAUTIONARY-ACCS</a></code></td><td><code class="varname"><a href="#setting.auto.ottavas">:AUTO-OTTAVAS</a></code></td><td><code class="varname"><a href="#setting.auto.percussion.durs">:AUTO-PERCUSSION-DURS</a></code></td></tr><tr><td><code class="varname"><a href="#setting.auto.beams">:AUTO-BEAMS</a></code></td><td><code class="varname"><a href="#setting.auto.override.timesigs">:AUTO-OVERRIDE-TIMESIGS</a></code></td><td><code class="varname"><a href="#setting.auto.pizz/arco">:AUTO-PIZZ/ARCO</a></code></td></tr><tr><td><code class="varname"><a href="#setting.auto.multivoice.notes">:AUTO-MULTIVOICE-NOTES</a></code></td><td><code class="varname"><a href="#setting.auto.quantize">:AUTO-QUANTIZE</a></code></td><td> </td></tr><tr><td><code class="varname"><a href="#setting.auto.multivoice.rests">:AUTO-MULTIVOICE-RESTS</a></code></td><td><code class="varname"><a href="#setting.auto.staff/clef.changes">:AUTO-STAFF/CLEF-CHANGES</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290586"></a>Quantizing</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.input.beat.value">:INPUT-BEAT-VALUE</a></code></td><td><code class="varname"><a href="#setting.min.tuplet.dur">:MIN-TUPLET-DUR</a></code></td><td><code class="varname"><a href="#setting.max.tuplet">:MAX-TUPLET</a></code></td></tr><tr><td><code class="varname"><a href="#setting.beat.division">:BEAT-DIVISION</a></code></td><td><code class="varname"><a href="#setting.max.tuplet.dur">:MAX-TUPLET-DUR</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290645"></a>Staves</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.grandstaff.hide.rests">:GRANDSTAFF-HIDE-RESTS</a></code></td><td><code class="varname"><a href="#setting.min.grandstaff.hide.rests.dur">:MIN-GRANDSTAFF-HIDE-RESTS-DUR</a></code></td><td><code class="varname"><a href="#setting.min.multivoice.chords.dur">:MIN-MULTIVOICE-CHORDS-DUR</a></code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290690"></a>Ottavas</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.max.ottava.rest.dist">:MAX-OTTAVA-REST-DIST</a></code></td><td> </td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290715"></a>Accidentals</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.quartertones">:QUARTERTONES</a></code></td><td><code class="varname"><a href="#setting.acc.throughout.meas">:ACC-THROUGHOUT-MEAS</a></code></td><td><code class="varname"><a href="#setting.use.double.accs">:USE-DOUBLE-ACCS</a></code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290756"></a>Cautionary Accidentals</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.acc.caut.acc.dist">:ACC-CAUT-ACC-DIST</a></code></td><td><code class="varname"><a href="#setting.caut.acc.octaves">:CAUT-ACC-OCTAVES</a></code></td><td> </td></tr><tr><td><code class="varname"><a href="#setting.caut.acc.next.meas">:CAUT-ACC-NEXT-MEAS</a></code></td><td><code class="varname"><a href="#setting.caut.acc.ottavas">:CAUT-ACC-OTTAVAS</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290812"></a>Grace Notes</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.default.grace.dur">:DEFAULT-GRACE-DUR</a></code></td><td><code class="varname"><a href="#setting.default.grace.num">:DEFAULT-GRACE-NUM</a></code></td><td><code class="varname"><a href="#setting.effective.grace.dur.mul">:EFFECTIVE-GRACE-DUR-MUL</a></code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290855"></a>Measure/Tuplet Divisions</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.default.tuplets">:DEFAULT-TUPLETS</a></code></td><td><code class="varname"><a href="#setting.default.meas.divs">:DEFAULT-MEAS-DIVS</a></code></td><td><code class="varname"><a href="#setting.default.tuplet.divs">:DEFAULT-TUPLET-DIVS</a></code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290898"></a>Note Splitting/Tying</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.dotted.note.level">:DOTTED-NOTE-LEVEL</a></code></td><td><code class="varname"><a href="#setting.shortlongshort.notes.level">:SHORTLONGSHORT-NOTES-LEVEL</a></code></td><td><code class="varname"><a href="#setting.tuplet.dotted.rests">:TUPLET-DOTTED-RESTS</a></code></td></tr><tr><td><code class="varname"><a href="#setting.double.dotted.notes">:DOUBLE-DOTTED-NOTES</a></code></td><td><code class="varname"><a href="#setting.syncopated.notes.level">:SYNCOPATED-NOTES-LEVEL</a></code></td><td><code class="varname"><a href="#setting.min.split.all.parts.dur">:MIN-SPLIT-ALL-PARTS-DUR</a></code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id290973"></a>Beams</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#setting.long.eighth.beams">:LONG-EIGHTH-BEAMS</a></code></td><td><code class="varname"><a href="#setting.long.eighth.beam.count">:LONG-EIGHTH-BEAM-COUNT</a></code></td><td><code class="varname"><a href="#setting.comp.long.eighth.beam.count">:COMP-LONG-EIGHTH-BEAM-COUNT</a></code></td></tr></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id291018"></a>Alphabetical Listing of Settings</h2></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="varname"><a id="setting.acc.caut.acc.dist"></a>:ACC-CAUT-ACC-DIST</code></span></dt><dd><p>
  	    This number represents the maximum distance a cautionary accidental may be from the note that causes it.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="setting.acc.throughout.meas"></a>:ACC-THROUGHOUT-MEAS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, accidentals carry to the end of the measure.
  	  If set to <code class="literal">NIL</code>, accidentals affect only the note they precede.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.accidentals"></a>:AUTO-ACCIDENTALS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> automatically determines note spellings.
  	  If set to <code class="literal">NIL</code>, a generic set of note spellings is used (all notes receive flats except for F sharp).
	  The user may supply note spellings to override <span class="application">FOMUS</span>'s spellings.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.accs.mod"></a>:AUTO-ACCS-MOD</code></span></dt><dd><p>
  	  Designates which module is to be used for determining note spellings.
  	  Current possible values are <code class="literal">T</code> and <code class="literal">:NOKEY1</code>.
  	  <code class="literal">T</code> represents the default module and is equivalent to <code class="literal">:NOKEY1</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.beam.mod"></a>:AUTO-BEAM-MOD</code></span></dt><dd><p>
  	  Designates which module is to be used for beaming.
  	  Current possible values are <code class="literal">T</code> and <code class="literal">:BEAMS1</code>.
  	  <code class="literal">T</code> represents the default module and is equivalent to <code class="literal">:BEAMS1</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.beams"></a>:AUTO-BEAMS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> determines beaming based on time signature information and
  	  decisions it makes regarding irregular measure divisions.
  	  If set to <code class="literal">NIL</code>, beaming decisions are made by the backend notation program.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.cautionary.accs"></a>:AUTO-CAUTIONARY-ACCS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> inserts several different kinds of cautionary accidentals.
    	  The user can supply her own cautionary accidentals with the <code class="function"><a href="#mark.cautacc">:CAUTACC</a></code> mark.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.distr.rests.mod"></a>:AUTO-DISTR-RESTS-MOD</code></span></dt><dd><p>
  	  Designates which module is to be used for determining how rests are distributed among staves.
  	  Current possible values are <code class="literal">T</code> and <code class="literal">:RESTS1</code>.
  	  <code class="literal">T</code> represents the default module and is equivalent to <code class="literal">:RESTS1</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.grace.slurs"></a>:AUTO-GRACE-SLURS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> automatically puts slurs over all grace notes.
  	  If set to <code class="literal">NIL</code>, the user must supply all grace note slurs with
  	  <code class="function"><a href="#mark.graceslur-">:STARTGRACESLUR-</a></code>,
	  <code class="function"><a href="#mark.graceslur-">:GRACESLUR-</a></code> and <code class="function"><a href="#mark.graceslur-">:ENDGRACESLUR-</a></code> marks.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.multivoice.comb.mod"></a>:AUTO-MULTIVOICE-COMB-MOD</code></span></dt><dd><p>
  	  Designates which module is to be used for determining how simultaneous notes from different voices are combined into chords on the same staff.
  	  Current possible values are <code class="literal">T</code> and <code class="literal">:COMB1</code>.
  	  <code class="literal">T</code> represents the default module and is equivalent to <code class="literal">:COMB1</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.multivoice.notes"></a>:AUTO-MULTIVOICE-NOTES</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> combines simultaneous notes from different voices into chords.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.multivoice.rests"></a>:AUTO-MULTIVOICE-RESTS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> combines equivalent simultaneous rests from different voices into single rests.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.ottavas"></a>:AUTO-OTTAVAS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> automatically determines where to place ottava brackets.
  	  If set to <code class="literal">NIL</code>, the user must supply all ottava brackets with
	  <code class="function"><a href="#mark.8up">:8UP</a></code>, <code class="function"><a href="#mark.8down">:8DOWN</a></code>
  	  and related spanner marks.	  
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.ottavas.mod"></a>:AUTO-OTTAVAS-MOD</code></span></dt><dd><p>
  	  Designates which module is to be used for determining where ottava brackets occur.
  	  Current possible values are <code class="literal">T</code> and <code class="literal">:OTTAVAS1</code>.
  	  <code class="literal">T</code> represents the default module and is equivalent to <code class="literal">:OTTAVAS1</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.override.timesigs"></a>:AUTO-OVERRIDE-TIMESIGS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> extends or contracts measures within certain bounds,
  	  adding new time signatures as necessary to fit measures into the user-supplied time signatures given
  	  in the <code class="varname"><a href="#setting.global">GLOBAL</a></code> or <code class="varname"><a href="#setting.parts">PARTS</a></code> settings.
  	  If set to <code class="literal">NIL</code>, <span class="application">FOMUS</span> simply cuts the last measure (also inserting a new time signature)
  	  before a new time signature change, resulting in measures of arbitrary sizes depending on where the cut occurs.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.percussion.durs"></a>:AUTO-PERCUSSION-DURS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> determines the durations of all percussion
	  instruments that have their <em class="structfield"><code><a href="#perc.autodur">AUTODUR</a></code></em> slot
	  set to <code class="literal">T</code>.
	  Percussion instruments that don't need to be notated precisely with respect to duration are then notated
	  with durations that are simpler to read (without tying together groups of notes).
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.pizz/arco"></a>:AUTO-PIZZ/ARCO</code></span></dt><dd><p>
  	    If set to <code class="literal">T</code>, indicates that <span class="application">FOMUS</span> should convert each consecutive group of 
	    <code class="function"><a href="#mark.pizz">:PIZZ</a></code> marks it finds to a single pair of
	    <code class="function"><a href="#mark.pizz">:PIZZ</a></code> and <code class="function"><a href="#mark.arco">:ARCO</a></code> marks.
	    This makes it easier to notate pizz. and arco changes by simply attaching <code class="function"><a href="#mark.pizz">:PIZZ</a></code>
	    marks where they belong.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.quantize"></a>:AUTO-QUANTIZE</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> quantizes offsets and durations so that
  	  everything fits into the closest fitting tuplets and beat divisions possible.
  	  If set to <code class="literal">NIL</code>, all offset and duration values must be precise ratios or integers--
	  floating point numbers are treated with the <code class="function">RATIONALIZE</code> function in this case (this isn't recommended).
  	  If no quantizing is done and offsets and durations of events don't fit into anything that is "notatable" then 
	  <span class="application">FOMUS</span> will complain with an error.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.quantize.mod"></a>:AUTO-QUANTIZE-MOD</code></span></dt><dd><p>
  	  Designates which module is to be used for quantizing.
  	  Current possible values are <code class="literal">T</code> and <code class="literal">:QUANTIZE1</code>.
  	  <code class="literal">T</code> represents the default module and is equivalent to <code class="literal">:QUANTIZE1</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.staff/clef.changes"></a>:AUTO-STAFF/CLEF-CHANGES</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> automatically determines staff and clef changes for voices.
  	  If set to <code class="literal">NIL</code>, the user must supply all staff and clef changes with <code class="literal">:STAFF</code>, <code class="literal">:CLEF</code>
  	  and related marks.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.staff/clefs.mod"></a>:AUTO-STAFF/CLEFS-MOD</code></span></dt><dd><p>
  	  Designates which module is to be used to determine automatic staff and clef changes.
  	  Current possible values are <code class="literal">T</code> and <code class="literal">:STAVES/CLEFS1</code>.
  	  <code class="literal">T</code> represents the default module and is equivalent to <code class="literal">:STAVES/CLEFS1</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.voices.mod"></a>:AUTO-VOICES-MOD</code></span></dt><dd><p>
  	  Designates which module is to be used for determining how notes are distributed into separate voices.
  	  Current possible values are <code class="literal">T</code> and <code class="literal">:VOICES1</code>.
  	  <code class="literal">T</code> represents the default module and is equivalent to <code class="literal">:VOICES1</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.auto.voicing"></a>:AUTO-VOICING</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> automatically decides how to distribute notes among multiple voices,
  	  given the choices specified in the <code class="classname">NOTE</code>, <code class="classname">REST</code> and <code class="classname">MARK</code> objects.
  	  If set to <code class="literal">NIL</code>, the user must specify explicitly which voice an event belongs to.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.backend"></a>:BACKEND</code></span></dt><dd><p>
	    This is the same setting as <code class="varname"><a href="#setting.output">OUTPUT</a></code>.
	    Use one or the other, but don't use both.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.beat.division"></a>:BEAT-DIVISION</code></span></dt><dd><p>
  	  The value of this setting is used by the quantizing algorithm to determine how to round offsets and durations.  
  	  If only an integer is given, it represents the number of divisions per beat in a non-compound meter--
  	  the compound meter value is then calculated by multiplying the first number by 3/2.
  	  If specified as a list of two integers, the first integer represents the number of divisions per beat in a non-compound meter while
  	  the second represents the number of divisions in a compound meter.
  	  The first number must be a power of 2 while the second number 3/2 or 3/4 times a power of 2.
  	</p><p>
	  A <code class="varname"><a href="#setting.beat.division">BEAT-DIVISION</a></code> of 2, for example, tells <span class="application">FOMUS</span>
	  to quantize to eighth-note values (if the current beat is a quarter-note).  
	  In a compound 12/4 meter, this setting also tells <span class="application">FOMUS</span> to quantize to an eighth-note value (2 multiplied by 3/2 
	  is 3, and there are 3 eighth-notes per beat).
	  In the same compound 12/4 meter, a setting of <code class="literal">'(4 6)</code> would cause durations to be quantized to sixteenth notes (there
	  are 6 sixteenth notes per beat).
	</p><p>
	  <code class="varname"><a href="#setting.beat.division">BEAT-DIVISION</a></code> specifies only approximately how durations are quantized inside tuplets.
	  It is completely predictable only when the <code class="varname"><a href="#setting.max.tuplet">MAX-TUPLET</a></code>
	  setting is set to <code class="literal">NIL</code> or the notation contains nothing that would generate any kind of tuplet.
	  When tuplets are allowed and <span class="application">FOMUS</span> tries to create them, it divides them into units that are as
	  close as possible in duration to the non-tuplet divisional units.
	  For example, if <code class="varname"><a href="#setting.beat.division">BEAT-DIVISION</a></code> is set to <code class="literal">16</code> and it's allowable for
	  <span class="application">FOMUS</span> to try to divide one beat into a septuplet, then it's possible for notes to be quantized to either 16 or 14
	  divisions per beat (since a septuplet divides evenly into 14 units and 1/14 is the closest septuplet divisional duration to 1/16).
	</p></dd><dt><span class="term"><code class="varname"><a id="setting.caut.acc.next.meas"></a>:CAUT-ACC-NEXT-MEAS</code></span></dt><dd><p>
	  When set to <code class="literal">NIL</code>, indicates that cautionary accidentals may occur only in the same measure as the note that causes them.
	  When set to <code class="literal">1</code>, specifies that cautionary accidentals may occur only if they are in the measure immediately after the note that causes them.
    	  When set to <code class="literal">T</code> or <code class="literal">2</code>, specifies that cautionary accidentals may occur in any measure after the note that causes them.  
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.caut.acc.octaves"></a>:CAUT-ACC-OCTAVES</code></span></dt><dd><p>
  	  When set to <code class="literal">T</code>, the cautionary accidental algorithm places cautionary accidentals at all octave transpositions
  	  from the note that causes them.
  	  When set to the integer <code class="literal">1</code> or greater, specifies the maximum number of octaves a cautionary accidental
  	  can be from the note that causes it.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.caut.acc.ottavas"></a>:CAUT-ACC-OTTAVAS</code></span></dt><dd><p>
  	  When set to <code class="literal">T</code>, the cautionary accidental algorithm considers the presence of ottava brackets, placing
  	  cautionary accidentals where apparent octave transpositions might cause confusion.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.check.ranges"></a>:CHECK-RANGES</code></span></dt><dd><p>
  	  When set to <code class="literal">T</code>, activates a check that prints warnings if it finds notes out of range for their instruments.
  	  The <em class="structfield"><code>MINP</code></em> and <em class="structfield"><code>MAXP</code></em> slots in the appropriate <code class="classname">INSTR</code>
  	  object must be set for this to have any effect.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.cm.scale"></a>:CM-SCALE</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, indicates that the value of <code class="varname"><a href="#setting.cm.scale">CM-SCALE</a></code> will be used
  	  to parse note symbols (as the value of the <code class="literal">:IN</code> keyword argument) if <span class="application">CM</span> is present and being used.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.cmn.view.exe"></a>:CMN-VIEW-EXE</code></span></dt><dd><p>
	      This is a string specifying the path and filename to the executable for the <span class="application">Common Music Notation</span> viewer application.
	      The full pathname may or may not need to be specified depending on the Lisp implementation.
	      The default application depends on what is installed on the user's machine, and should be
	      an application appropriate for viewing PostScript or EPS files.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.cmn.view.opts"></a>:CMN-VIEW-OPTS</code></span></dt><dd><p>
	      This is a list of strings representing options to be passed to the <span class="application">CMN</span> viewer application executable.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.comp.long.eighth.beam.count"></a>:COMP-LONG-EIGHTH-BEAM-COUNT</code></span></dt><dd><p>
  	  This is set to an integer greater than <code class="literal">0</code>, specifying the number of eighth notes that need to be present
  	  to be beamed as groups of 6 in compound meters.
  	  This setting is only effective if <code class="varname"><a href="#setting.long.eighth.beams">LONG-EIGHTH-BEAMS</a></code> is set to <code class="literal">T</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.composer"></a>:COMPOSER</code></span></dt><dd><p>
  	  This is an optional string value containing the composer's name.	  
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.debug.filename"></a>:DEBUG-FILENAME</code></span></dt><dd><p>
  	  If set to a string, represents the name of a file to which debug information is dumped each time the <code class="function">FOMUS</code>
  	  function is called.
  	  If you wish to report a bug, please send the contents of this file.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.default.beat"></a>:DEFAULT-BEAT</code></span></dt><dd><p>
	    Specifies a default value for the <em class="structfield"><code><a href="#timesig.beat">BEAT</a></code></em> slot of
	    <em class="structfield"><code><a href="#class.timesig">TIMESIG</a></code></em> objects that are not compound time signatures.
	    This setting is <code class="literal">1/4</code> by default, specifying that for non-compound meters a quarternote is
	    equivalent to 1 beat.
	    In compound time signatures the beat is always infered from the denominator (for example, in a 12/8 meter the
	    beat is 3/8).
  	  </p></dd><dt><span class="term"><code class="varname"><a id="setting.default.grace.dur"></a>:DEFAULT-GRACE-DUR</code></span></dt><dd><p>
  	  If <span class="application">FOMUS</span> needs to convert a note into a grace note, this value is used as the grace note's duration.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.default.grace.num"></a>:DEFAULT-GRACE-NUM</code></span></dt><dd><p>
  	  If <span class="application">FOMUS</span> needs to convert a note into a grace note, this value is used as the grace note's default position number.
	  This value together with the grace note's context determines the actual position (when necessary, <span class="application">FOMUS</span> will
	  increment or decrement this value to determine the actual position number).
	  See the <em class="structfield"><code><a href="#note.dur">DUR</a></code></em> slot in class <code class="classname"><a href="#class.note">NOTE</a></code>
	  for more information.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.default.instr"></a>:DEFAULT-INSTR</code></span></dt><dd><p>
	    This is a default <code class="classname"><a href="#struct.instr">INSTR</a></code> object to be used in cases when
	    another instrument isn't specified.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.default.meas.divs"></a>:DEFAULT-MEAS-DIVS</code></span></dt><dd><p>
  	  This list is a table containing possible ways of dividing measures into smaller segments or divisions.
	  These segments affect how notes are split, tied and beamed.
  	  Entries in this list replace entries in <span class="application">FOMUS</span>'s own default table if they exist.
  	  Each member of this list is itself a list, containing an integer or ratio lookup value as the first element followed by one or more lists of integers/ratios
  	  that each add up to the first number.
    	  </p><div class="example"><a id="id292710"></a><p class="title"><b>Example 5.1. DEFAULT-MEAS-DIVS Setting</b></p><pre class="programlisting">

:default-meas-divs
  '((3 (2 1) (1 2))
    (4 (2 2))
    (5 (3 2) (2 3))
    (6 (4 2) (2 4))
    (7 (4 3) (3 4)))
              </pre></div><p>
  	</p><p>  
  	  The numbers in these lists correspond to the number of beats in a measure, multiplied or divided by 2 if necessary.
	  In most cases, only specify integers should be necessary, though ratios may also be used.
  	  For example, if a 7/8 measure with a quarter-note beat is processed, <span class="application">FOMUS</span>
	  first tries to lookup a set of divisions using the index number 7/2, then 7, 14, etc..
	  This way the lookup value <code class="literal">7</code> is sufficient for any meter with a numerator of 7, though it's possible to supply
	  more specific entries such as <code class="literal">7/2</code> (for measures that contain 3 + 1/2 beats).
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.default.timesig"></a>:DEFAULT-TIMESIG</code></span></dt><dd><p>
  	  If no time signature is specified in the <code class="varname"><a href="#setting.global">GLOBAL</a></code> or
	  <code class="varname"><a href="#setting.parts">PARTS</a></code> lists, this default one is used.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.default.tuplet.divs"></a>:DEFAULT-TUPLET-DIVS</code></span></dt><dd><p>
  	  This list is a table containing possible ways of dividing tuplets into smaller segments or divisions.
	  These segments affect how notes are split, tied and beamed.
  	  Entries in this replace entries in <span class="application">FOMUS</span>'s own default table if they exist.
  	  Each member of this list is itself a list, containing an integer lookup value as the first element followed by one or more lists of integers
  	  that each add up to the first number.
    	  </p><div class="example"><a id="id292815"></a><p class="title"><b>Example 5.2. DEFAULT-TUPLET-DIVS Setting</b></p><pre class="programlisting">

:default-meas-divs
  '((3 (2 1) (1 2))
    (4 (2 2))
    (5 (3 2) (2 3) (4 1) (1 4))
    (6 (4 2) (2 4))
    (7 (4 3) (3 4)))
              </pre></div><p>
  	</p><p>  
  	  The numbers in this list correspond to numerators of tuplet ratios (or multiples or divisions of two).
	  When <span class="application">FOMUS</span> needs to find possible divisions for a triplet, for example, it uses the entries
	  in the list corresponding to lookup value <code class="literal">3</code>.
	  If it needs to lookup divisions for a sextuplet, it will first try to lookup the number <code class="literal">6</code> and then use
	  <code class="literal">3</code> if an entry for <code class="literal">6</code> doesn't exist.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.default.tuplets"></a>:DEFAULT-TUPLETS</code></span></dt><dd><p>
	    This list is a lookup table indicating what ratios <span class="application">FOMUS</span> should use when deciding how to notate tuplets.
	    Each list element is itself a list of two integers specifying a tuplet ratio, or how many durational units should be used in place of another.
	    <code class="literal">'(7 4)</code> thus specifies that septuplet eighth notes are to be used in place of 4 eighth notes.  <span class="application">FOMUS</span> 
	    searches this table by finding a match for number of tuplet divisions (the first integer in each pair) and checking the second integer to see if it's
	    appropriate for the context it is in (a power of 2 of the actual number of durational units).  
	    Thus, several entries for septuplets might exist: <code class="literal">'(7 4)</code> for the majority of cases and <code class="literal">'(7 5)</code> for 
	    cases where, for example, 7 eighth notes might span an entire 5/8 measure or a section of a larger tuplet.
    	  </p><div class="example"><a id="id292918"></a><p class="title"><b>Example 5.3. DEFAULT-TUPLETS Setting</b></p><pre class="programlisting">

:default-meas-divs '((3 2) (6 5) (5 4) (7 4) (7 5) (13 8) (13 10))
              </pre></div><p>
	  </p><p> 
	    The default value is <code class="literal">NIL</code>.
	    If <span class="application">FOMUS</span> doesn't find an entry for a tuplet division here, it determines its own depending on the value
	    of <code class="varname"><a href="#setting.tuplet.mod">TUPLET-MOD</a></code>.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="setting.dotted.note.level"></a>:DOTTED-NOTE-LEVEL</code></span></dt><dd><p>
  	  Indicates how dotted notes are allowed to appear.
  	  Possible values are <code class="literal">T</code>, <code class="literal">:ALL</code>, <code class="literal">:TOP</code> and <code class="literal">:SIG</code>.
  	  <code class="literal">:ALL</code> specifies that they can appear anywhere, <code class="literal">:TOP</code> specifies that they can appear
  	  only if they occupy an entire measure, and <code class="literal">:SIG</code> specifies that they can appear if they occupy durations
  	  larger than a beat.
  	  <code class="literal">T</code> is equivalent to <code class="literal">:ALL</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.double.dotted.notes"></a>:DOUBLE-DOTTED-NOTES</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, indicates that double-dotted notes are allowed.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.effective.grace.dur.mul"></a>:EFFECTIVE-GRACE-DUR-MUL</code></span></dt><dd><p>
  	  If <span class="application">FOMUS</span> needs to determine the effective duration of a grace note (for scoring or comparison purposes),
	  it multiplies the value of this setting
	  with the duration given in the grace note's <em class="structfield"><code><a href="#note.dur">DUR</a></code></em> slot.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.ensemble.type"></a>:ENSEMBLE-TYPE</code></span></dt><dd><p>
  	  This setting determines how parts are both ordered and grouped
	  together with brackets and barlines in the score.
  	  Setting this to a symbol specifies a lookup value for a ordering/grouping table entry specified
	  in the <code class="varname"><a href="#setting.instr.groups">INSTR-GROUPS</a></code> setting or
	  <span class="application">FOMUS</span>'s own default table.
  	  It may also be set to an ordering/grouping data structure, in which case this specified ordering/grouping is used instead.
	  An ordering/grouping data structure is a list of symbols or nested lists of symbols that specify both the groups and the layout order of parts.
  	  A symbol specifies an instrument while a list contains a group type
	  (a symbol designating what type of bracket is to appear on the left-hand margin
	  of the score and how barlines are to appear) followed by more instrument symbols or lists (see the example below).
  	  A group type is one of the symbols <code class="literal">:GROUP</code>, <code class="literal">:GRANDSTAFF</code> or <code class="literal">:CHOIRGROUP</code>.
  	</p><p>
  	  A look at the following examples might make this clearer:
    	  </p><div class="example"><a id="id293151"></a><p class="title"><b>Example 5.4. ENSEMBLE-TYPE Setting 1</b></p><pre class="programlisting">

:ensemble-type :orchestra
              </pre></div><p>
    	  </p><div class="example"><a id="id293164"></a><p class="title"><b>Example 5.5. ENSEMBLE-TYPE Setting 2</b></p><pre class="programlisting">

:ensemble-type
  '((:my-orchestra
     (:group (:group :piccolo :flute) (:group :oboe :english-horn)
             (:group :bf-clarinet :a-clarinet :bass-clarinet)
             (:group :bassoon :contra-bassoon))
     (:group (:group :horn) (:group :c-trumpet :bf-trumpet)
             (:group :alto-trombone :tenor-trombone :bass-trombone)
             (:group :tuba))
      :timpani :percussion
     (:grandstaff :piano) 
     (:group (:group :violin) (:group :viola) (:group :violoncello)
             (:group :contrabass))))
              </pre></div><p>
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.events"></a>:EVENTS</code></span></dt><dd><p>
  	  This is a global list of events to be processed by <span class="application">FOMUS</span>.
  	  An event can be a <code class="classname"><a href="#class.note">NOTE</a></code>,
	  <code class="classname"><a href="#class.rest">REST</a></code> or <code class="classname"><a href="#class.mark">MARK</a></code> object.
  	  A <code class="classname"><a href="#class.note">NOTE</a></code> or
	  <code class="classname"><a href="#class.rest">REST</a></code> object must have a symbol or number in its
	  <em class="structfield"><code><a href="#note.partid">PARTID</a></code></em>
  	  slot specifying which part it belongs to.
	  A <code class="classname"><a href="#class.mark">MARK</a></code> object may have a default <em class="structfield"><code><a href="#note.partid">PARTID</a></code></em>
	  value of <code class="literal">NIL</code> to specify all parts or
	  a symbol/number or list of symbols/numbers to specify only those parts.
	  (Note that specifying part ID information isn't necessary when event objects are listed in the 
	  <em class="structfield"><code><a href="#part.events">EVENTS</a></code></em> slot of a
	  <code class="classname"><a href="#class.part">PART</a></code> object.
  	  Including these objects in the events list provides an alternative to listing them inside <code class="classname"><a href="#class.part">PART</a></code> objects.)
  	  See <a href="#objects" title="Chapter&#xA0;4.&#xA0;Objects">Objects</a> for more detailed descriptions of these objects and their uses.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.filename"></a>:FILENAME</code></span></dt><dd><p>
  	  This string represents the path and name of a file to which <span class="application">FOMUS</span> adds an appropriate extension when it saves
  	  its output.
  	  This setting in combination with the <code class="varname"><a href="#setting.backend">BACKEND</a></code> setting determines the actual output filenames.
    	  </p><div class="example"><a id="id293350"></a><p class="title"><b>Example 5.6. FILENAME Setting</b></p><pre class="programlisting">

:filename "path_to_output_directory/myoutput"
              </pre></div><p>
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.global"></a>:GLOBAL</code></span></dt><dd><p>
  	  This is a list of objects that have "global" influence over other events in the <code class="varname"><a href="#setting.parts">PARTS</a></code>
  	  and <code class="varname"><a href="#setting.events">EVENTS</a></code> settings.
  	  Only objects of type <code class="classname"><a href="#class.timesig">TIMESIG</a></code> and
	  <code class="classname"><a href="#class.keysig">KEYSIG</a></code> are allowed here (<code class="classname"><a href="#class.keysig">KEYSIG</a></code>
  	  isn't implemented yet).
	  When a global object's <em class="structfield"><code><a href="#timesig.partids">PARTIDS</a></code></em> slot is set to the default value of <code class="literal">NIL</code>
  	  the object affects all parts that don't already have a <code class="classname"><a href="#class.timesig">TIMESIG</a></code> or
	  <code class="classname"><a href="#class.keysig">KEYSIG</a></code> attached to them at that point.
	  When its <em class="structfield"><code><a href="#timesig.partids">PARTIDS</a></code></em> slot is set to symbol or list of symbols the
	  object affects those parts only.
  	  This enables the specification of multiple simultaneous time signatures and polymeters (not implemented yet).
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.grandstaff.hide.rests"></a>:GRANDSTAFF-HIDE-RESTS</code></span></dt><dd><p>
  	  When set to <code class="literal">T</code> or <code class="literal">:SOME</code>, indicates that <span class="application">FOMUS</span> hides some rests
  	  when combining multiple voices in a grand staff.
	  This makes the notation easier to read for multi-staff instruments by eliminating rests that aren't necessary.
  	  When set to <code class="literal">:ALL</code> indicates that all rests in all parts are hidden (this could be more useful in the future
	  when proportional notation is supported).
  	  When set to <code class="literal">NIL</code> indicates that no rests are hidden.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.input.beat.value"></a>:INPUT-BEAT-VALUE</code></span></dt><dd><p>
	    When set to some real number greater than <code class="literal">0</code>, indicates that this durational value is to be interpreted as one beat.
	    <span class="application">FOMUS</span> effectively scales all input objects by dividing offsets and durations by this value before doing any other processing.
	    A value of <code class="literal">NIL</code> is the default and is equivalent to <code class="literal">1</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.instr.groups"></a>:INSTR-GROUPS</code></span></dt><dd><p>
  	  The value of this setting is a table in the form of a list that provides a way of adding instrument orderings and groupings
	  to <span class="application">FOMUS</span>'s own default table.
	  These tables map symbol lookup values to ordering/grouping data structures which specify how parts are both ordered and grouped
	  together with brackets and barlines in the score.
  	  The user may choose one of these groupings by setting <code class="varname"><a href="#setting.ensemble.type">ENSEMBLE-TYPE</a></code> to
	  a symbol lookup value.
  	  The user-supplied list is searched first so user-supplied orderings/groupings can override <span class="application">FOMUS</span>'s
	  default orderings/groupings.
	</p><p>	  
	  The setting is a list of lists, the first element in each inner list containing a symbol specifying a unique lookup name.
	  These are followed by grouping/ordering definitions:
	  symbols or nested lists of symbols that specify both the groups and the layout order of parts.
  	  In this data structure a symbol specifies an instrument while a list contains a group type
	  (a symbol designating what type of bracket is to appear on the left-hand margin
	  of the score and how barlines are to appear) followed by more instrument symbols or lists (see the example below).
  	  A group type is one of the symbols <code class="literal">:GROUP</code>, <code class="literal">:GRANDSTAFF</code> or <code class="literal">:CHOIRGROUP</code>.
  	</p><p>
  	  A look at the following example might make this clearer:
    	  </p><div class="example"><a id="id293632"></a><p class="title"><b>Example 5.7. INSTR-GROUPS Setting</b></p><pre class="programlisting">

:instr-groups
  '((:orchestra
     (:group (:group :piccolo :flute) (:group :oboe :english-horn)
             (:group :bf-clarinet :a-clarinet :bass-clarinet)
             (:group :bassoon :contra-bassoon))
     (:group (:group :horn) (:group :c-trumpet :bf-trumpet)
             (:group :alto-trombone :tenor-trombone :bass-trombone)
             (:group :tuba))
      :timpani :percussion
     (:grandstaff :piano) 
     (:group (:group :violin) (:group :viola) (:group :violoncello)
             (:group :contrabass)))
    (:ensemble
     :piccolo :flute :oboe :english-horn :bf-clarinet :a-clarinet :bassoon
     :contra-bassoon (:grandstaff :piano)))
              </pre></div><p>
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.instruments"></a>:INSTRUMENTS</code></span></dt><dd><p>
  	  The user can use this setting to specify additional <code class="classname"><a href="#struct.instr">INSTR</a></code>
	  objects that are added to the default instrument list.
  	  <span class="application">FOMUS</span> searches this list before its own default list when resolving symbols to instrument definitions, so they may 
  	  be replacements or modifications of existing instruments.
	  The contents are either instrument objects created with <code class="function"><a href="#function.make.instr">MAKE-INSTR</a></code>
	  or lists specifying modifications to <span class="application">FOMUS</span>'s default instruments (or a combination of both).
	  If a list is specified, it contains a symbol specifying a default instrument followed by keyword/argument pairs indicating slot values that replace 
	  existing default values (see the <em class="structfield"><code><a href="#part.instr">INSTR</a></code></em> slot in the
	  <code class="classname"><a href="#class.part">PART</a></code> object
	  and <a href="#example.part.instr.slot.setting">PART-INSTR Slot Setting</a> for an example of this).
    	  </p><div class="example"><a id="id293736"></a><p class="title"><b>Example 5.8. INSTRUMENT Setting</b></p><pre class="programlisting">

:instrument
  (list (make-instr :recorder :clefs :treble)
        '(:piano :staves 3 :simultlim 6))
              </pre></div><p>
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.lilypond.exe"></a>:LILYPOND-EXE</code></span></dt><dd><p>
	      This is a string specifying the path and filename to the <span class="application">LilyPond</span> executable.
	      The full pathname may or may not need to be specified depending on the Lisp implementation.	    
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.lilypond.opts"></a>:LILYPOND-OPTS</code></span></dt><dd><p>
	      This is a list of strings representing options to be passed to the <span class="application">LilyPond</span> executable.
	      The default is currently <code class="literal">'("--ps")</code> for Linux or <code class="literal">'("--pdf")</code> for OS X/Windows,
	      specifying that <span class="application">LilyPond</span> should generate either a PostScript or PDF format file.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.lilypond.out.ext"></a>:LILYPOND-OUT-EXT</code></span></dt><dd><p>
	      This is a string specifying the extension for the output filename that is created when <span class="application">LilyPond</span> is run.
	      The default is <code class="literal">"ps"</code> for Linux and <code class="literal">"pdf"</code> for OS X/Windows.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.lilypond.version"></a>:LILYPOND-VERSION</code></span></dt><dd><p>
	      If set to a string (for example, <code class="literal">"2.8"</code>), forces <span class="application">FOMUS</span> to output <span class="application">LilyPond</span> files for that
	      version.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="setting.lilypond.view.exe"></a>:LILYPOND-VIEW-EXE</code></span></dt><dd><p>
	      This is a string specifying the path and filename to the executable for the <span class="application">LilyPond</span> viewer application.
	      The full pathname may or may not need to be specified depending on the Lisp implementation.
	      The default application depends on what is installed on the user's machine, and should be
	      one appropriate for viewing PostScript files.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.lilypond.view.opts"></a>:LILYPOND-VIEW-OPTS</code></span></dt><dd><p>
	      This is a list of strings representing options to be passed to the <span class="application">LilyPond</span> viewer application executable.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.long.eighth.beam.count"></a>:LONG-EIGHTH-BEAM-COUNT</code></span></dt><dd><p>
  	  This is set to an integer greater than <code class="literal">0</code>, specifying the number of eighth notes that need to be present
  	  to be beamed as a group of 4.
  	  This setting is only effective if <code class="varname"><a href="#setting.long.eighth.beams">LONG-EIGHTH-BEAMS</a></code> is set to <code class="literal">T</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.long.eighth.beams"></a>:LONG-EIGHTH-BEAMS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, specifies that the beaming algorithm should beam eighth notes into groups of up
  	  to 4 under certain conditions (if enough of them are present).
  	  If set to <code class="literal">:ALWAYS</code>, specifies that eighth notes are always beamed in groups of 4.
  	  If set to <code class="literal">NIL</code>, specifies that eighth notes are never beamed in groups of 4.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.max.ottava.rest.dist"></a>:MAX-OTTAVA-REST-DIST</code></span></dt><dd><p>
  	  This is a real number greater than <code class="literal">0</code>, specifying the maximum distance an ottava bracket will span over a group
  	  of contiguous rests.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.max.tuplet"></a>:MAX-TUPLET</code></span></dt><dd><p>
  	  If set to an integer, represents the largest tuplet allowed.
  	  If set to a list of integers, represents the largest tuplets allowed for each nested tuplet level (and also specifies how many levels of
  	  tuplet nesting are allowed by the length of the list).
  	  A value of <code class="literal">'(7 3)</code>, for example, specifies two levels of tuplet nesting with septuplets being the maximum
  	  allowed in the outer level and triplets being the maximum in the inner level.
	  A value of <code class="literal">NIL</code> specifies that no tuplets are to be used.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.max.tuplet.dur"></a>:MAX-TUPLET-DUR</code></span></dt><dd><p>
  	  This is the largest duration in beats that a tuplet can span.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.min.auto.timesig.dur"></a>:MIN-AUTO-TIMESIG-DUR</code></span></dt><dd><p>
  	  if <code class="varname"><a href="#setting.auto.override.timesigs">AUTO-OVERRIDE-TIMESIGS</a></code> is set to <code class="literal">T</code>,
	  <span class="application">FOMUS</span> automatically generates new time signatures as necessary to fit measures into the
  	  time signatures specified in the <code class="varname"><a href="#setting.global">GLOBAL</a></code> and 
	  <code class="varname"><a href="#setting.parts">PARTS</a></code> list.
  	  The value of this setting represents the smallest duration (in beats) of any such time signature that is generated.
  	  See <a href="#class.timesig">TIMESIG</a> and <a href="#class.timesig.repl">TIMESIG-REPL</a> for more information.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.min.grandstaff.hide.rests.dur"></a>:MIN-GRANDSTAFF-HIDE-RESTS-DUR</code></span></dt><dd><p>
  	  This is a real number greater than <code class="literal">0</code>, specifying the minimum duration that a group of simultaneous rests must occupy
  	  in order for some of them to be hidden.
  	  This is applicable only when there are multiple voices on a staff, in cases where several simultaneous rests can be
	  shown as one rest.
	  <code class="varname"><a href="#setting.auto.multivoice.rests">AUTO-MULTIVOICE-RESTS</a></code> must also be set to <code class="literal">T</code>
	  for this to have any effect.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.min.multivoice.chords.dur"></a>:MIN-MULTIVOICE-CHORDS-DUR</code></span></dt><dd><p>
  	  This is a real number greater than <code class="literal">0</code>, specifying the minimum duration a group of simultaneous notes in separate
  	  voices must span to be combined into chords. 
	  This is applicable only when there are multiple voices on a staff, and if 
	  <code class="varname"><a href="#setting.auto.multivoice.notes">AUTO-MULTIVOICE-NOTES</a></code> is set to <code class="literal">T</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.min.split.all.parts.dur"></a>:MIN-SPLIT-ALL-PARTS-DUR</code></span></dt><dd><p>
  	  This is the smallest duration that <span class="application">FOMUS</span> will consider when deciding whether or
	  not to "split" or divide all parts together or separately.
	  (Splitting means splitting and tying notes as necessary to properly notate a given rhythm in a given measure.)
	  A unit of music must be larger than this value to be considered--units equal to or smaller than this duration are not considered.
	  <span class="application">FOMUS</span> splits measures in all parts together up to a certain point to insure that the notation is
	  consistently divided in all parts.
	  A 5/8 measure, for example, will be consistently divided as either 3 + 2 to 2 + 3 in all parts together 
	  (as long as the value of this setting is smaller than the duration of a 5/8 measure).
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.min.tuplet.dur"></a>:MIN-TUPLET-DUR</code></span></dt><dd><p>
  	  This is the smallest duration in beats that a tuplet can span.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.parts"></a>:PARTS</code></span></dt><dd><p>
  	  This is a list of <code class="classname"><a href="#class.part">PART</a></code> objects, each representing a stave or grand staff in the score.
  	  At least one part must be specified.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.output"></a>:OUTPUT</code></span></dt><dd><p>
  	  This is either a list or a list of lists specifying one or more output files with optional keyword/argument pairs for tweaking their contents.
  	  Current possible output symbols are <code class="literal">:DATA</code> or <code class="literal">:FOMUS</code>, <code class="literal">:RAW</code>, <code class="literal">:MUSICXML</code>, 
	  <code class="literal">:MUSICXML-SIBELIUS</code>, <code class="literal">:MUSICXML-FINALE</code>, <code class="literal">:CMN</code>, <code class="literal">:LILYPOND</code> and <code class="literal">:MIDI</code>.
  	  More information on these is given in <a href="#backends" title="Chapter&#xA0;7.&#xA0;Backends">Backends</a>.
  	  The following are examples of valid output specifications:
  	  </p><div class="example"><a id="id294496"></a><p class="title"><b>Example 5.9. OUTPUT Setting 1</b></p><pre class="programlisting">

:output '(:data (:lilypond :view t))
              </pre></div><p>
  	  </p><div class="example"><a id="id294510"></a><p class="title"><b>Example 5.10. OUTPUT Setting 2</b></p><pre class="programlisting">

:output '(:lilypond :filename "myfile.ly" :view nil)
              </pre></div><p>
  	  </p><div class="example"><a id="id294523"></a><p class="title"><b>Example 5.11. OUTPUT Setting 3</b></p><pre class="programlisting">

:output :cmn
              </pre></div><p>
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.percussion"></a>:PERCUSSION</code></span></dt><dd><p>
  	  This is a list of <code class="classname"><a href="#struct.perc">PERCUSSION</a></code> objects serving as a lookup table for information pertaining to
  	  percussion notation.
  	  <code class="classname"><a href="#struct.perc">PERCUSSION</a></code> objects are listed in
	  <code class="classname"><a href="#struct.instr">INSTR</a></code> objects to define
	  collections of percussion instruments that are notated together on a single staff.
  	  <span class="application">FOMUS</span> searches this user setting list before its own default list when 
	  resolving symbols to percussion instrument definitions, so they may 
  	  be replacements or modifications of <span class="application">FOMUS</span>'s predefined percussion instruments.
	  The contents are either percussion objects created with <code class="function"><a href="#function.make.perc">MAKE-PERC</a></code>
	  or lists specifying modifications to <span class="application">FOMUS</span>'s default percussion objects (or a combination of both).
	  If a list is specified, it contains a symbol specifying a default percussion instrument followed by keyword/argument pairs indicating slot values that replace 
	  existing default values (see the <em class="structfield"><code><a href="#instr.percs">PERCS</a></code></em> slot in the
	  <code class="classname"><a href="#struct.instr">INSTR</a></code> object for an example of this).          
    	  </p><div class="example"><a id="id294629"></a><p class="title"><b>Example 5.12. PERCUSSION Setting</b></p><pre class="programlisting">

:instrument
  (list (make-perc :anvil :note -3 :voice 2 :midinote-ex 79)
        '(:triangle :note 0 :voice 1))
              </pre></div><p>
  	  See the documentation for <code class="classname"><a href="#struct.perc">PERCUSSION</a></code> objects for more information.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.quality"></a>:QUALITY</code></span></dt><dd><p>
	    This is a real number indicating how much <span class="application">FOMUS</span> should trade 
	    speed of computation for "quality" of output.
	    Setting it lower increases speed while setting it higher gives better results.
	    The default is <code class="literal">1</code>, which is reasonable for relatively uncomplicated scores with a small number of parts.
	    The most effective values are between approximately <code class="literal">-3</code> and <code class="literal">3</code>, though complex
	    scores might show a little improvement (better guesses within a larger context) with values of <code class="literal">5</code> or more.
	    After a certain point increasing this value only makes the program run slower with no noticeable improvement in output. 
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.quartertones"></a>:QUARTERTONES</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, <span class="application">FOMUS</span> rounds pitches to quartertone values
	  and uses quartertone notation in the score.
	  This only works if the algorithm specified by the <code class="varname"><a href="#setting.auto.accs.mod">AUTO-ACCS-MOD</a></code> setting
	  supports it.
	  The only module provided so far, <code class="literal">:NOKEY1</code>, supports quartertones.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.shortlongshort.notes.level"></a>:SHORTLONGSHORT-NOTES-LEVEL</code></span></dt><dd><p>
  	  Indicates how "short-long-short" note patterns are allowed to appear.
  	  An example of such a pattern is an eighth note followed by a quarter note then an eighth note, and is treated as
  	  an exception to insure that the middle note isn't split in the middle and tied.
  	  Possible values are <code class="literal">T</code>, <code class="literal">:ALL</code>, <code class="literal">:TOP</code> and <code class="literal">:SIG</code>.
  	  <code class="literal">:ALL</code> specifies that this pattern can appear anywhere, <code class="literal">:TOP</code> specifies that it can appear
  	  only if it occupies an entire measure, and <code class="literal">:SIG</code> specifies that it can appear if it occupies a duration
  	  larger than a beat.
  	  <code class="literal">T</code> is equivalent to <code class="literal">:ALL</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.split.mod"></a>:SPLIT-MOD</code></span></dt><dd><p>
  	  Designates which module is to be used for splitting and tying notes.
  	  Current possible values are <code class="literal">T</code> and <code class="literal">:SPLIT1</code>.
  	  <code class="literal">T</code> represents the default module and is equivalent to <code class="literal">:SPLIT1</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.subtitle"></a>:SUBTITLE</code></span></dt><dd><p>
  	  This is an optional string value containing the subtitle of the composition.	  
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.syncopated.notes.level"></a>:SYNCOPATED-NOTES-LEVEL</code></span></dt><dd><p>
  	  When set to <code class="literal">T</code>, indicates that a certain syncopated note pattern,
	  a short note followed by any number of long notes then a short note, may appear.
  	  An example of such a pattern is an eighth note followed by several quarter notes then an eighth note.
	  This can only occur if the pattern occupies the duration of an entire measure.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.timesig.style"></a>:TIMESIG-STYLE</code></span></dt><dd><p>
  	  This indicates how time signature are printed.
  	  It can be set to <code class="literal">:FRACTION</code> or <code class="literal">:COMMON</code>, specifying that either fractional or common
  	  time signatures are to be used in the backend (given the choice).
  	  The default value of <code class="literal">NIL</code> is equivalent to specifying <code class="literal">:FRACTION</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.title"></a>:TITLE</code></span></dt><dd><p>
  	  This is an optional string value containing the title of the composition.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.transpose"></a>:TRANSPOSE</code></span></dt><dd><p>
  	  When set to <code class="literal">T</code>, activates a transposition function that automatically transposes note values.
  	  The <em class="structfield"><code><a href="#instr.tpose">TPOSE</a></code></em> slot of the appropriate <code class="classname"><a href="#struct.instr">INSTR</a></code>
	  objects must be set for this to have any effect.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.tuplet.dotted.rests"></a>:TUPLET-DOTTED-RESTS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, specifies whether or not dotted rests are allowed inside tuplets of irregular (ie. not a power of 2)
  	  divisions.
  	  For example, a quintuplet might be divided into a dotted eight rest followed by an eighth note if
	  <code class="varname"><a href="#setting.tuplet.dotted.rests">TUPLET-DOTTED-RESTS</a></code> is true. 
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.tuplet.mod"></a>:TUPLET-MOD</code></span></dt><dd><p>
  	  Designates which module is to be used for determining tuplet ratios.
  	  Current possible values are <code class="literal">T</code>, <code class="literal">:POW2</code> and <code class="literal">:DUR</code>.
  	  <code class="literal">T</code> represents the default module and is equivalent to <code class="literal">:POW2</code>.
	  <code class="literal">:POW2</code> determines tuplet ratios based on the rule that the number of tuplet divisions replace (in most cases)
	  the number of durational units equaling the next lowest power of two.  <span class="application">FOMUS</span> thus notates 7 in the time of 4
	  and 13 in the time of 8. <code class="literal">:DUR</code> determines ratios
	  by finding the closest number of durational units to the number of tuplet divisions.  <span class="application">FOMUS</span> then notates
	  7 in the time of 8 and 13 in the time of 16.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.tuplet.style"></a>:TUPLET-STYLE</code></span></dt><dd><p>
  	  Specifies how tuplets are to be printed.
  	  The possible values are <code class="literal">:RATIO</code> or <code class="literal">:SINGLE</code>.
  	  The default value of <code class="literal">NIL</code> is equivalent to <code class="literal">:SINGLE</code>.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.use.cm"></a>:USE-CM</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, indicates that <span class="application">FOMUS</span> should use <span class="application">Common Music</span> functions if present.
  	  Note symbols are then parsed by <span class="application">CM</span> using the value of
  	  <code class="varname"><a href="#setting.cm.scale">CM-SCALE</a></code> as if it were passed as the <code class="literal">:IN</code> argument to 
	  <span class="application">CM</span>'s <code class="function">KEYNUM</code> function.
  	  Also, durations specified as symbols indicate notational durations and are interpreted
  	  as such using <span class="application">CM</span>'s <code class="function">RHYTHM</code> function.
	  Numbers are still interpreted by <span class="application">FOMUS</span> in terms of beats.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.use.double.accs"></a>:USE-DOUBLE-ACCS</code></span></dt><dd><p>
  	  If set to <code class="literal">T</code>, the note spelling algorithm considers double sharps and double flats in addition to
	  single sharps and flats.
  	</p></dd><dt><span class="term"><code class="varname"><a id="setting.verbose"></a>:VERBOSE</code></span></dt><dd><p>
  	  This must be set to a value from <code class="literal">0</code> to <code class="literal">2</code>, indicating the amount of printed output.
  	  A value of <code class="literal">0</code> represents minimal output while a value of <code class="literal">2</code> represents maximal output.
  	</p></dd></dl></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="marks"></a>Chapter 6. Marks</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id300431"></a></span></dt><dt><span class="section"><a href="#id300963">FOMUS Marks</a></span></dt><dd><dl><dt><span class="section"><a href="#id300969"></a></span></dt><dt><span class="section"><a href="#id301244">Articulations</a></span></dt><dt><span class="section"><a href="#id301505">Dynamics</a></span></dt><dt><span class="section"><a href="#id301854">Tempo/Duration</a></span></dt><dt><span class="section"><a href="#id301978">Ornamentations</a></span></dt><dt><span class="section"><a href="#id302331">Effects</a></span></dt><dt><span class="section"><a href="#id302684">Text</a></span></dt><dt><span class="section"><a href="#id302962">Notation</a></span></dt></dl></dd><dt><span class="section"><a href="#id303298">TIMESIG Properties</a></span></dt><dt><span class="section"><a href="#id303408">PART Properties</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p>
      Marks are symbols or lists of symbols with arguments that appear in the <em class="structfield"><code><a href="#mark.marks">MARKS</a></code></em> slots of
      <code class="classname"><a href="#class.note">NOTE</a></code>,
      <code class="classname"><a href="#class.rest">REST</a></code> and
      <code class="classname"><a href="#class.mark">MARK</a></code> objects.
      All extra information (articulations, ornamentations, etc.) that doesn't have a special slot in these objects is indicated with marks.
      A few "marks" can also appear in <code class="classname"><a href="#class.timesig">TIMESIG</a></code> and 
      <code class="classname"><a href="#class.part">PART</a></code> objects, but are called properties--for these, the syntax is exactly the same.
    </p><p>
      Two types of marks exist:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
	  Simple marks that apply only to the <code class="classname"><a href="#class.note">NOTE</a></code>,
	  <code class="classname"><a href="#class.rest">REST</a></code> or
	  <code class="classname"><a href="#class.mark">MARK</a></code> object
	  they are included in.
        </p></li><li><p>
	  Marks that indicate they are to be applied over a range of these objects.
	  These marks are distinguished by a trailing dash character at the end of the symbol (for example, 
	  <code class="function"><a href="#mark.slur-">:STARTSLUR-</a></code>
	  and <code class="function"><a href="#mark.slur-">:ENDSLUR-</a></code>).  
	  Exceptions that don't have a trailing dash are <code class="function"><a href="#mark.wedge.gt">:STARTWEDGE&gt;</a></code> and 
	  <code class="function"><a href="#mark.wedge.lt">:STARTWEDGE&lt;</a></code> and related marks.
        </p></li></ul></div><p>
    </p><p>
      The second type is mostly used to indicate "spanners," or items in the score that occur across a range of notes such as slurs or ottava brackets.
      Most of them come in a group of three, one prefixed with the string <code class="function">START</code>, another with no prefix, and the last one with the prefix
      <code class="function">END</code>. (For example, <code class="function">:STARTSLUR-</code>, <code class="function">:SLUR-</code> and <code class="function">:ENDSLUR-</code>.) 
      Spanner marks may be indicated in two different ways:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
	  The <code class="function">START</code> and <code class="function">END</code> marks are inserted in the objects that occur where the spanner begins and ends.
	</p></li><li><p>
	  The <code class="function">START</code> mark is inserted in the object at the point where the spanner starts and the mark without a prefix
	  is placed in subsequent objects up to the point where the spanner ends.
	  The last object with a mark in it before a new <code class="function">START</code> mark is found is considered to be the end of the spanner.
	</p></li></ul></div><p>
      In either case, care must be taken to insert all marks that belong together either in the same voice or the same
      staff, depending on the type of mark.
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id300963"></a>FOMUS Marks</h2></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p>
        Formats for marks and their arguments are shown in a pseudo lambda-list style format with <code class="literal">&amp;optional</code> symbols to designate optional arguments.
	Some arguments are shown as a choice between several options or symbols, each separated by a pipe character.
	In most cases, it doesn't matter in what order the arguments appear--<span class="application">FOMUS</span> figures out which is which by the data types
	(reorderable arguments like this are shown by a double arrow figure).
	Also, spanner marks that belong together are shown together and separated with forward slashes.
        The following list is a reference for the some of the arguments given in the following sections:
	</p><div class="variablelist"><dl><dt><span class="term"><strong class="userinput"><code><a id="markarg.art.order"></a>art-order</code></strong></span></dt><dd>An integer for articulations specifying relative closeness to the notehead (lower numbered articulations are closer than higher numbered ones).</dd><dt><span class="term"><strong class="userinput"><code><a id="markarg.clef"></a>clef</code></strong></span></dt><dd>A valid clef symbol (see the <em class="structfield"><code><a href="#instr.clefs">CLEFS</a></code></em> slot in structure
	      <code class="classname"><a href="#struct.instr">INSTR</a></code> for a list of these symbols).</dd><dt><span class="term"><strong class="userinput"><code><a id="markarg.level"></a>level</code></strong></span></dt><dd>
	      This integer distinguishes between inner and outer levels of spanner markings.  The default value is 1.
	      Smaller numbers are "inner" markings occurring close to the staff while larger numbers are "outer" markings
	      occurring farther away from the staff.  There are two methods of designating which level a mark is to appear on.
	      The first is to use the same few level numbers repeatedly (for example, <code class="literal">1</code> may be used to designate the 1st or innermost level
	      and <code class="literal">2</code> to designate the 2nd level, as in two levels of slur markings).  
	      This method allows the user to be "lazy" and leave out matching <code class="literal">START</code> and
	      <code class="literal">END</code> marks--<span class="application">FOMUS</span> can supply the missing marks by finding the next <code class="literal">START</code> or
	      <code class="literal">END</code> marks in that level.  The second method is to use a separate number for each start/end pair--in this case, all
	      <code class="literal">START</code> marks must have matching <code class="literal">END</code> marks or <span class="application">FOMUS</span> will try to supply missing
	      marks for each individual "level" and create a mess.
	    </dd><dt><span class="term"><strong class="userinput"><code><a id="markarg.note"></a>note</code></strong></span></dt><dd>A valid note symbol or number (see the <em class="structfield"><code><a href="#note.note">NOTE</a></code></em>
	      slot in the <code class="classname"><a href="#class.note">NOTE</a></code> class).</dd><dt><span class="term"><strong class="userinput"><code><a id="markarg.string"></a>string</code></strong></span></dt><dd>A text string.</dd><dt><span class="term"><strong class="userinput"><code><a id="markarg.trem.subdiv"></a>trem-subdiv</code></strong></span></dt><dd>A durational value (a ratio or integer) for a tremolo subdivision.  It is specified in beats (for example, if one beat equals
	    a quarter note value, a tremolo with a value of <code class="literal">1/2</code> indicates an eighth-note tremolo, <code class="literal">1/4</code>
	    indicates a sixteenth-note tremolo, etc.). 
	    If the optional <code class="literal">:NOTATED</code> keyword is given, the number is instead interpreted as
	    a written duration regardless of the beat value (so in this case, 1/8 indicates an eighth-note tremolo, 1/16 indicates a sixteenth-note
	    tremolo, etc.).  The absence of a number indicates an unmeasured tremolo and is notated with three tremolo beams.</dd></dl></div><p>
      </p><p>
        Marks with no arguments can always be indicated with a symbol only (the enclosing list isn't necessary).
        Also, many of these symbols closely correspond to symbols used in some of the backend formats (<span class="application">MusicXML</span>
	and <span class="application">LilyPond</span>). 
	Not all symbols are supported in all of the backends.
      </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id301244"></a>Articulations</h3></div></div></div><p>
        These marks add articulation symbols to notes. Multiple levels of slurs may be specified (<span class="application">FOMUS</span> 
	applies extra sorting to slurs to insure that smaller ones occur in the "innermost" level while larger ones occur in the "outermost" level).
	The <code class="function"><a href="#mark.graceslur-">:GRACESLUR-</a></code> marks are slurs reserved for gracenotes, and
	are automatically added by <span class="application">FOMUS</span> by default.
      </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">(<a id="mark.staccato"></a>:STACCATO &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.staccatissimo"></a>:STACCATISSIMO &amp;optional
	  <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.accent"></a>:ACCENT &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.marcato"></a>:MARCATO &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.tenuto"></a>:TENUTO &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.portato"></a>:PORTATO &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.slur-"></a>:STARTSLUR- &amp;optional
	  <strong class="userinput"><code><a href="#markarg.level">level</a></code></strong> &lt;-&gt; <code class="literal">:DOTTED</code>)</code> / <code class="function">(:SLUR- &amp;optional
	  <strong class="userinput"><code><a href="#markarg.level">level</a></code></strong>)</code> / <code class="function">(:ENDSLUR- &amp;optional
	  <strong class="userinput"><code><a href="#markarg.level">level</a></code></strong>)</code></td></tr><tr><td><code class="function"><a id="mark.graceslur-"></a>:STARTGRACESLUR-</code> / <code class="function">:GRACESLUR-</code> / <code class="function">:ENDGRACESLUR-</code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id301505"></a>Dynamics</h3></div></div></div><p>
	These add common dynamic markings. The <code class="function"><a href="#mark.wedge.gt">:WEDGE&gt;</a></code> and 
	<code class="function"><a href="#mark.wedge.lt">:WEDGE&lt;</a></code> marks create wedge-shaped crescendo and decrescendo markings.
      </p><p>
        All of the dynamics marks may be appended with an asterisk (for example <code class="function">FFF*</code> or <code class="function">:STARTWEDGE&lt;*</code>).
	These marks are equivalent to the non-asterisk versions, the only difference being that during MIDI playback dynamics changes will affect all voices in a part.
	This allows the user to specify one set of notated dynamics markings for a part with multiple voices 
	(using <code class="classname"><a href="#class.mark">MARK</a></code> objects, for example), but have the MIDI playback rendered more accurately.
      </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function"><a id="mark.ffffff"></a>:FFFFFF</code></td></tr><tr><td><code class="function"><a id="mark.fffff"></a>:FFFFF</code></td></tr><tr><td><code class="function"><a id="mark.ffff"></a>:FFFF</code></td></tr><tr><td><code class="function"><a id="mark.fff"></a>:FFF</code></td></tr><tr><td><code class="function"><a id="mark.ff"></a>:FF</code></td></tr><tr><td><code class="function"><a id="mark.f"></a>:F</code></td></tr><tr><td><code class="function"><a id="mark.mf"></a>:MF</code></td></tr><tr><td><code class="function"><a id="mark.mp"></a>:MP</code></td></tr><tr><td><code class="function"><a id="mark.p"></a>:P</code></td></tr><tr><td><code class="function"><a id="mark.pp"></a>:PP</code></td></tr><tr><td><code class="function"><a id="mark.ppp"></a>:PPP</code></td></tr><tr><td><code class="function"><a id="mark.pppp"></a>:PPPP</code></td></tr><tr><td><code class="function"><a id="mark.ppppp"></a>:PPPPP</code></td></tr><tr><td><code class="function"><a id="mark.pppppp"></a>:PPPPPP</code></td></tr><tr><td><code class="function"><a id="mark.sfz"></a>:SFZ</code></td></tr><tr><td><code class="function"><a id="mark.sff"></a>:SFF</code></td></tr><tr><td><code class="function"><a id="mark.rfz"></a>:RFZ</code></td></tr><tr><td><code class="function"><a id="mark.fp"></a>:FP</code></td></tr><tr><td><code class="function"><a id="mark.sf"></a>:SF</code></td></tr><tr><td><code class="function"><a id="mark.sp"></a>:SP</code></td></tr><tr><td><code class="function"><a id="mark.spp"></a>:SPP</code></td></tr><tr><td><code class="function"><a id="mark.wedge.gt"></a>:STARTWEDGE&gt;</code> / <code class="function">:WEDGE&gt;</code> / <code class="function">:ENDWEDGE&gt;</code></td></tr><tr><td><code class="function"><a id="mark.wedge.lt"></a>:STARTWEDGE&lt;</code> / <code class="function">:WEDGE&lt;</code> / <code class="function">:ENDWEDGE&lt;</code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id301854"></a>Tempo/Duration</h3></div></div></div><p>
        These are notation symbols that affect duration. Three different types of fermatas may be specified (the default is <code class="literal">:SHORT</code> if none is specified).
	Breath marks may be set to occur before or after the note it's attached to (the default is <code class="literal">:AFTER</code>).
	The <code class="literal">:AUTODUR</code> mark indicates that <span class="application">FOMUS</span> should determine the duration of the
	note, appropriate for events such as pizzicatos or other percussive-type attacks that don't require a specific duration but only a simply notated one.
	This has an effect only if the <code class="varname"><a href="#setting.auto.percussion.durs">AUTO-PERCUSSION-DURS</a></code> setting
	is set to <code class="literal">T</code>.
      </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">(<a id="mark.fermata"></a>:FERMATA &amp;optional <code class="literal">:SHORT</code>|<code class="literal">:LONG</code>|<code class="literal">:VERYLONG</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.breath"></a>:BREATH &amp;optional <code class="literal">:BEFORE</code>|<code class="literal">:AFTER</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.autodur"></a>:AUTODUR)</code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id301978"></a>Ornamentations</h3></div></div></div><p>
        These marks add common ornamentation markings. 
	Glissandi and portamenti may be set to occur before or after a note (the default for both is <code class="literal">:BEFORE</code>).
	A <code class="function"><a href="#mark.tremolo">:TREMOLO</a></code> mark is notated by placing slashes over the note stems while the
	<code class="function"><a href="#mark.tremolofirst">:TREMOLOFIRST</a></code> and 
	<code class="function"><a href="#mark.tremolosecond">:TREMOLOSECOND</a></code> marks refer to the chordal tremolos commonly
	found in piano scores. These are processed by separating the notes marked "first" from the ones marked "second" into separately notated chords 
	and placing a tremolo-style beam over them.  The optional <code class="literal">:NOTATED</code> keyword indicates that the subdivision number is to be
	interpreted as a written duration.
	The optional <code class="literal">:UP</code> and <code class="literal">:DOWN</code> keywords in the <code class="function"><a href="#mark.arpeggio">:ARPEGGIO</a></code>
	mark specify that a direction is to be notated using an arrowhead.
	The optional <strong class="userinput"><code><a href="#markarg.note">note</a></code></strong> arguments are for specifying the trill note.
	Only half and whole step trills are currently supported (and unison trills for percussion instruments).
      </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">(<a id="mark.tremolo"></a>:TREMOLO &amp;optional <strong class="userinput"><code><a href="#">trem-subdiv</a></code></strong>
	  &lt;-&gt; <code class="literal">:NOTATED</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.tremolofirst"></a>:TREMOLOFIRST &amp;optional
	  <strong class="userinput"><code><a href="#">trem-subdiv</a></code></strong> &lt;-&gt; <code class="literal">:NOTATED</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.tremolosecond"></a>:TREMOLOSECOND &amp;optional
	  <strong class="userinput"><code><a href="#">trem-subdiv</a></code></strong> &lt;-&gt; <code class="literal">:NOTATED</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.longtrill"></a>:LONGTRILL &amp;optional <strong class="userinput"><code><a href="#markarg.note">note</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.arpeggio"></a>:ARPEGGIO &amp;optional <code class="literal">:UP</code>|<code class="literal">:DOWN</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.glissando"></a>:GLISSANDO &amp;optional <code class="literal">:BEFORE</code>|<code class="literal">:AFTER</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.portamento"></a>:PORTAMENTO &amp;optional <code class="literal">:BEFORE</code>|<code class="literal">:AFTER</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.trill"></a>:TRILL &amp;optional <strong class="userinput"><code><a href="#markarg.note">note</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.mordent"></a>:MORDENT &amp;optional <strong class="userinput"><code><a href="#markarg.note">note</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.prall"></a>:PRALL &amp;optional &amp;optional <strong class="userinput"><code><a href="#markarg.note">note</a></code></strong>)</code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id302331"></a>Effects</h3></div></div></div><p>
	These marks are for special instrument-specific effects or instructions.
	If the <code class="varname"><a href="#setting.auto.pizz/arco">AUTO-PIZZ/ARCO</a></code> setting is set to <code class="literal">T</code>,
	the <code class="function"><a href="#mark.arco">:ARCO</a></code> marks shouldn't be needed--<span class="application">FOMUS</span> inserts them where they are necessary.
	Harmonics are specified by attaching one or more <code class="function"><a href="#mark.harmonic">:HARMONIC</a></code> marks, each
	indicating an extra note to appear above the base note.
	Specifying <code class="literal">:SOUNDING</code> (the default) causes a small parenthesized notehead to appear while specifying
	<code class="literal">:TOUCHED</code> causes a diamond notehead to appear.
	The actual results may vary depending on the backend (extra editing may be required).
	Notes are indicated with either a symbol or number, as in the <em class="structfield"><code><a href="#note.note">NOTE</a></code></em>
	slot in the <code class="classname"><a href="#class.note">NOTE</a></code> class.
	(Extra accidentals are not specified here.)
      </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function"><a id="mark.pizz"></a>:PIZZ</code></td></tr><tr><td><code class="function"><a id="mark.arco"></a>:ARCO</code></td></tr><tr><td>
	  <code class="function">(<a id="mark.harmonic"></a>:HARMONIC <strong class="userinput"><code><a href="#markarg.note">note</a></code></strong> 
	  &lt;-&gt; &amp;optional <code class="literal">:TOUCHED</code>|<code class="literal">:SOUNDING</code>)</code>
	</td></tr><tr><td><code class="function">(<a id="mark.open"></a>:OPEN &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.stopped"></a>:STOPPED &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.upbow"></a>:UPBOW &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.downbow"></a>:DOWNBOW &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.thumb"></a>:THUMB &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.leftheel"></a>:LEFTHEEL &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.rightheel"></a>:RIGHTHEEL &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.lefttoe"></a>:LEFTTOE &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.righttoe"></a>:RIGHTTOE &amp;optional <strong class="userinput"><code><a href="#markarg.art.order">art-order</a></code></strong>)</code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id302684"></a>Text</h3></div></div></div><p>
        Different kinds of text may be attached to events.
	<code class="function"><a href="#mark.textnote">:TEXTNOTE</a></code> is for text that appears over a single note (for example, "sul G"), 
	<code class="function"><a href="#mark.text">:TEXT</a></code> and <code class="function"><a href="#mark.text-">:TEXT-</a></code>
	are for italicized texts that appear above or beneath the staff, 
	<code class="function"><a href="#mark.texttempo">:TEXTTEMPO</a></code> indicates tempo changes (and is printed in a larger boldface font),
	and <code class="function"><a href="#mark.textdyn">:TEXTDYN</a></code> is for texts appearing in a dynamics-type font.
	For text spanners, "levels" may be specified to influence the order of their placement on the score.
      </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">(<a id="mark.textnote"></a>:TEXTNOTE <strong class="userinput"><code><a href="#markarg.string">string</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.text"></a>:TEXT <strong class="userinput"><code><a href="#markarg.string">string</a></code></strong> &lt;-&gt; &amp;optional
	  <code class="literal">:UP</code>|<code class="literal">:DOWN</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.text-"></a>:STARTTEXT- <strong class="userinput"><code><a href="#markarg.string">string</a></code></strong> &lt;-&gt;
	  &amp;optional <strong class="userinput"><code><a href="#markarg.level">level</a></code></strong> &lt;-&gt; <code class="literal">:UP</code>|<code class="literal">:DOWN</code>)</code>
	  / <code class="function">(:TEXT- &amp;optional
	  <strong class="userinput"><code><a href="#markarg.level">level</a></code></strong>)</code> / <code class="function">(:ENDTEXT- &amp;optional
	  <strong class="userinput"><code><a href="#markarg.level">level</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.texttempo"></a>:TEXTTEMPO <strong class="userinput"><code><a href="#markarg.string">string</a></code></strong> &lt;-&gt; &amp;optional
	  <code class="literal">:UP</code>|<code class="literal">:DOWN</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.textdyn"></a>:TEXTDYN <strong class="userinput"><code><a href="#markarg.string">string</a></code></strong> &lt;-&gt; &amp;optional
	  <code class="literal">:UP</code>|<code class="literal">:DOWN</code>)</code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id302962"></a>Notation</h3></div></div></div><p>
        Most of these behave as user overrides to <span class="application">FOMUS</span>'s automatic algorithms.
        <code class="function"><a href="#mark.cautacc">:CAUTACC</a></code> indicates that a cautionary accidental is to be placed before
	the note.  <code class="function"><a href="#mark.forceacc">:FORCEACC</a></code> forces an accidental spelling.
	<code class="function"><a href="#mark.notehead">:NOTEHEAD</a></code> indicates a different notehead.
	The <code class="function"><a href="#mark.clef">:CLEF</a></code> and <code class="function"><a href="#mark.clef-">:CLEF-</a></code> spanner
	marks indicate clef changes and regions where a certain clef is required.  A clef spanner must occur in a single voice.
	All marks containing <code class="function">8UP</code> and <code class="function">8DOWN</code> are overrides for ottava brackets and must be specified
	for notes that appear in a single staff rather than a voice.  The <code class="function"><a href="#mark.tie">:TIE</a></code> mark
	ties a note to the following or previous note depending on whether <code class="literal">:BEFORE</code> or <code class="literal">:AFTER</code> (default) is supplied
	and whether or note the adjacent note is the same.
      </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function"><a id="mark.cautacc"></a>:CAUTACC</code></td></tr><tr><td><code class="function"><a id="mark.forceacc"></a>:FORCEACC</code></td></tr><tr><td><code class="function">(<a id="mark.notehead"></a>:NOTEHEAD 
	<code class="literal">:HARMONIC</code>|<code class="literal">:DIAMOND</code>|<code class="literal">:X</code>|<code class="literal">:XCIRCLE</code>|<code class="literal">:TRIANGLE</code>|<code class="literal">:SLASH</code>)</code></td></tr><tr><td><code class="function">(<a id="mark.clef"></a>:CLEF <strong class="userinput"><code><a href="#markarg.clef">clef</a></code></strong>)</code></td></tr><tr><td><code class="function">(<a id="mark.clef-"></a>:STARTCLEF
	  <strong class="userinput"><code><a href="#markarg.clef">clef</a></code></strong>)</code> / <code class="function">:CLEF-</code> / <code class="function">:ENDCLEF-</code></td></tr><tr><td><code class="function"><a id="mark.8up"></a>:8UP</code></td></tr><tr><td><code class="function"><a id="mark.8up-"></a>:START8UP-</code> / <code class="function">:8UP-</code> / <code class="function">:END8UP-</code></td></tr><tr><td><code class="function"><a id="mark.8down"></a>:8DOWN</code></td></tr><tr><td><code class="function"><a id="mark.8down-"></a>:START8DOWN-</code> / <code class="function">:8DOWN-</code> / <code class="function">:END8DOWN-</code></td></tr><tr><td><code class="function">(<a id="mark.tie"></a>:TIE &amp;optional <code class="literal">:BEFORE</code>|<code class="literal">:AFTER</code>)</code></td></tr></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id303298"></a>TIMESIG Properties</h2></div></div></div><p>
      These are marks that are specified in <code class="classname"><a href="#class.timesig">TIMESIG</a></code> objects
      (and are called properties rather than marks). They either affect one location in the score at the 
      <code class="classname"><a href="#class.timesig">TIMESIG</a></code> object's offset or the entire region of the score governed by that time signature.
    </p><p>
      At the moment there's only one property, <code class="function"><a href="#prop.barline">:BARLINE</a></code> that
      changes the type of barline that appears at the <code class="classname"><a href="#class.timesig">TIMESIG</a></code>'s
      offset.
    </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">(<a id="prop.barline"></a>:BARLINE 
      <code class="literal">:SINGLE</code>|<code class="literal">:DOUBLE</code>|<code class="literal">:FINAL</code>|<code class="literal">:REPEATLEFT</code>|<code class="literal">:REPEATRIGHT</code>|<code class="literal">:REPEATLEFTRIGHT</code>|<code class="literal">:INVISIBLE</code>)</code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id303408"></a>PART Properties</h2></div></div></div><p>
      These are "marks" that are specified in <code class="classname"><a href="#class.part">PART</a></code> objects
      (and are called properties rather than marks). They either change how the part appears in the score or affect
      all of the objects in that part some way.
    </p><p>
      At the moment there's only one property, <code class="function"><a href="#prop.distr">:DISTR</a></code> that
      allows the user to distribute notes or rests across several other parts.  This is done by voice so that
      the user may specify multiple parts for a single instrument but insert all of the events into only one of them. 
      The user may then, for example, treat four violins as one instrument, inserting note events for all four instruments into
      one part and letting <span class="application">FOMUS</span>'s voice separating algorithm  figure out how they are distributed to the actual parts that appear in the score.
    </p><p>
      The syntax of this property is given below.
      The <code class="literal">PARTID</code> argument specifies the part that notes and rests are moved to once all voices have been determined.  The <code class="literal">VOICE</code> or
      <code class="literal">VOICEFROM</code> arguments specify which events are to be moved.  <code class="literal">VOICETO</code>, if given, specifies
      the voice the events will have once they have been moved.  If <code class="literal">VOICETO</code> isn't given, then the new voice defaults to
      the position of the argument in the list. <code class="literal">(:DISTR (PRT1 2 3) (PRT2 1 4))</code> is then equivalent to 
      <code class="literal">(:DISTR (PRT1 (2 1) (3 2)) (PRT2 (1 1) (4 2)))</code>--events in voices 2 and 3 are distributed to the part <code class="literal">PRT1</code>
      as voices 1 and 2 while events in voices 1 and 4 are distributed to <code class="literal">PRT2</code> as voices 1 and 2.
    </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="function">(<a id="prop.distr"></a>:DISTR
      (<strong class="userinput"><code>partid</code></strong> <strong class="userinput"><code>voice</code></strong>|(<strong class="userinput"><code>voicefrom</code></strong> <strong class="userinput"><code>voiceto</code></strong>) ...) ...)</code></td></tr></table></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="backends"></a>Chapter 7. Backends</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id305955"></a></span></dt><dt><span class="section"><a href="#id306378">Data</a></span></dt><dt><span class="section"><a href="#id306449">LilyPond</a></span></dt><dd><dl><dt><span class="section"><a href="#id306560">LilyPond Options</a></span></dt><dt><span class="section"><a href="#id306741">Alphabetical Listing of Options</a></span></dt></dl></dd><dt><span class="section"><a href="#id307394">MusicXML</a></span></dt><dd><dl><dt><span class="section"><a href="#id307510">MusicXML Options</a></span></dt><dt><span class="section"><a href="#id307573">Alphabetical Listing of Options</a></span></dt></dl></dd><dt><span class="section"><a href="#id307770">MusicXML for Sibelius</a></span></dt><dt><span class="section"><a href="#id307803">MusicXML for Finale</a></span></dt><dt><span class="section"><a href="#id307834">Common Music Notation</a></span></dt><dd><dl><dt><span class="section"><a href="#id307902">CMN Options</a></span></dt><dt><span class="section"><a href="#id307985">Alphabetical Listing of Options</a></span></dt></dl></dd><dt><span class="section"><a href="#id308245">MIDI</a></span></dt><dd><dl><dt><span class="section"><a href="#id308376">MIDI Options</a></span></dt><dt><span class="section"><a href="#id308627">Alphabetical Listing of Options</a></span></dt></dl></dd><dt><span class="section"><a href="#id310136">Raw</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p>
      This chapter explains options specific to each of the possible output formats.
      One or more backends may be selected with the <code class="varname"><a href="#setting.backend">BACKEND</a></code> setting.
      Most options are passed as keyword/argument pairs via this setting or in the
      <em class="structfield"><code><a href="#part.opts">OPTS</a></code></em> slot of the <code class="classname"><a href="#class.part">PART</a></code>
      class.
  	  Current possible backend symbols are <code class="literal">:DATA</code> or <code class="literal">:FOMUS</code>, <code class="literal">:RAW</code>, <code class="literal">:MUSICXML</code>, 
	  <code class="literal">:MUSICXML-SIBELIUS</code>, <code class="literal">:MUSICXML-FINALE</code>, <code class="literal">:CMN</code>, <code class="literal">:LILYPOND</code> and <code class="literal">:MIDI</code>.
      Attention must be made to spelling since misspelled keyword arguments are ignored rather than cause errors (this will be improved in future releases).
    </p><p>
      The base output filename is specified using the <code class="varname"><a href="#setting.filename">FILENAME</a></code> setting.
      It may be overridden by the <code class="varname">filename</code> option present in each of the backends.
      Each backend adds its own extension (for example, a LilyPond file always has a <code class="filename">.ly</code> extension).
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id306378"></a>Data</h2></div></div></div><p>
      This produces a file with extension <code class="filename">.fms</code> containing a dump of the data that is
      sent to <span class="application">FOMUS</span> before any processing occurs.
      If this is the only backend specified, <span class="application">FOMUS</span> simply saves the data and returns without further processing.
      It may be specified using either the <code class="literal">:DATA</code> or <code class="literal">:FOMUS</code> keywords in the 
      <code class="varname"><a href="#setting.backend">BACKEND</a></code> setting.
      The file is editable and can be reloaded for editing and processing by calling the <code class="function"><a href="#function.fomus2">FOMUS</a></code>
      function with the name of the file. See <a href="#interface.text" title="Text File Interface">Text File Interface</a> for a description of this file format.
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id306449"></a>LilyPond</h2></div></div></div><p>
      <span class="application">FOMUS</span> currently creates notation files for <span class="application">LilyPond</span> versions 2.4 and 2.6.
      The <code class="varname"><a href="#setting.backend">BACKEND</a></code> setting keyword to use is <code class="literal">:LILYPOND</code>.
      <span class="application">FOMUS</span> outputs a slightly different file depending on whether LilyPond version 2.4 or 2.6 is installed to insure
      that it compiles correctly (a file for one version may give an error when compiled in the other version).
      A <code class="filename">.ly</code> extension is added to the base filename to make the complete output filename.
      When <span class="application">FOMUS</span> loads it looks for <span class="application">LilyPond</span> 
      and viewer application executables in several locations in the filesystem.
      If these executables are in an uncommon location or the user wants to specify these herself, several options exist for
      setting the pathnames and changing command line arguments.
      When setup correctly, <span class="application">FOMUS</span> can automatically compile the output file and launch a viewer (a PostScript
      viewing application in <span class="application">Gnome</span> or <span class="application">KDE</span>
      or the <span class="application">Preview</span> application in OS X).
    </p><p>
      Tremolos might be represented by displaying slash marks (like in the MusicXML
      <code class="varname"><a href="#musicxml.1note.tremolo.kludge">:XML-1NOTE-TREMOLO-KLUDGE</a></code>
      and <code class="varname"><a href="#musicxml.multinote.tremolo.kludge">:XML-MULTINOTE-TREMOLO-KLUDGE</a></code> options)
      in rare cases where they can't be indicated properly.
    </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id306560"></a>LilyPond Options</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#lily.filename">:FILENAME</a></code></td><td><code class="varname"><a href="#lily.view.opts">:VIEW-OPTS</a></code></td><td><code class="varname"><a href="#lily.out.ext">:OUT-EXT</a></code></td></tr><tr><td><code class="varname"><a href="#lily.process">:PROCESS</a></code></td><td><code class="varname"><a href="#lily.version">:VERSION</a></code></td><td><code class="varname"><a href="#lily.text.markup">:TEXT-MARKUP</a></code></td></tr><tr><td><code class="varname"><a href="#lily.view">:VIEW</a></code></td><td><code class="varname"><a href="#lily.filehead">:FILEHEAD</a></code></td><td><code class="varname"><a href="#lily.textdyn.markup">:TEXTDYN-MARKUP</a></code></td></tr><tr><td><code class="varname"><a href="#lily.exe">:EXE</a></code></td><td><code class="varname"><a href="#lily.scorehead">:SCOREHEAD</a></code></td><td><code class="varname"><a href="#lily.texttempo.markup">:TEXTTEMPO-MARKUP</a></code></td></tr><tr><td><code class="varname"><a href="#lily.opts">:OPTS</a></code></td><td><code class="varname"><a href="#lily.parthead">:LILY-PARTHEAD</a></code></td><td><code class="varname"><a href="#lily.textnote.markup">:TEXTNOTE-MARKUP</a></code></td></tr><tr><td><code class="varname"><a href="#lily.view.exe">:VIEW-EXE</a></code></td><td><code class="varname"><a href="#lily.partname">:LILY-PARTNAME</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id306741"></a>Alphabetical Listing of Options</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="varname"><a id="lily.exe"></a>:EXE</code></span></dt><dd><p> 
	      This is a string specifying the path and filename to the <span class="application">LilyPond</span> executable.
	      The full pathname may or may not need to be specified depending on the Lisp implementation.
	      This overrides the <code class="varname"><a href="#setting.lilypond.exe">LILYPOND-EXE</a></code> setting if used.
    	    </p></dd><dt><span class="term"><code class="varname"><a id="lily.opts"></a>:OPTS</code></span></dt><dd><p>
	      This is a list of strings representing options to be passed to the <span class="application">LilyPond</span> executable.
	      The default is currently <code class="literal">'("--ps")</code> for Linux or <code class="literal">'("--pdf")</code> for OS X/Windows,
	      specifying that <span class="application">LilyPond</span> should generate either a PostScript or PDF format file.
	      This overrides the <code class="varname"><a href="#setting.lilypond.opts">LILYPOND-OPTS</a></code> setting if used.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="lily.filehead"></a>:FILEHEAD</code></span></dt><dd><p>
	      This is a string or list of strings representing text to be inserted directly into the output file.
	      Each string in the list is followed by a carriage return.
	      The text is inserted near the top of the file at a point before any score or part data appears.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="lily.filename"></a>:FILENAME</code></span></dt><dd><p>
	      This is a string representing the output filename.
	      It overrides the <code class="varname"><a href="#setting.filename">FILENAME</a></code> setting if used.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="lily.out.ext"></a>:OUT-EXT</code></span></dt><dd><p>
	      This is a string specifying the extension for the output filename that is created when <span class="application">LilyPond</span> is run.
	      The default is <code class="literal">"ps"</code> for Linux and <code class="literal">"pdf"</code> for OS X/Windows.
	      This overrides the <code class="varname"><a href="#setting.lilypond.out.ext">LILYPOND-OUT-EXT</a></code> setting if used.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="lily.parthead"></a>:LILY-PARTHEAD</code></span></dt><dd><p>
	      This option is specified in <code class="classname"><a href="#class.part">PART</a></code> part objects
	      and is valid only for that part.
	      It is a string or list of strings representing text to be inserted directly into the output file.
	      Each string is followed by a carriage return.
	      The text inserted at the beginning of a staff section just before note, rest and other
	      information appears for that part in the file.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="lily.partname"></a>:LILY-PARTNAME</code></span></dt><dd><p>
	      This option is specified in <code class="classname"><a href="#class.part">PART</a></code> part objects
	      and is valid only for that part.
	      It is a string representing a part name used to uniquely identify the part in the output file.
	      If it isn't supplied, <span class="application">FOMUS</span> automatically generates a name.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="lily.process"></a>:PROCESS</code></span></dt><dd><p>
	      If set to <code class="literal">T</code>, indicates that <span class="application">FOMUS</span> should call <span class="application">LilyPond</span>
	      to process the output file once it's been written.
	      If set to <code class="literal">NIL</code>, only the output file is written and no processing occurs (unless 
	      <code class="varname"><a href="#lily.view">VIEW</a></code> is set to <code class="literal">T</code>).
  	  </p></dd><dt><span class="term"><code class="varname"><a id="lily.scorehead"></a>:SCOREHEAD</code></span></dt><dd><p>
	      This is a string or list of strings representing text to be inserted directly into the output file at the beginning of a score block.
	      Each string in the list is followed by a carriage return.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="lily.text.markup"></a>:TEXT-MARKUP</code></span></dt><dd><p>
	      This is a "wrapper" string specifying <span class="application">LilyPond</span> markup instructions to be used when
	      specifying text to be printed above or below the staff.
	      The string must have an <code class="literal">~A</code> or similar substring to indicate where to place the actual text
	      (as if in a call to <code class="function">FORMAT</code>).
	      The default value is <code class="literal">"\markup{\italic{~A}}"</code>.
    	    </p></dd><dt><span class="term"><code class="varname"><a id="lily.textdyn.markup"></a>:TEXTDYN-MARKUP</code></span></dt><dd><p>
	      This is a "wrapper" string specifying <span class="application">LilyPond</span> markup instructions to be used when
	      specifying text to be printed in a dynamic-type font.
	      The string must have an <code class="literal">~A</code> or similar substring to indicate where to place the actual text
	      (as if in a call to <code class="function">FORMAT</code>).
	      The default value is <code class="literal">"\markup{\dynamic{\italic{\bold{~A}}}}"</code>.
    	    </p></dd><dt><span class="term"><code class="varname"><a id="lily.textnote.markup"></a>:TEXTNOTE-MARKUP</code></span></dt><dd><p>
	      This is a "wrapper" string specifying <span class="application">LilyPond</span> markup instructions to be used when
	      specifying text to be printed above single notes.
	      The string must have an <code class="literal">~A</code> or similar substring to indicate where to place the actual text
	      (as if in a call to <code class="function">FORMAT</code>).
	      The default value is <code class="literal">"\markup{\italic{~A}}"</code>.
    	    </p></dd><dt><span class="term"><code class="varname"><a id="lily.texttempo.markup"></a>:TEXTTEMPO-MARKUP</code></span></dt><dd><p>
	      This is a "wrapper" string specifying <span class="application">LilyPond</span> markup instructions to be used when
	      specifying text to be printed in a heavy "tempo" font.
	      The string must have an <code class="literal">~A</code> or similar substring to indicate where to place the actual text
	      (as if in a call to <code class="function">FORMAT</code>).
	      The default value is <code class="literal">"\markup{\bold{\huge{~A}}}"</code>.
    	    </p></dd><dt><span class="term"><code class="varname"><a id="lily.version"></a>:VERSION</code></span></dt><dd><p>
	      If set to a string (for example, <code class="literal">"2.8"</code>), forces <span class="application">FOMUS</span> to output <span class="application">LilyPond</span> files for that
	      version.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="lily.view"></a>:VIEW</code></span></dt><dd><p>
	      If set to <code class="literal">T</code>, indicates that <span class="application">FOMUS</span> should call <span class="application">LilyPond</span>
	      to process the output file then open the results with a viewer program for immediate viewing.
	      If set to <code class="literal">NIL</code>, no viewer application is opened.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="lily.view.exe"></a>:VIEW-EXE</code></span></dt><dd><p>
	      This is a string specifying the path and filename to the executable for the viewer application.
	      The full pathname may or may not need to be specified depending on the Lisp implementation.
	      The default application depends on what is installed on the user's machine, and should be
	      one appropriate for viewing PostScript files.
	      This overrides the <code class="varname"><a href="#setting.lilypond.view.exe">LILYPOND-VIEW-EXE</a></code> setting if used.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="lily.view.opts"></a>:VIEW-OPTS</code></span></dt><dd><p>
	      This is a list of strings representing options to be passed to the viewer application executable.
	      This overrides the <code class="varname"><a href="#setting.lilypond.view.opts">LILYPOND-VIEW-OPTS</a></code> setting if used.
  	  </p></dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id307394"></a>MusicXML</h2></div></div></div><p>
    <span class="application">FOMUS</span> outputs <span class="application">MusicXML</span> version 1.1 format files when the <code class="literal">:MUSICXML</code>
    keyword is used in the <code class="varname"><a href="#setting.backend">BACKEND</a></code> setting.
    An <code class="filename">.xml</code> extension is automatically added to make the complete output filename.
    The output file is importable into a number of different notation programs, though the quality of the
    results will vary.
    <span class="application">FOMUS</span> doesn't including any information about positioning--this is left up to the program doing the importing
    to decide.
    So far, <span class="application">MusicXML</span> has been tested on <span class="application">Sibelius</span> version 4.1
    and <span class="application">Finale</span> version 2006.  
    Although the <span class="application">MusicXML</span> format itself can support almost all of the notational elements that <span class="application">FOMUS</span> supports,
    a few things don't seem to work correctly or don't import at all into either of these programs.  
    The following major issues were found:
    </p><div class="itemizedlist"><ul type="disc"><li>Sibelius often imports rhythms incorrectly when they involve tuplets.</li><li>Finale imports tuplets/rhythms incorrectly when they involve nested tuplets.</li><li>There's not much support for importing tremolos.</li></ul></div><p>
    </p><p>
    Most of these are easily fixed with the exception of the improper rhythm/tuplet problems.
    Until there are better solutions for these problems, there are some options for getting around some of them:
    </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id307510"></a>MusicXML Options</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#musicxml.filename">:FILENAME</a></code></td><td><code class="varname"><a href="#musicxml.multinote.tremolo.kludge">:XML-MULTINOTE-TREMOLO-KLUDGE</a></code></td><td><code class="varname"><a href="#musicxml.partgroups.kludge">:XML-PARTGROUPS-KLUDGE</a></code></td></tr><tr><td><code class="varname"><a href="#musicxml.1note.tremolo.kludge">:XML-1NOTE-TREMOLO-KLUDGE</a></code></td><td><code class="varname"><a href="#musicxml.harmonic.kludge">:XML-HARMONIC-KLUDGE</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id307573"></a>Alphabetical Listing of Options</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="varname"><a id="musicxml.filename"></a>:FILENAME</code></span></dt><dd><p>
	      This is a string representing the output filename.
	      It overrides the <code class="varname"><a href="#setting.filename">FILENAME</a></code> setting if used.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="musicxml.1note.tremolo.kludge"></a>:XML-1NOTE-TREMOLO-KLUDGE</code></span></dt><dd><p>
	      If set to <code class="literal">T</code>, indicates to insert a <code class="literal">//</code> symbol wherever there is a single-note tremolo.
	      The number of slashes indicates the number of tremolo lines that would normally be added to the note.
	      The default is <code class="literal">NIL</code>.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="musicxml.harmonic.kludge"></a>:XML-HARMONIC-KLUDGE</code></span></dt><dd><p>
	      If set to <code class="literal">T</code>, <span class="application">FOMUS</span> fudges an artificial harmonic by changing the notehead to a diamond shape.
	      This appears correct when imported into <span class="application">Finale</span> and <span class="application">Siblius</span>, but
	      doesn't make use of the special XML tags reserved for specifying this type of harmonic (a minor issue).
	      The default is <code class="literal">NIL</code>.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="musicxml.partgroups.kludge"></a>:XML-PARTGROUPS-KLUDGE</code></span></dt><dd><p>
	      If set to <code class="literal">T</code>, parts are not grouped together by brackets or braces.  These must then be added manually
	      once the notation data has been imported.
	      The default is <code class="literal">NIL</code>.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="musicxml.multinote.tremolo.kludge"></a>:XML-MULTINOTE-TREMOLO-KLUDGE</code></span></dt><dd><p>
	      If set to <code class="literal">T</code>, indicates to insert a <code class="literal">//-</code> symbol wherever there is a multiple-note tremolo 
	      (such as those sometimes found in piano scores).
	      The number of slashes indicates the number of tremolo beam-lines that would normally be added to the beam or beams connecting the two notes or chords.
	      The default is <code class="literal">NIL</code>.
  	    </p></dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id307770"></a>MusicXML for Sibelius</h2></div></div></div><p>
      This is equivalent to the <a href="#musicxml">MusicXML</a> backend with "kludge" options set appropriately for Sibelius version 4.
      Use the <code class="literal">:MUSICXML-SIBELIUS</code> keyword in the <code class="varname"><a href="#setting.backend">BACKEND</a></code> setting for this.
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id307803"></a>MusicXML for Finale</h2></div></div></div><p>
      This is equivalent to the <a href="#musicxml">MusicXML</a> backend with "kludge" options set appropriately for Finale.
      Use the <code class="literal">:MUSICXML-FINALE</code> keyword in the <code class="varname"><a href="#setting.backend">BACKEND</a></code> setting for this.
    </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id307834"></a>Common Music Notation</h2></div></div></div><p>
      This backend produces files in Lisp syntax suitable for loading and processing with <span class="application">Common Music Notation</span>.
      The <code class="varname"><a href="#setting.backend">BACKEND</a></code> setting for this is <code class="literal">:CMN</code>.
      A <code class="filename">.cmn</code> extension is added to the base filename to make the complete output filename.
      The file can be compiled and viewed automatically if <span class="application">CMN</span> is loaded and an <code class="filename">.eps</code> file
      viewing application (a PostScript viewing application in <span class="application">Gnome</span> or <span class="application">KDE</span>
      or the <span class="application">Preview</span> application in OS X) has been found or is specified by the user.
    </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id307902"></a>CMN Options</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#cmn.filename">:FILENAME</a></code></td><td><code class="varname"><a href="#cmn.score.attr">:SCORE-ATTR</a></code></td><td><code class="varname"><a href="#cmn.view.opts">:VIEW-OPTS</a></code></td></tr><tr><td><code class="varname"><a href="#cmn.process">:PROCESS</a></code></td><td><code class="varname"><a href="#cmn.out.ext">:OUT-EXT</a></code></td><td> </td></tr><tr><td><code class="varname"><a href="#cmn.view">:VIEW</a></code></td><td><code class="varname"><a href="#cmn.view.exe">:VIEW-EXE</a></code></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id307985"></a>Alphabetical Listing of Options</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="varname"><a id="cmn.filename"></a>:FILENAME</code></span></dt><dd><p>
	      This is a string representing the output filename.
	      It overrides the <code class="varname"><a href="#setting.filename">FILENAME</a></code> setting if used.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="cmn.out.ext"></a>:OUT-EXT</code></span></dt><dd><p>
	      This is a string specifying the extension for the output filename that is created when the score file is loaded 
	      and <span class="application">CMN</span> is called.
	      The default is <code class="literal">"eps"</code>.
  	    </p></dd><dt><span class="term"><code class="varname"><a id="cmn.process"></a>:PROCESS</code></span></dt><dd><p>
	      If set to <code class="literal">T</code>, indicates that <span class="application">FOMUS</span> should load the score file and call <span class="application">CMN</span>
	      to process the output file once it's been written.
	      If set to <code class="literal">NIL</code>, only the output file is written and no processing occurs (unless 
	      <code class="varname"><a href="#cmn.view">VIEW</a></code> is set to <code class="literal">T</code>).
  	  </p></dd><dt><span class="term"><code class="varname"><a id="cmn.score.attr"></a>:SCORE-ATTR</code></span></dt><dd><p>
	      This is a list of extra <span class="application">CMN</span> score attributes to be inserted into the score file.
	      The default is <code class="literal">NIL</code>.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="cmn.view"></a>:VIEW</code></span></dt><dd><p>
	      If set to <code class="literal">T</code>, indicates that <span class="application">FOMUS</span> should load the score file and call <span class="application">CMN</span>
	      to process the output file, then open the results with a viewer program for immediate viewing.
	      If set to <code class="literal">NIL</code>, no viewer application is opened.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="cmn.view.exe"></a>:VIEW-EXE</code></span></dt><dd><p>
	      This is a string specifying the path and filename to the executable for the viewer application.
	      The full pathname may or may not need to be specified depending on the Lisp implementation.
	      The default application depends on what is installed on the user's machine, and should be
	      an application appropriate for viewing PostScript or EPS files.
	      This overrides the <code class="varname"><a href="#setting.cmn.view.exe">CMN-VIEW-EXE</a></code> setting if used.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="cmn.view.opts"></a>:VIEW-OPTS</code></span></dt><dd><p>
	      This is a list of strings representing options to be passed to the viewer application executable.
	      It overrides the <code class="varname"><a href="#setting.cmn.view.opts">CMN-VIEW-OPTS</a></code> setting if used.
  	  </p></dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id308245"></a>MIDI</h2></div></div></div><p>
      This requires <span class="application">Common Music</span> to output MIDI data.  
      The purpose of this backend is to allow the user to hear the results after any changes and adjustments made to the music
      (for example, quantizing).
      It should not be used as input to a score notation program, since the output data will not precisely match the input data.
      <span class="application">FOMUS</span> attempts to accurately simulate most of <span class="application">FOMUS</span>'s markings (trills, dynamic markings, etc.).
      Users can override how marks are interpretted by using the <code class="varname"><a href="#midi.events.fun">EVENTS-FUN</a></code> option to
      provide their own instructions.
      Output can also be tweaked using most of the options listed below.
    </p><p>
      See the <code class="classname"><a href="#struct.instr">INSTR</a></code> and <code class="classname"><a href="#struct.perc">PERC</a></code>
      structures for information on how to define MIDI data for <span class="application">FOMUS</span>'s instruments.
    </p><p>
      MIDI output is be routed either to a file or to <span class="application">Common Music</span>'s realtime scheduler, the latter being advantageous if more than 16
      channels are necessary (see the <code class="varname"><a href="#midi.play">PLAY</a></code> option).
      Also, the <code class="varname"><a href="#midi.cm.args">CM-ARGS</a></code> option may be used to send <span class="application">Common Music</span> specific
      arguments to its <code class="function">EVENTS</code> or <code class="function">RTS</code> function, whichever is used.
      <span class="application">FOMUS</span> uses floating point MIDI velocity (or amplitude) values (ie. <code class="literal">0.0</code> to <code class="literal">1.0</code>).
    </p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id308376"></a>MIDI Options</h3></div></div></div><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="varname"><a href="#midi.filename">:FILENAME</a></code></td><td><code class="varname"><a href="#midi.breath.dur">:BREATH-DUR</a></code></td><td><code class="varname"><a href="#midi.portato.mult">:PORTATO-MULT</a></code></td></tr><tr><td><code class="varname"><a href="#midi.play">:PLAY</a></code></td><td><code class="varname"><a href="#midi.instr.per.ch">:INSTR-PER-CH</a></code></td><td><code class="varname"><a href="#midi.slur.adddur">:SLUR-ADDDUR</a></code></td></tr><tr><td><code class="varname"><a href="#midi.cm.args">:CM-ARGS</a></code></td><td><code class="varname"><a href="#midi.fermata.mults">:FERMATA-MULTS</a></code></td><td><code class="varname"><a href="#midi.staccatissimo.mult">:STACCATISSIMO-MULT</a></code></td></tr><tr><td><code class="varname"><a href="#midi.events.fun">:EVENTS-FUN</a></code></td><td><code class="varname"><a href="#midi.grace.dur.secs">:GRACE-DUR-SECS</a></code></td><td><code class="varname"><a href="#midi.staccato.mult">:STACCATO-MULT</a></code></td></tr><tr><td><code class="varname"><a href="#midi.delay">:DELAY</a></code></td><td><code class="varname"><a href="#midi.harmatt">:HARMATT</a></code></td><td><code class="varname"><a href="#midi.tenuto.adddur">:TENUTO-ADDDUR</a></code></td></tr><tr><td><code class="varname"><a href="#midi.nports">:NPORTS</a></code></td><td><code class="varname"><a href="#midi.min.amp">:MIN-AMP</a></code></td><td><code class="varname"><a href="#midi.tramp">:TRAMP</a></code></td></tr><tr><td><code class="varname"><a href="#midi.tempo">:TEMPO</a></code></td><td><code class="varname"><a href="#midi.mindur.secs">:MINDUR-SECS</a></code></td><td><code class="varname"><a href="#midi.trdur.secs">:TRDUR-SECS</a></code></td></tr><tr><td><code class="varname"><a href="#midi.arpatt">:ARPATT</a></code></td><td><code class="varname"><a href="#midi.pbend.width">:PBEND-WIDTH</a></code></td><td><code class="varname"><a href="#midi.trovlp.adddur">:TROVLP-ADDDUR</a></code></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id308627"></a>Alphabetical Listing of Options</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="varname"><a id="midi.arpatt"></a>:ARPATT</code></span></dt><dd><p>
	      A real number from <code class="literal">0</code> to <code class="literal">1</code> specifying the amount of 
	      attenuation to apply to arpeggios to make them sound more natural (a crescendo is also added).
	      The number is subtracted from the velocities of the events. 
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.breath.dur"></a>:BREATH-DUR</code></span></dt><dd><p>
	      A real number greater than <code class="literal">0</code> specifying the duration in beats of a breath mark.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.cm.args"></a>:CM-ARGS</code></span></dt><dd><p>
	      This is a list of arguments that are sent to <span class="application">Common Music</span>'s
	      <code class="function">EVENTS</code> or <code class="function">RTS</code> function, whichever is used.
	      <span class="application">FOMUS</span> overrides the <code class="literal">:TEMPO</code> and <code class="literal">:PLAY</code> keyword arguments to
	      these functions.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.delay"></a>:DELAY</code></span></dt><dd><p>
	      A real number greater than or equal to <code class="literal">0</code> specifying a delay time in seconds to be inserted at the
	      beginning of the MIDI file or output (useful if the score takes several seconds to appear on the screen).
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.events.fun"></a>:EVENTS-FUN</code></span></dt><dd><p>
	      This options provides a way of overriding <span class="application">FOMUS</span>'s default interpretation of marks into MIDI events.
	      It is a function of the form 
	      <code class="function">(lambda (<strong class="userinput"><code>ev</code></strong> <strong class="userinput"><code>mark</code></strong> <strong class="userinput"><code>arg1</code></strong> <strong class="userinput"><code>arg2</code></strong>) ...)</code>,
	      where <strong class="userinput"><code>ev</code></strong> is either a single <span class="application">Common Music</span> <code class="classname">MIDI</code> object or a list of such objects, 
	      <strong class="userinput"><code>mark</code></strong> is a keyword symbol specifying what modifications should occur, and <strong class="userinput"><code>arg1</code></strong> and
	      <strong class="userinput"><code>arg2</code></strong> are input arguments specific to each mark.
	      The function may either modify the <code class="classname">MIDI</code> event objects or create new ones using <span class="application">Common Music</span>
	      functions (or return a mixture of both).  
	      The return value is either a single <code class="classname">MIDI</code> object, a list of <code class="classname">MIDI</code> objects, 
	      <code class="literal">NIL</code> or <code class="literal">'(NIL)</code>.
	      Returning <code class="literal">NIL</code> indicates that <span class="application">FOMUS</span> should use its default function to interpret the mark.
	      <code class="literal">'(NIL)</code> indicates that the return value actually is an empty list of events (and that the default function should not
	      be called)--they will then be deleted from the output.
	    </p><p>  
	      The user should not worry about how multiple marks will affect either other.  
	      For example, a note with both <code class="literal">:TREMOLO</code> and <code class="literal">:ACCENT</code> marks will be passed to the user function
	      first with the <code class="literal">:TREMOLO</code> keyword. Next (assuming the user returned multiple <code class="classname">MIDI</code> events)
	      only the first note of the tremolo is passed to this function with the <code class="literal">:ACCENT</code> keyword.
	      The user function should then only deal directly with what it is given and allow <span class="application">FOMUS</span> to handle
	      the sorting out of these details and applying them to the correct notes.
	      Also, the dynamic markings <code class="literal">:PPPPPP</code> through <code class="literal">:FFFFFF</code> are translated before any other dynamics-related
	      markings, so user code should set the amplitudes of <code class="classname">MIDI</code> objects to some initial value in these cases.
	      Subsequent handling of other dynamics-related marks can then alter MIDI amplitude values in whatever ways are appropriate.
	    </p><p>  
	      Marks that are sent via the <strong class="userinput"><code>mark</code></strong> argument are listed here (with <strong class="userinput"><code>arg1</code></strong> and <strong class="userinput"><code>arg2</code></strong>
	      if appropriate).
	      Marks beginning with <code class="literal">:SPAN-</code> accompany a list of events to modify and correspond to what are called "spanner" marks in
	      <a href="#marks" title="Chapter&#xA0;6.&#xA0;Marks">Marks</a>.
	      </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">:FFFFFF</code></td></tr><tr><td><code class="literal">:FFFFF</code></td></tr><tr><td><code class="literal">:FFFF</code></td></tr><tr><td><code class="literal">:FFF</code></td></tr><tr><td><code class="literal">:FF</code></td></tr><tr><td><code class="literal">:F</code></td></tr><tr><td><code class="literal">:MF</code></td></tr><tr><td><code class="literal">:MP</code></td></tr><tr><td><code class="literal">:P</code></td></tr><tr><td><code class="literal">:PP</code></td></tr><tr><td><code class="literal">:PPP</code></td></tr><tr><td><code class="literal">:PPPP</code></td></tr><tr><td><code class="literal">:PPPPP</code></td></tr><tr><td><code class="literal">:PPPPPP</code></td></tr><tr><td><code class="literal">:RFZ</code></td></tr><tr><td><code class="literal">:SFZ</code></td></tr><tr><td><code class="literal">:SPP</code></td></tr><tr><td><code class="literal">:SP</code></td></tr><tr><td><code class="literal">:SFF</code></td></tr><tr><td><code class="literal">:SF</code></td></tr><tr><td><code class="literal">:FP</code></td></tr><tr><td><code class="literal">:STACCATO</code></td></tr><tr><td><code class="literal">:STACCATISSIMO</code></td></tr><tr><td><code class="literal">:PORTATO</code></td></tr><tr><td><code class="literal">:TENUTO</code></td></tr><tr><td><code class="literal">:MARCATO</code></td></tr><tr><td><code class="literal">:ACCENT</code></td></tr><tr><td><code class="literal">:SPAN-SLUR (<strong class="userinput"><code>arg1</code></strong> is the slur level)</code></td></tr><tr><td><code class="literal">:FERMATA (<strong class="userinput"><code>arg1</code></strong> is either <code class="literal">:SHORT</code>, <code class="literal">:LONG</code> or 
                               <code class="literal">:VERYLONG</code>)</code></td></tr><tr><td><code class="literal">:BREATH</code></td></tr><tr><td><code class="literal">:TREMOLO</code> (<strong class="userinput"><code>arg1</code></strong> is the number of tremolo subdivisions, 
                               <strong class="userinput"><code>arg2</code></strong> is 1/8 for eighth-note subdivions, 1/16 for sixteenths, etc.)</td></tr><tr><td><code class="literal">:SPAN-TREMFIRST</code> (<strong class="userinput"><code>arg1</code></strong> and <strong class="userinput"><code>arg2</code></strong> 
                               are the same as with <code class="literal">:TREMOLO</code>)</td></tr><tr><td><code class="literal">:SPAN-TREMSECOND</code> (<strong class="userinput"><code>arg1</code></strong> and <strong class="userinput"><code>arg2</code></strong> 
                               are the same as with <code class="literal">:TREMOLO</code>)</td></tr><tr><td><code class="literal">:TRILL</code> (<strong class="userinput"><code>arg1</code></strong> is the additional trill pitch)</td></tr><tr><td><code class="literal">:LONGTRILL</code> (<strong class="userinput"><code>arg1</code></strong> is the additional trill pitch)</td></tr><tr><td><code class="literal">:PRALL</code> (<strong class="userinput"><code>arg1</code></strong> is the additional prall pitch)</td></tr><tr><td><code class="literal">:MORDENT</code> (<strong class="userinput"><code>arg1</code></strong> is the additional mordent pitch)</td></tr><tr><td><code class="literal">:SPAN-ARP</code> (<strong class="userinput"><code>arg1</code></strong> is either <code class="literal">:UP</code>, <code class="literal">:DOWN</code> or <code class="literal">NIL</code>, 
                               <strong class="userinput"><code>arg2</code></strong> is the offset of the previous note)</td></tr><tr><td><code class="literal">:SPAN-PORT</code></td></tr><tr><td><code class="literal">:SPAN-GLISS</code></td></tr><tr><td><code class="literal">:SPAN-WEDGE&lt;</code> (<strong class="userinput"><code>arg1</code></strong> is the destination amplitude or velocity, 
                               <strong class="userinput"><code>arg2</code></strong> is the offset of the event following the last event of the wedge)</td></tr><tr><td><code class="literal">:SPAN-WEDGE&gt;</code> (<strong class="userinput"><code>arg1</code></strong> and <strong class="userinput"><code>arg2</code></strong> 
                               are the same as with <code class="literal">:SPAN-WEDGE&lt;</code>)</td></tr><tr><td><code class="literal">:HARMONIC</code> (<strong class="userinput"><code>arg1</code></strong> is either <code class="literal">:SOUNDING</code> or <code class="literal">:TOUCHED</code>, 
                               <strong class="userinput"><code>arg2</code></strong> is the sounding pitch in either case)</td></tr><tr><td><code class="literal">:ARCO</code></td></tr><tr><td><code class="literal">:PIZZ</code></td></tr><tr><td><code class="literal">:STOPPED</code></td></tr><tr><td><code class="literal">:OPEN</code></td></tr><tr><td><code class="literal">:FLAGEOLET</code></td></tr></table><p>
  	    </p></dd><dt><span class="term"><code class="varname"><a id="midi.fermata.mults"></a>:FERMATA-MULTS</code></span></dt><dd><p>
	      This is a list of three real numbers greater than <code class="literal">0</code>, specifying how much to increase (by multiplying) the durations
	      of notes that have fermatas over them.
	      The three values each correspond to short, long and very long fermatas.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.filename"></a>:FILENAME</code></span></dt><dd><p>
	      This is a string representing the output filename.
	      It overrides the <code class="varname"><a href="#setting.filename">FILENAME</a></code> setting if used.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.grace.dur.secs"></a>:GRACE-DUR-SECS</code></span></dt><dd><p>
	      A real number greater than <code class="literal">0</code> specifying the default MIDI grace note duration in seconds.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.harmatt"></a>:HARMATT</code></span></dt><dd><p>
	      A real number from <code class="literal">0</code> to <code class="literal">1</code> specifying the amount of 
	      attenuation to apply to harmonics to make them sound closer to what is expected.	      
	      The number is subtracted from the velocities of the events. 
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.instr.per.ch"></a>:INSTR-PER-CH</code></span></dt><dd><p>
	      When set to an integer value greater than or equal to <code class="literal">1</code>, specifies how many parts with similar instruments
	      (ie. with equivalent MIDI program change values) are stuffed into one MIDI channel or track.
	      A value of <code class="literal">NIL</code> indicates that all parts with the same program change indicated in their 
	      <code class="classname"><a href="#struct.instr">INSTR</a></code> objects are to be put into a single channel.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.min.amp"></a>:MIN-AMP</code></span></dt><dd><p>
	      A real number from <code class="literal">0</code> to <code class="literal">1</code> specifying a minimum velocity value for all midi events.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.mindur.secs"></a>:MINDUR-SECS</code></span></dt><dd><p>
	      This real number specifies an absolute minimum duration in seconds for all midi events.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.nports"></a>:NPORTS</code></span></dt><dd><p>
	      If realtime playback is specified using the <code class="varname"><a href="#midi.play">PLAY</a></code> option, this integer
	      value specifies the number of ports to use.
	      The default is <code class="literal">1</code>.
	      If output is to a MIDI file, then this value will be <code class="literal">1</code> regardless of what is specified.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.pbend.width"></a>:PBEND-WIDTH</code></span></dt><dd><p>
	      This is equivalent to the <code class="literal">:PITCH-BEND-WIDTH</code> option used when opening MIDI streams in <span class="application">Common Music</span>.
	      It is a real number greater than <code class="literal">0</code>, specifying the maximum pitch bend range in semitones used to calculate
	      pitch bend values for quartertone playback.
	      The default is <code class="literal">2</code>.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.play"></a>:PLAY</code></span></dt><dd><p>
	      If set to <code class="literal">NIL</code> or <code class="literal">T</code>, specifies that output is to a MIDI file.
	      <code class="literal">T</code> indicates that the output should be played automatically (equivalent to sending <code class="literal">:PLAY T</code> to
	      <span class="application">Common Music</span>'s <code class="function">EVENTS</code> function).
	      If set to a <span class="application">Common Music</span> MIDI stream, indicates that the <code class="function">RTS</code> function should be used
	      and the MIDI events scheduled for realtime playback.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.portato.mult"></a>:PORTATO-MULT</code></span></dt><dd><p>
	      A real number greater than <code class="literal">0</code> indicating the amount to increase (by multiplying) the duration
	      of MIDI events with portato markings.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.slur.adddur"></a>:SLUR-ADDDUR</code></span></dt><dd><p>
	      A real number greater than or equal to <code class="literal">0</code> indicating the amount of beats to add to the duration
	      of slurred events (causing them to overlap slightly).
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.staccatissimo.mult"></a>:STACCATISSIMO-MULT</code></span></dt><dd><p>
	      A real number greater than <code class="literal">0</code> indicating the amount to increase (by multiplying) the duration
	      of MIDI events with staccatissimo markings.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.staccato.mult"></a>:STACCATO-MULT</code></span></dt><dd><p>
	      A real number greater than <code class="literal">0</code> indicating the amount to increase (by multiplying) the duration
	      of MIDI events with staccato markings.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.tempo"></a>:TEMPO</code></span></dt><dd><p>
	      A real number greater than or equal to <code class="literal">0</code> specifying the MIDI playback tempo.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.tenuto.adddur"></a>:TENUTO-ADDDUR</code></span></dt><dd><p>
	      A real number greater than or equal to <code class="literal">0</code> indicating the amount of beats to add to the duration
	      of MIDI events with tenuto markings.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.tramp"></a>:TRAMP</code></span></dt><dd><p>
	      A real number from <code class="literal">0</code> to <code class="literal">1</code> specifying the amount of 
	      amplification to apply to MIDI events that are a part of a trill or tremolo.
	      The number is added to the velocities of the events.
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.trdur.secs"></a>:TRDUR-SECS</code></span></dt><dd><p>
	      A real number greater than <code class="literal">0</code> indicating the duration in seconds of an individual
	      MIDI event in a trill or tremolo.
	      (For tremolos it is the minimum duration of an individual MIDI event.)
  	  </p></dd><dt><span class="term"><code class="varname"><a id="midi.trovlp.adddur"></a>:TROVLP-ADDDUR</code></span></dt><dd><p>
	      A real number greater than or equal to <code class="literal">0</code> indicating the amount of beats to add to the duration
	      of MIDI events that are a part of a trill or tremolo.
  	  </p></dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id310136"></a>Raw</h2></div></div></div><p>
      This produces a file with extension <code class="filename">.fmr</code> containing a dump of the data that is
      sent to the backends.
      It may be specified using the <code class="literal">:RAW</code> keyword in the 
      <code class="varname"><a href="#setting.backend">BACKEND</a></code> setting.
      In future versions of <span class="application">FOMUS</span>, the user will be able to reload this file to
      produce score files in other formats.
      The user will also be able to concatenate them into single scores, a useful feature if different settings
      are appropriate for different score sections.
      Editing this file isn't recommended or particularly useful.
    </p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="init"></a>Chapter 8. Initialization File</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id313744"></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p>
    All of <span class="application">FOMUS</span>'s default settings may be overridden using an initialization file that <span class="application">FOMUS</span> looks for
    every time it loads.
    This file is named <code class="filename">.fomus</code> and must be created in the user's home directory.
    To specify default settings, simply list keyword/argument pairs as if they were keyword arguments to the
    <code class="function"><a href="#function.fomus">FOMUS</a></code> command.
    </p><div class="example"><a id="id314091"></a><p class="title"><b>Example 8.1. Initialization File Contents</b></p><pre class="programlisting">

:output '((:data) (:lilypond :view t))

:lilypond-exe "/usr/local/bin/lilypond"
:lilypond-opts '("--ps")
:lilypond-out-ext "ps"

:lilypond-view-exe "/usr/bin/ggv"
:cmn-view-exe "/usr/bin/ggv"

:verbose 1
:composer "David Psenicka"
:min-tuplet-dur 1
:max-tuplet 13
:caut-acc-ottavas t
      </pre></div><p>
  </p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="examples"></a>Chapter 9. Examples</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id313775"></a></span></dt><dt><span class="section"><a href="#id313951">Lisp Examples</a></span></dt><dt><span class="section"><a href="#id314225">Common Music Examples</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"></div><p>
     These examples (will eventually) show most of <span class="application">FOMUS</span>'s functionality and hopefully eliminate the need to spend
     countless hours figuring out settings, how to create objects, etc..  Examples using different interfaces 
     (see <a href="#usage" title="Chapter&#xA0;3.&#xA0;Usage">Usage</a>) are given.
     The outputs were all generated using <span class="application">LilyPond</span> 2.8.
  </p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id313951"></a>Lisp Examples</h2></div></div></div><div class="example"><a id="id313957"></a><p class="title"><b>Example 9.1. Simple Example</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :parts
 (list
  (make-part
   :name "Piano"
   :instr :piano
   :events
   (loop
    for off from 0 to 10 by 1/2
    collect (make-note :off off
		       :dur (if (&lt; off 10) 1/2 1)
		       :note (+ 48 (random 25)))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_simp_ex.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314262"></a><p class="title"><b>Example 9.2. Staccato and Accent Marks</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :parts
 (list
  (make-part
   :name "Piano"
   :instr :piano
   :events
   (loop
    for off from 0 to 10 by 1/2
    collect (make-note :off off
		       :dur (if (&lt; off 10) 1/2 1)
		       :note (+ 48 (random 25))
		       :marks (case (random 3)
				(0 nil)
				(1 '(:staccato))
				(2 '(:accent))))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_accents.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314301"></a><p class="title"><b>Example 9.3. Quartertones</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :quartertones t
 :parts
 (list
  (make-part
   :name "Flute"
   :instr :flute
   :events
   (loop
    for off from 0 to 10 by 1/2
    collect (make-note :off off
		       :dur (if (&lt; off 10) 1/2 1)
		       :note (+ 70 (/ (random 4) 2)))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_qtones.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314339"></a><p class="title"><b>Example 9.4. Polyphony with Slurs</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :verbose 1
 :parts
 (list
  (make-part
   :name "Piano"
   :instr :piano
   :events
   (loop for v from 1 to 2
	 nconc (loop
		for off from 0 to 10 by 1/2
		collect (make-note :off off
				   :dur (if (&lt; off 10) 1/2 1)
				   :note (+ 60 (random 25))
				   :voice v
				   :marks (when (= (random 3) 0)
					    '(:startslur-))))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_poly_slurs.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314378"></a><p class="title"><b>Example 9.5. Piano Chords</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :verbose 1
 :ensemble-type :orchestra
 :parts
 (list
  (make-part
   :name "Piano"
   :instr :piano
   :events
   (loop repeat 3
	 nconc (loop
		for off from 0 to 10 by 1/2
		collect (make-note :off off
				   :dur (if (&lt; off 10) 1/2 1)
				   :note (+ 48 (random 25))
				   :voice '(1 2)))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_pno_chords.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314416"></a><p class="title"><b>Example 9.6. Quantizing/Chords</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :parts
 (list
  (make-part
   :name "Piano"
   :instr :piano
   :events
   (loop repeat 10
	 for off = (random 30.0)
	 and dur = (1+ (random 3.0))
	 collect (make-note :off off :dur dur :note (+ 60 (random 25)))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_chords.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314454"></a><p class="title"><b>Example 9.7. Mark Objects</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :parts (list
	 (make-part
	  :partid :flute
	  :name "Flute"
	  :instr :flute
	  :events (loop for o from 0 to 20 by 1/2
			collect (make-note :off o :dur 1/2 :note 72)))
	 (make-part
	  :partid :tuba
	  :name "Tuba"
	  :instr :tuba
	  :events (loop for o from 0 to 20 by 1/2
			collect (make-note :off o :dur 1/2 :note 48))))
 :events (loop repeat 10
	       collect (make-mark :partid (case (random 2) (0 :flute) (1 :tuba))
				  :off (random 20.0)
				  :marks '(:accent))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_mark_objs.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314496"></a><p class="title"><b>Example 9.8. Percussion 1</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :parts (list
	 (make-part
	  :name "Percussion"
	  :instr (list :percussion :percs (list (make-perc :woodblock :note 'e4)
						(make-perc :snaredrum :note 'a3)))
	  :events (loop for o from 0 to 20 by 1/2 collect
			(make-note :off o :dur 1/2
				   :note (case (random 2)
					   (0 :woodblock)
					   (1 :snaredrum)))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_perc1.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314536"></a><p class="title"><b>Example 9.9. Percussion 2</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :parts (list
	 (make-part
	  :name "Percussion"
	  :instr (list :percussion :percs (list (make-perc :woodblock :voice 1 :note 'e4)
						(make-perc :snaredrum :voice 2 :note 'a3)))
	  :events (loop for o from 0 to 20 by 1/2 collect
			(make-note :off o :dur 1/2
				   :note (case (random 2)
					   (0 :woodblock)
					   (1 :snaredrum)))))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_perc2.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314575"></a><p class="title"><b>Example 9.10. Percussion with Automatic Durations</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :parts (list
	 (make-part
	  :name "Snare Drum"
	  :instr '(:percussion :percs ((:snare-drum :note a3)))
	  :events (loop for o from 0 to 40 by 1/2 when (= (random 2) 0) collect
			(make-note :off o
				   :note :snare-drum)))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_perc_autodurs.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314614"></a><p class="title"><b>Example 9.11. Semi-Orchestra Score</b></p><pre class="programlisting">

(fomus
 :output '(:lilypond :view t)
 :ensemble-type :orchestra
 :global (list (make-timesig :off 0 :time '(3 4)))
 :parts (list
	 (make-part
	  :name "Flute 1"
	  :instr :flute
	  :events (list (make-note :off 0 :dur 1 :note 60)))
	 (make-part
	  :partid 'fl2
	  :name "Flute 2"
	  :instr :flute
	  :events (list (make-note :off 0 :dur 1 :note 60)))
	 (make-part
	  :partid 'cl1
	  :name "Clarinet 1"
	  :instr :bf-clarinet
	  :events (list (make-note :off 0 :dur 1 :note 60)))
	 (make-part
	  :name "Clarinet 2"
	  :instr :bf-clarinet
	  :events (list (make-note :off 0 :dur 1 :note 60)))
	 (make-part
	  :name "Violin 1"
	  :instr :violin
	  :events (list (make-note :off 0 :dur 1 :note 60)))
	 (make-part
	  :name "Violin 2"
	  :instr :violin
	  :events (list (make-note :off 0 :dur 1 :note 60)))
	 (make-part
	  :name "Cello 1"
	  :instr :cello
	  :events (list (make-note :off 0 :dur 1 :note 48)))
	 (make-part
	  :name "Cello 2"
	  :instr :cello
	  :events (list (make-note :off 0 :dur 1 :note 48)))
	 (make-part
	  :name "Tuba"
	  :instr :tuba
	  :events (list (make-note :off 0 :dur 1 :note 36)))))
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_orch_sco.jpg" /><div class="caption">Output</div></div></blockquote></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id314225"></a>Common Music Examples</h2></div></div></div><div class="example"><a id="id314230"></a><p class="title"><b>Example 9.12. 2 Part Polyphony</b></p><pre class="programlisting">

(defparameter *part* (new fms:part :instr :piano :partid 'pno))

(defun polygen (voice len minp maxp)
  (process repeat len
	   output (new fms:note
		    :off (now)
		    :voice voice
		    :partid 'pno
		    :note (between minp maxp)
		    :dur 1/2)
	   wait 1/2))

(events (list (polygen 1 20 60 80) (polygen 2 20 40 60)) "/tmp/fomus.ly" :parts *part* :view t)

	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_cm_poly1.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314781"></a><p class="title"><b>Example 9.13. 2 Part Polyphony (FOMUS Chooses the Voice)</b></p><pre class="programlisting">

(defparameter *part* (new fms:part :instr '(:piano :simultlim 1) :partid 'pno))

(defun polygen (voice len minp maxp)
  (process repeat len
	   output (new fms:note
		    :off (now)
		    :voice voice
		    :partid 'pno
		    :note (between minp maxp)
		    :dur 1/2)
	   wait 1/2))

(events (list (polygen '(1 2) 20 50 80) (polygen '(1 2) 20 40 70)) "/tmp/fomus.ly" :parts *part* :view t)
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_cm_poly2.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314821"></a><p class="title"><b>Example 9.14. 3 Part Polyphony</b></p><pre class="programlisting">

(defparameter *part* (new fms:part :instr '(:piano :simultlim 1) :partid 'pno))

(defun polygen (voice len minp maxp)
  (process repeat len
	   output (new fms:note
		    :off (now)
		    :voice voice
		    :partid 'pno
		    :note (between minp maxp)
		    :dur 1/2)
	   wait 1/2))

(events (list (polygen '(1 2 3) 20 50 70) (polygen '(1 2 3) 20 50 70) (polygen '(1 2 3) 20 50 70))
	"/tmp/fomus.ly" :parts *part* :view t)
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_cm_poly3pt.jpg" /><div class="caption">Output</div></div></blockquote></div></div><div class="example"><a id="id314861"></a><p class="title"><b>Example 9.15. 6 Part Polyphony</b></p><pre class="programlisting">

(defparameter *parts*
  (list (new fms:part :name "Violin 1" :instr :violin :partid 'vlns
	     :props '((:distr (v2 2) (v3 3) (v4 4) (v5 5) (v6 6))))
	(new fms:part :name "Violin 2" :instr :violin :partid 'v2)
	(new fms:part :name "Violin 3" :instr :violin :partid 'v3)
	(new fms:part :name "Violin 4" :instr :violin :partid 'v4)
	(new fms:part :name "Violin 5" :instr :violin :partid 'v5)
	(new fms:part :name "Violin 6" :instr :violin :partid 'v6)))

(defun polygen (voice len minp maxp)
  (process repeat len
	   output (new fms:note
		    :off (now)
		    :voice voice
		    :partid 'vlns
		    :note (between minp maxp)
		    :dur 1/2)
	   wait 1/2))

(events (list (polygen '(1 2 3 4 5 6) 20 55 70)
	      (polygen '(1 2 3 4 5 6) 20 60 75)
	      (polygen '(1 2 3 4 5 6) 20 65 80)
	      (polygen '(1 2 3 4 5 6) 20 70 85)
	      (polygen '(1 2 3 4 5 6) 20 75 90)
	      (polygen '(1 2 3 4 5 6) 20 80 95))
	"/tmp/fomus.ly" :parts *parts* :quality 3 :view t)
	</pre><div class="blockquote"><blockquote class="blockquote"><div class="mediaobject"><img src="ex_cm_poly6pt.jpg" /><div class="caption">Output</div></div></blockquote></div></div></div></div></div></body></html>
